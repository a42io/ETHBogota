import{b4 as Ee,b5 as G,aA as li,ay as De,az as ze,b6 as hn,b7 as Go,b8 as lt,b9 as Qe,ba as vl,bb as wl,bc as El,bd as Fl,be as Cl,bf as ss,bg as Al,j as ve,a as ti,bh as Sl,aJ as xl,aO as Ol,c as Il,b0 as Bl,u as Pl,a$ as Tl,r as Be,d as Ra,b2 as Ml,aW as ql,aX as kl,aY as Rl,P as Nl,C as Dl,aQ as zl,aR as jl,at as Ul,f as $l,S as Vl,B as Ql,I as Gl}from"./index.0583ad3b.js";import{u as Wl}from"./useIsMountedRef.78a048d2.js";import{Z as Zl,j as Jl}from"./EventNewEventForm.a3b19548.js";import"./icon_plan_premium.4828f84f.js";import"./illustration_404.6d1d2ea2.js";import"./transition.1cb4ca21.js";import"./warn-once.65f3cd77.js";var Ri="Invariant Violation",Na=Object.setPrototypeOf,Hl=Na===void 0?function(i,t){return i.__proto__=t,i}:Na,Dt=function(i){Ee(t,i);function t(e){e===void 0&&(e=Ri);var n=i.call(this,typeof e=="number"?Ri+": "+e+" (see https://github.com/apollographql/invariant-packages)":e)||this;return n.framesToPop=1,n.name=Ri,Hl(n,t.prototype),n}return t}(Error);function ht(i,t){if(!i)throw new Dt(t)}var cs=["debug","log","warn","error","silent"],Xl=cs.indexOf("log");function Zn(i){return function(){if(cs.indexOf(i)>=Xl){var t=console[i]||console.log;return t.apply(console,arguments)}}}(function(i){i.debug=Zn("debug"),i.log=Zn("log"),i.warn=Zn("warn"),i.error=Zn("error")})(ht||(ht={}));function ge(i){try{return i()}catch{}}const Da=ge(function(){return globalThis})||ge(function(){return window})||ge(function(){return self})||ge(function(){return global})||ge(function(){return ge.constructor("return this")()});var za="__",ja=[za,za].join("DEV");function Yl(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(Da,ja,{value:ge(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),Da[ja]}}const Ni=Yl();function je(i){try{return i()}catch{}}var co=je(function(){return globalThis})||je(function(){return window})||je(function(){return self})||je(function(){return global})||je(function(){return je.constructor("return this")()}),lo=!1;function Kl(){co&&!je(function(){return"production"})&&!je(function(){return process})&&(Object.defineProperty(co,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),lo=!0)}Kl();function Ua(){lo&&(delete co.process,lo=!1)}function ei(i,t){if(!Boolean(i))throw new Error(t)}function tu(i){return typeof i=="object"&&i!==null}function eu(i,t){if(!Boolean(i))throw new Error(t??"Unexpected invariant triggered.")}const nu=/\r\n|[\n\r]/g;function uo(i,t){let e=0,n=1;for(const o of i.body.matchAll(nu)){if(typeof o.index=="number"||eu(!1),o.index>=t)break;e=o.index+o[0].length,n+=1}return{line:n,column:t+1-e}}function iu(i){return ls(i.source,uo(i.source,i.start))}function ls(i,t){const e=i.locationOffset.column-1,n="".padStart(e)+i.body,o=t.line-1,a=i.locationOffset.line-1,c=t.line+a,l=t.line===1?e:0,d=t.column+l,s=`${i.name}:${c}:${d}
`,r=n.split(/\r\n|[\n\r]/g),g=r[o];if(g.length>120){const L=Math.floor(d/80),m=d%80,C=[];for(let A=0;A<g.length;A+=80)C.push(g.slice(A,A+80));return s+$a([[`${c} |`,C[0]],...C.slice(1,L+1).map(A=>["|",A]),["|","^".padStart(m)],["|",C[L+1]]])}return s+$a([[`${c-1} |`,r[o-1]],[`${c} |`,g],["|","^".padStart(d)],[`${c+1} |`,r[o+1]]])}function $a(i){const t=i.filter(([n,o])=>o!==void 0),e=Math.max(...t.map(([n])=>n.length));return t.map(([n,o])=>n.padStart(e)+(o?" "+o:"")).join(`
`)}function ou(i){const t=i[0];return t==null||"kind"in t||"length"in t?{nodes:t,source:i[1],positions:i[2],path:i[3],originalError:i[4],extensions:i[5]}:t}class Wo extends Error{constructor(t,...e){var n,o,a;const{nodes:c,source:l,positions:d,path:s,originalError:r,extensions:g}=ou(e);super(t),this.name="GraphQLError",this.path=s??void 0,this.originalError=r??void 0,this.nodes=Va(Array.isArray(c)?c:c?[c]:void 0);const L=Va((n=this.nodes)===null||n===void 0?void 0:n.map(C=>C.loc).filter(C=>C!=null));this.source=l??(L==null||(o=L[0])===null||o===void 0?void 0:o.source),this.positions=d??L?.map(C=>C.start),this.locations=d&&l?d.map(C=>uo(l,C)):L?.map(C=>uo(C.source,C.start));const m=tu(r?.extensions)?r?.extensions:void 0;this.extensions=(a=g??m)!==null&&a!==void 0?a:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),r!=null&&r.stack?Object.defineProperty(this,"stack",{value:r.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Wo):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let t=this.message;if(this.nodes)for(const e of this.nodes)e.loc&&(t+=`

`+iu(e.loc));else if(this.source&&this.locations)for(const e of this.locations)t+=`

`+ls(this.source,e);return t}toJSON(){const t={message:this.message};return this.locations!=null&&(t.locations=this.locations),this.path!=null&&(t.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(t.extensions=this.extensions),t}}function Va(i){return i===void 0||i.length===0?void 0:i}function ne(i,t,e){return new Wo(`Syntax Error: ${e}`,{source:i,positions:[t]})}class au{constructor(t,e,n){this.start=t.start,this.end=e.end,this.startToken=t,this.endToken=e,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class us{constructor(t,e,n,o,a,c){this.kind=t,this.start=e,this.end=n,this.line=o,this.column=a,this.value=c,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const ds={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},ru=new Set(Object.keys(ds));function Qa(i){const t=i?.kind;return typeof t=="string"&&ru.has(t)}var cn;(function(i){i.QUERY="query",i.MUTATION="mutation",i.SUBSCRIPTION="subscription"})(cn||(cn={}));var fo;(function(i){i.QUERY="QUERY",i.MUTATION="MUTATION",i.SUBSCRIPTION="SUBSCRIPTION",i.FIELD="FIELD",i.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",i.FRAGMENT_SPREAD="FRAGMENT_SPREAD",i.INLINE_FRAGMENT="INLINE_FRAGMENT",i.VARIABLE_DEFINITION="VARIABLE_DEFINITION",i.SCHEMA="SCHEMA",i.SCALAR="SCALAR",i.OBJECT="OBJECT",i.FIELD_DEFINITION="FIELD_DEFINITION",i.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",i.INTERFACE="INTERFACE",i.UNION="UNION",i.ENUM="ENUM",i.ENUM_VALUE="ENUM_VALUE",i.INPUT_OBJECT="INPUT_OBJECT",i.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(fo||(fo={}));var St;(function(i){i.NAME="Name",i.DOCUMENT="Document",i.OPERATION_DEFINITION="OperationDefinition",i.VARIABLE_DEFINITION="VariableDefinition",i.SELECTION_SET="SelectionSet",i.FIELD="Field",i.ARGUMENT="Argument",i.FRAGMENT_SPREAD="FragmentSpread",i.INLINE_FRAGMENT="InlineFragment",i.FRAGMENT_DEFINITION="FragmentDefinition",i.VARIABLE="Variable",i.INT="IntValue",i.FLOAT="FloatValue",i.STRING="StringValue",i.BOOLEAN="BooleanValue",i.NULL="NullValue",i.ENUM="EnumValue",i.LIST="ListValue",i.OBJECT="ObjectValue",i.OBJECT_FIELD="ObjectField",i.DIRECTIVE="Directive",i.NAMED_TYPE="NamedType",i.LIST_TYPE="ListType",i.NON_NULL_TYPE="NonNullType",i.SCHEMA_DEFINITION="SchemaDefinition",i.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",i.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",i.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",i.FIELD_DEFINITION="FieldDefinition",i.INPUT_VALUE_DEFINITION="InputValueDefinition",i.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",i.UNION_TYPE_DEFINITION="UnionTypeDefinition",i.ENUM_TYPE_DEFINITION="EnumTypeDefinition",i.ENUM_VALUE_DEFINITION="EnumValueDefinition",i.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",i.DIRECTIVE_DEFINITION="DirectiveDefinition",i.SCHEMA_EXTENSION="SchemaExtension",i.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",i.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",i.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",i.UNION_TYPE_EXTENSION="UnionTypeExtension",i.ENUM_TYPE_EXTENSION="EnumTypeExtension",i.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(St||(St={}));function ho(i){return i===9||i===32}function Rn(i){return i>=48&&i<=57}function fs(i){return i>=97&&i<=122||i>=65&&i<=90}function hs(i){return fs(i)||i===95}function su(i){return fs(i)||Rn(i)||i===95}function cu(i){var t;let e=Number.MAX_SAFE_INTEGER,n=null,o=-1;for(let c=0;c<i.length;++c){var a;const l=i[c],d=lu(l);d!==l.length&&(n=(a=n)!==null&&a!==void 0?a:c,o=c,c!==0&&d<e&&(e=d))}return i.map((c,l)=>l===0?c:c.slice(e)).slice((t=n)!==null&&t!==void 0?t:0,o+1)}function lu(i){let t=0;for(;t<i.length&&ho(i.charCodeAt(t));)++t;return t}function uu(i,t){const e=i.replace(/"""/g,'\\"""'),n=e.split(/\r\n|[\n\r]/g),o=n.length===1,a=n.length>1&&n.slice(1).every(m=>m.length===0||ho(m.charCodeAt(0))),c=e.endsWith('\\"""'),l=i.endsWith('"')&&!c,d=i.endsWith("\\"),s=l||d,r=!(t!=null&&t.minimize)&&(!o||i.length>70||s||a||c);let g="";const L=o&&ho(i.charCodeAt(0));return(r&&!L||a)&&(g+=`
`),g+=e,(r||s)&&(g+=`
`),'"""'+g+'"""'}var ot;(function(i){i.SOF="<SOF>",i.EOF="<EOF>",i.BANG="!",i.DOLLAR="$",i.AMP="&",i.PAREN_L="(",i.PAREN_R=")",i.SPREAD="...",i.COLON=":",i.EQUALS="=",i.AT="@",i.BRACKET_L="[",i.BRACKET_R="]",i.BRACE_L="{",i.PIPE="|",i.BRACE_R="}",i.NAME="Name",i.INT="Int",i.FLOAT="Float",i.STRING="String",i.BLOCK_STRING="BlockString",i.COMMENT="Comment"})(ot||(ot={}));class du{constructor(t){const e=new us(ot.SOF,0,0,0,0);this.source=t,this.lastToken=e,this.token=e,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let t=this.token;if(t.kind!==ot.EOF)do if(t.next)t=t.next;else{const e=hu(this,t.end);t.next=e,e.prev=t,t=e}while(t.kind===ot.COMMENT);return t}}function fu(i){return i===ot.BANG||i===ot.DOLLAR||i===ot.AMP||i===ot.PAREN_L||i===ot.PAREN_R||i===ot.SPREAD||i===ot.COLON||i===ot.EQUALS||i===ot.AT||i===ot.BRACKET_L||i===ot.BRACKET_R||i===ot.BRACE_L||i===ot.PIPE||i===ot.BRACE_R}function bn(i){return i>=0&&i<=55295||i>=57344&&i<=1114111}function vi(i,t){return _s(i.charCodeAt(t))&&ps(i.charCodeAt(t+1))}function _s(i){return i>=55296&&i<=56319}function ps(i){return i>=56320&&i<=57343}function He(i,t){const e=i.source.body.codePointAt(t);if(e===void 0)return ot.EOF;if(e>=32&&e<=126){const n=String.fromCodePoint(e);return n==='"'?`'"'`:`"${n}"`}return"U+"+e.toString(16).toUpperCase().padStart(4,"0")}function Xt(i,t,e,n,o){const a=i.line,c=1+e-i.lineStart;return new us(t,e,n,a,c,o)}function hu(i,t){const e=i.source.body,n=e.length;let o=t;for(;o<n;){const a=e.charCodeAt(o);switch(a){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++i.line,i.lineStart=o;continue;case 13:e.charCodeAt(o+1)===10?o+=2:++o,++i.line,i.lineStart=o;continue;case 35:return _u(i,o);case 33:return Xt(i,ot.BANG,o,o+1);case 36:return Xt(i,ot.DOLLAR,o,o+1);case 38:return Xt(i,ot.AMP,o,o+1);case 40:return Xt(i,ot.PAREN_L,o,o+1);case 41:return Xt(i,ot.PAREN_R,o,o+1);case 46:if(e.charCodeAt(o+1)===46&&e.charCodeAt(o+2)===46)return Xt(i,ot.SPREAD,o,o+3);break;case 58:return Xt(i,ot.COLON,o,o+1);case 61:return Xt(i,ot.EQUALS,o,o+1);case 64:return Xt(i,ot.AT,o,o+1);case 91:return Xt(i,ot.BRACKET_L,o,o+1);case 93:return Xt(i,ot.BRACKET_R,o,o+1);case 123:return Xt(i,ot.BRACE_L,o,o+1);case 124:return Xt(i,ot.PIPE,o,o+1);case 125:return Xt(i,ot.BRACE_R,o,o+1);case 34:return e.charCodeAt(o+1)===34&&e.charCodeAt(o+2)===34?bu(i,o):gu(i,o)}if(Rn(a)||a===45)return pu(i,o,a);if(hs(a))return vu(i,o);throw ne(i.source,o,a===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:bn(a)||vi(e,o)?`Unexpected character: ${He(i,o)}.`:`Invalid character: ${He(i,o)}.`)}return Xt(i,ot.EOF,n,n)}function _u(i,t){const e=i.source.body,n=e.length;let o=t+1;for(;o<n;){const a=e.charCodeAt(o);if(a===10||a===13)break;if(bn(a))++o;else if(vi(e,o))o+=2;else break}return Xt(i,ot.COMMENT,t,o,e.slice(t+1,o))}function pu(i,t,e){const n=i.source.body;let o=t,a=e,c=!1;if(a===45&&(a=n.charCodeAt(++o)),a===48){if(a=n.charCodeAt(++o),Rn(a))throw ne(i.source,o,`Invalid number, unexpected digit after 0: ${He(i,o)}.`)}else o=Di(i,o,a),a=n.charCodeAt(o);if(a===46&&(c=!0,a=n.charCodeAt(++o),o=Di(i,o,a),a=n.charCodeAt(o)),(a===69||a===101)&&(c=!0,a=n.charCodeAt(++o),(a===43||a===45)&&(a=n.charCodeAt(++o)),o=Di(i,o,a),a=n.charCodeAt(o)),a===46||hs(a))throw ne(i.source,o,`Invalid number, expected digit but got: ${He(i,o)}.`);return Xt(i,c?ot.FLOAT:ot.INT,t,o,n.slice(t,o))}function Di(i,t,e){if(!Rn(e))throw ne(i.source,t,`Invalid number, expected digit but got: ${He(i,t)}.`);const n=i.source.body;let o=t+1;for(;Rn(n.charCodeAt(o));)++o;return o}function gu(i,t){const e=i.source.body,n=e.length;let o=t+1,a=o,c="";for(;o<n;){const l=e.charCodeAt(o);if(l===34)return c+=e.slice(a,o),Xt(i,ot.STRING,t,o+1,c);if(l===92){c+=e.slice(a,o);const d=e.charCodeAt(o+1)===117?e.charCodeAt(o+2)===123?mu(i,o):yu(i,o):Lu(i,o);c+=d.value,o+=d.size,a=o;continue}if(l===10||l===13)break;if(bn(l))++o;else if(vi(e,o))o+=2;else throw ne(i.source,o,`Invalid character within String: ${He(i,o)}.`)}throw ne(i.source,o,"Unterminated string.")}function mu(i,t){const e=i.source.body;let n=0,o=3;for(;o<12;){const a=e.charCodeAt(t+o++);if(a===125){if(o<5||!bn(n))break;return{value:String.fromCodePoint(n),size:o}}if(n=n<<4|In(a),n<0)break}throw ne(i.source,t,`Invalid Unicode escape sequence: "${e.slice(t,t+o)}".`)}function yu(i,t){const e=i.source.body,n=Ga(e,t+2);if(bn(n))return{value:String.fromCodePoint(n),size:6};if(_s(n)&&e.charCodeAt(t+6)===92&&e.charCodeAt(t+7)===117){const o=Ga(e,t+8);if(ps(o))return{value:String.fromCodePoint(n,o),size:12}}throw ne(i.source,t,`Invalid Unicode escape sequence: "${e.slice(t,t+6)}".`)}function Ga(i,t){return In(i.charCodeAt(t))<<12|In(i.charCodeAt(t+1))<<8|In(i.charCodeAt(t+2))<<4|In(i.charCodeAt(t+3))}function In(i){return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:-1}function Lu(i,t){const e=i.source.body;switch(e.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw ne(i.source,t,`Invalid character escape sequence: "${e.slice(t,t+2)}".`)}function bu(i,t){const e=i.source.body,n=e.length;let o=i.lineStart,a=t+3,c=a,l="";const d=[];for(;a<n;){const s=e.charCodeAt(a);if(s===34&&e.charCodeAt(a+1)===34&&e.charCodeAt(a+2)===34){l+=e.slice(c,a),d.push(l);const r=Xt(i,ot.BLOCK_STRING,t,a+3,cu(d).join(`
`));return i.line+=d.length-1,i.lineStart=o,r}if(s===92&&e.charCodeAt(a+1)===34&&e.charCodeAt(a+2)===34&&e.charCodeAt(a+3)===34){l+=e.slice(c,a),c=a+1,a+=4;continue}if(s===10||s===13){l+=e.slice(c,a),d.push(l),s===13&&e.charCodeAt(a+1)===10?a+=2:++a,l="",c=a,o=a;continue}if(bn(s))++a;else if(vi(e,a))a+=2;else throw ne(i.source,a,`Invalid character within String: ${He(i,a)}.`)}throw ne(i.source,a,"Unterminated string.")}function vu(i,t){const e=i.source.body,n=e.length;let o=t+1;for(;o<n;){const a=e.charCodeAt(o);if(su(a))++o;else break}return Xt(i,ot.NAME,t,o,e.slice(t,o))}const wu=10,gs=2;function ms(i){return wi(i,[])}function wi(i,t){switch(typeof i){case"string":return JSON.stringify(i);case"function":return i.name?`[function ${i.name}]`:"[function]";case"object":return Eu(i,t);default:return String(i)}}function Eu(i,t){if(i===null)return"null";if(t.includes(i))return"[Circular]";const e=[...t,i];if(Fu(i)){const n=i.toJSON();if(n!==i)return typeof n=="string"?n:wi(n,e)}else if(Array.isArray(i))return Au(i,e);return Cu(i,e)}function Fu(i){return typeof i.toJSON=="function"}function Cu(i,t){const e=Object.entries(i);if(e.length===0)return"{}";if(t.length>gs)return"["+Su(i)+"]";const n=e.map(([o,a])=>o+": "+wi(a,t));return"{ "+n.join(", ")+" }"}function Au(i,t){if(i.length===0)return"[]";if(t.length>gs)return"[Array]";const e=Math.min(wu,i.length),n=i.length-e,o=[];for(let a=0;a<e;++a)o.push(wi(i[a],t));return n===1?o.push("... 1 more item"):n>1&&o.push(`... ${n} more items`),"["+o.join(", ")+"]"}function Su(i){const t=Object.prototype.toString.call(i).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof i.constructor=="function"){const e=i.constructor.name;if(typeof e=="string"&&e!=="")return e}return t}const xu=function(t,e){return t instanceof e};class Zo{constructor(t,e="GraphQL request",n={line:1,column:1}){typeof t=="string"||ei(!1,`Body must be a string. Received: ${ms(t)}.`),this.body=t,this.name=e,this.locationOffset=n,this.locationOffset.line>0||ei(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||ei(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function Ou(i){return xu(i,Zo)}function Iu(i,t){return new Bu(i,t).parseDocument()}class Bu{constructor(t,e={}){const n=Ou(t)?t:new Zo(t);this._lexer=new du(n),this._options=e,this._tokenCounter=0}parseName(){const t=this.expectToken(ot.NAME);return this.node(t,{kind:St.NAME,value:t.value})}parseDocument(){return this.node(this._lexer.token,{kind:St.DOCUMENT,definitions:this.many(ot.SOF,this.parseDefinition,ot.EOF)})}parseDefinition(){if(this.peek(ot.BRACE_L))return this.parseOperationDefinition();const t=this.peekDescription(),e=t?this._lexer.lookahead():this._lexer.token;if(e.kind===ot.NAME){switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(t)throw ne(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(e.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(e)}parseOperationDefinition(){const t=this._lexer.token;if(this.peek(ot.BRACE_L))return this.node(t,{kind:St.OPERATION_DEFINITION,operation:cn.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const e=this.parseOperationType();let n;return this.peek(ot.NAME)&&(n=this.parseName()),this.node(t,{kind:St.OPERATION_DEFINITION,operation:e,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const t=this.expectToken(ot.NAME);switch(t.value){case"query":return cn.QUERY;case"mutation":return cn.MUTATION;case"subscription":return cn.SUBSCRIPTION}throw this.unexpected(t)}parseVariableDefinitions(){return this.optionalMany(ot.PAREN_L,this.parseVariableDefinition,ot.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:St.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(ot.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(ot.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const t=this._lexer.token;return this.expectToken(ot.DOLLAR),this.node(t,{kind:St.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:St.SELECTION_SET,selections:this.many(ot.BRACE_L,this.parseSelection,ot.BRACE_R)})}parseSelection(){return this.peek(ot.SPREAD)?this.parseFragment():this.parseField()}parseField(){const t=this._lexer.token,e=this.parseName();let n,o;return this.expectOptionalToken(ot.COLON)?(n=e,o=this.parseName()):o=e,this.node(t,{kind:St.FIELD,alias:n,name:o,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(ot.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(t){const e=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(ot.PAREN_L,e,ot.PAREN_R)}parseArgument(t=!1){const e=this._lexer.token,n=this.parseName();return this.expectToken(ot.COLON),this.node(e,{kind:St.ARGUMENT,name:n,value:this.parseValueLiteral(t)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const t=this._lexer.token;this.expectToken(ot.SPREAD);const e=this.expectOptionalKeyword("on");return!e&&this.peek(ot.NAME)?this.node(t,{kind:St.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(t,{kind:St.INLINE_FRAGMENT,typeCondition:e?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const t=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(t,{kind:St.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:St.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(t){const e=this._lexer.token;switch(e.kind){case ot.BRACKET_L:return this.parseList(t);case ot.BRACE_L:return this.parseObject(t);case ot.INT:return this.advanceLexer(),this.node(e,{kind:St.INT,value:e.value});case ot.FLOAT:return this.advanceLexer(),this.node(e,{kind:St.FLOAT,value:e.value});case ot.STRING:case ot.BLOCK_STRING:return this.parseStringLiteral();case ot.NAME:switch(this.advanceLexer(),e.value){case"true":return this.node(e,{kind:St.BOOLEAN,value:!0});case"false":return this.node(e,{kind:St.BOOLEAN,value:!1});case"null":return this.node(e,{kind:St.NULL});default:return this.node(e,{kind:St.ENUM,value:e.value})}case ot.DOLLAR:if(t)if(this.expectToken(ot.DOLLAR),this._lexer.token.kind===ot.NAME){const n=this._lexer.token.value;throw ne(this._lexer.source,e.start,`Unexpected variable "$${n}" in constant value.`)}else throw this.unexpected(e);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const t=this._lexer.token;return this.advanceLexer(),this.node(t,{kind:St.STRING,value:t.value,block:t.kind===ot.BLOCK_STRING})}parseList(t){const e=()=>this.parseValueLiteral(t);return this.node(this._lexer.token,{kind:St.LIST,values:this.any(ot.BRACKET_L,e,ot.BRACKET_R)})}parseObject(t){const e=()=>this.parseObjectField(t);return this.node(this._lexer.token,{kind:St.OBJECT,fields:this.any(ot.BRACE_L,e,ot.BRACE_R)})}parseObjectField(t){const e=this._lexer.token,n=this.parseName();return this.expectToken(ot.COLON),this.node(e,{kind:St.OBJECT_FIELD,name:n,value:this.parseValueLiteral(t)})}parseDirectives(t){const e=[];for(;this.peek(ot.AT);)e.push(this.parseDirective(t));return e}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(t){const e=this._lexer.token;return this.expectToken(ot.AT),this.node(e,{kind:St.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t)})}parseTypeReference(){const t=this._lexer.token;let e;if(this.expectOptionalToken(ot.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(ot.BRACKET_R),e=this.node(t,{kind:St.LIST_TYPE,type:n})}else e=this.parseNamedType();return this.expectOptionalToken(ot.BANG)?this.node(t,{kind:St.NON_NULL_TYPE,type:e}):e}parseNamedType(){return this.node(this._lexer.token,{kind:St.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(ot.STRING)||this.peek(ot.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),o=this.many(ot.BRACE_L,this.parseOperationTypeDefinition,ot.BRACE_R);return this.node(t,{kind:St.SCHEMA_DEFINITION,description:e,directives:n,operationTypes:o})}parseOperationTypeDefinition(){const t=this._lexer.token,e=this.parseOperationType();this.expectToken(ot.COLON);const n=this.parseNamedType();return this.node(t,{kind:St.OPERATION_TYPE_DEFINITION,operation:e,type:n})}parseScalarTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),o=this.parseConstDirectives();return this.node(t,{kind:St.SCALAR_TYPE_DEFINITION,description:e,name:n,directives:o})}parseObjectTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),o=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),c=this.parseFieldsDefinition();return this.node(t,{kind:St.OBJECT_TYPE_DEFINITION,description:e,name:n,interfaces:o,directives:a,fields:c})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(ot.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(ot.BRACE_L,this.parseFieldDefinition,ot.BRACE_R)}parseFieldDefinition(){const t=this._lexer.token,e=this.parseDescription(),n=this.parseName(),o=this.parseArgumentDefs();this.expectToken(ot.COLON);const a=this.parseTypeReference(),c=this.parseConstDirectives();return this.node(t,{kind:St.FIELD_DEFINITION,description:e,name:n,arguments:o,type:a,directives:c})}parseArgumentDefs(){return this.optionalMany(ot.PAREN_L,this.parseInputValueDef,ot.PAREN_R)}parseInputValueDef(){const t=this._lexer.token,e=this.parseDescription(),n=this.parseName();this.expectToken(ot.COLON);const o=this.parseTypeReference();let a;this.expectOptionalToken(ot.EQUALS)&&(a=this.parseConstValueLiteral());const c=this.parseConstDirectives();return this.node(t,{kind:St.INPUT_VALUE_DEFINITION,description:e,name:n,type:o,defaultValue:a,directives:c})}parseInterfaceTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),o=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),c=this.parseFieldsDefinition();return this.node(t,{kind:St.INTERFACE_TYPE_DEFINITION,description:e,name:n,interfaces:o,directives:a,fields:c})}parseUnionTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),o=this.parseConstDirectives(),a=this.parseUnionMemberTypes();return this.node(t,{kind:St.UNION_TYPE_DEFINITION,description:e,name:n,directives:o,types:a})}parseUnionMemberTypes(){return this.expectOptionalToken(ot.EQUALS)?this.delimitedMany(ot.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),o=this.parseConstDirectives(),a=this.parseEnumValuesDefinition();return this.node(t,{kind:St.ENUM_TYPE_DEFINITION,description:e,name:n,directives:o,values:a})}parseEnumValuesDefinition(){return this.optionalMany(ot.BRACE_L,this.parseEnumValueDefinition,ot.BRACE_R)}parseEnumValueDefinition(){const t=this._lexer.token,e=this.parseDescription(),n=this.parseEnumValueName(),o=this.parseConstDirectives();return this.node(t,{kind:St.ENUM_VALUE_DEFINITION,description:e,name:n,directives:o})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw ne(this._lexer.source,this._lexer.token.start,`${Jn(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),o=this.parseConstDirectives(),a=this.parseInputFieldsDefinition();return this.node(t,{kind:St.INPUT_OBJECT_TYPE_DEFINITION,description:e,name:n,directives:o,fields:a})}parseInputFieldsDefinition(){return this.optionalMany(ot.BRACE_L,this.parseInputValueDef,ot.BRACE_R)}parseTypeSystemExtension(){const t=this._lexer.lookahead();if(t.kind===ot.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)}parseSchemaExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const e=this.parseConstDirectives(),n=this.optionalMany(ot.BRACE_L,this.parseOperationTypeDefinition,ot.BRACE_R);if(e.length===0&&n.length===0)throw this.unexpected();return this.node(t,{kind:St.SCHEMA_EXTENSION,directives:e,operationTypes:n})}parseScalarTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const e=this.parseName(),n=this.parseConstDirectives();if(n.length===0)throw this.unexpected();return this.node(t,{kind:St.SCALAR_TYPE_EXTENSION,name:e,directives:n})}parseObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const e=this.parseName(),n=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),a=this.parseFieldsDefinition();if(n.length===0&&o.length===0&&a.length===0)throw this.unexpected();return this.node(t,{kind:St.OBJECT_TYPE_EXTENSION,name:e,interfaces:n,directives:o,fields:a})}parseInterfaceTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const e=this.parseName(),n=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),a=this.parseFieldsDefinition();if(n.length===0&&o.length===0&&a.length===0)throw this.unexpected();return this.node(t,{kind:St.INTERFACE_TYPE_EXTENSION,name:e,interfaces:n,directives:o,fields:a})}parseUnionTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const e=this.parseName(),n=this.parseConstDirectives(),o=this.parseUnionMemberTypes();if(n.length===0&&o.length===0)throw this.unexpected();return this.node(t,{kind:St.UNION_TYPE_EXTENSION,name:e,directives:n,types:o})}parseEnumTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const e=this.parseName(),n=this.parseConstDirectives(),o=this.parseEnumValuesDefinition();if(n.length===0&&o.length===0)throw this.unexpected();return this.node(t,{kind:St.ENUM_TYPE_EXTENSION,name:e,directives:n,values:o})}parseInputObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const e=this.parseName(),n=this.parseConstDirectives(),o=this.parseInputFieldsDefinition();if(n.length===0&&o.length===0)throw this.unexpected();return this.node(t,{kind:St.INPUT_OBJECT_TYPE_EXTENSION,name:e,directives:n,fields:o})}parseDirectiveDefinition(){const t=this._lexer.token,e=this.parseDescription();this.expectKeyword("directive"),this.expectToken(ot.AT);const n=this.parseName(),o=this.parseArgumentDefs(),a=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const c=this.parseDirectiveLocations();return this.node(t,{kind:St.DIRECTIVE_DEFINITION,description:e,name:n,arguments:o,repeatable:a,locations:c})}parseDirectiveLocations(){return this.delimitedMany(ot.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const t=this._lexer.token,e=this.parseName();if(Object.prototype.hasOwnProperty.call(fo,e.value))return e;throw this.unexpected(t)}node(t,e){return this._options.noLocation!==!0&&(e.loc=new au(t,this._lexer.lastToken,this._lexer.source)),e}peek(t){return this._lexer.token.kind===t}expectToken(t){const e=this._lexer.token;if(e.kind===t)return this.advanceLexer(),e;throw ne(this._lexer.source,e.start,`Expected ${ys(t)}, found ${Jn(e)}.`)}expectOptionalToken(t){return this._lexer.token.kind===t?(this.advanceLexer(),!0):!1}expectKeyword(t){const e=this._lexer.token;if(e.kind===ot.NAME&&e.value===t)this.advanceLexer();else throw ne(this._lexer.source,e.start,`Expected "${t}", found ${Jn(e)}.`)}expectOptionalKeyword(t){const e=this._lexer.token;return e.kind===ot.NAME&&e.value===t?(this.advanceLexer(),!0):!1}unexpected(t){const e=t??this._lexer.token;return ne(this._lexer.source,e.start,`Unexpected ${Jn(e)}.`)}any(t,e,n){this.expectToken(t);const o=[];for(;!this.expectOptionalToken(n);)o.push(e.call(this));return o}optionalMany(t,e,n){if(this.expectOptionalToken(t)){const o=[];do o.push(e.call(this));while(!this.expectOptionalToken(n));return o}return[]}many(t,e,n){this.expectToken(t);const o=[];do o.push(e.call(this));while(!this.expectOptionalToken(n));return o}delimitedMany(t,e){this.expectOptionalToken(t);const n=[];do n.push(e.call(this));while(this.expectOptionalToken(t));return n}advanceLexer(){const{maxTokens:t}=this._options,e=this._lexer.advance();if(t!==void 0&&e.kind!==ot.EOF&&(++this._tokenCounter,this._tokenCounter>t))throw ne(this._lexer.source,e.start,`Document contains more that ${t} tokens. Parsing aborted.`)}}function Jn(i){const t=i.value;return ys(i.kind)+(t!=null?` "${t}"`:"")}function ys(i){return fu(i)?`"${i}"`:i}function Pu(i){return`"${i.replace(Tu,Mu)}"`}const Tu=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function Mu(i){return qu[i.charCodeAt(0)]}const qu=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],Jo=Object.freeze({});function Oe(i,t,e=ds){const n=new Map;for(const T of Object.values(St))n.set(T,ku(t,T));let o,a=Array.isArray(i),c=[i],l=-1,d=[],s=i,r,g;const L=[],m=[];do{l++;const T=l===c.length,F=T&&d.length!==0;if(T){if(r=m.length===0?void 0:L[L.length-1],s=g,g=m.pop(),F)if(a){s=s.slice();let q=0;for(const[Z,E]of d){const f=Z-q;E===null?(s.splice(f,1),q++):s[f]=E}}else{s=Object.defineProperties({},Object.getOwnPropertyDescriptors(s));for(const[q,Z]of d)s[q]=Z}l=o.index,c=o.keys,d=o.edits,a=o.inArray,o=o.prev}else if(g){if(r=a?l:c[l],s=g[r],s==null)continue;L.push(r)}let R;if(!Array.isArray(s)){var C,A;Qa(s)||ei(!1,`Invalid AST Node: ${ms(s)}.`);const q=T?(C=n.get(s.kind))===null||C===void 0?void 0:C.leave:(A=n.get(s.kind))===null||A===void 0?void 0:A.enter;if(R=q?.call(t,s,r,g,L,m),R===Jo)break;if(R===!1){if(!T){L.pop();continue}}else if(R!==void 0&&(d.push([r,R]),!T))if(Qa(R))s=R;else{L.pop();continue}}if(R===void 0&&F&&d.push([r,s]),T)L.pop();else{var w;o={inArray:a,index:l,keys:c,edits:d,prev:o},a=Array.isArray(s),c=a?s:(w=e[s.kind])!==null&&w!==void 0?w:[],l=-1,d=[],g&&m.push(g),g=s}}while(o!==void 0);return d.length!==0?d[d.length-1][1]:i}function ku(i,t){const e=i[t];return typeof e=="object"?e:typeof e=="function"?{enter:e,leave:void 0}:{enter:i.enter,leave:i.leave}}function Ru(i){return Oe(i,Du)}const Nu=80,Du={Name:{leave:i=>i.value},Variable:{leave:i=>"$"+i.name},Document:{leave:i=>Lt(i.definitions,`

`)},OperationDefinition:{leave(i){const t=Nt("(",Lt(i.variableDefinitions,", "),")"),e=Lt([i.operation,Lt([i.name,t]),Lt(i.directives," ")]," ");return(e==="query"?"":e+" ")+i.selectionSet}},VariableDefinition:{leave:({variable:i,type:t,defaultValue:e,directives:n})=>i+": "+t+Nt(" = ",e)+Nt(" ",Lt(n," "))},SelectionSet:{leave:({selections:i})=>Le(i)},Field:{leave({alias:i,name:t,arguments:e,directives:n,selectionSet:o}){const a=Nt("",i,": ")+t;let c=a+Nt("(",Lt(e,", "),")");return c.length>Nu&&(c=a+Nt(`(
`,ni(Lt(e,`
`)),`
)`)),Lt([c,Lt(n," "),o]," ")}},Argument:{leave:({name:i,value:t})=>i+": "+t},FragmentSpread:{leave:({name:i,directives:t})=>"..."+i+Nt(" ",Lt(t," "))},InlineFragment:{leave:({typeCondition:i,directives:t,selectionSet:e})=>Lt(["...",Nt("on ",i),Lt(t," "),e]," ")},FragmentDefinition:{leave:({name:i,typeCondition:t,variableDefinitions:e,directives:n,selectionSet:o})=>`fragment ${i}${Nt("(",Lt(e,", "),")")} on ${t} ${Nt("",Lt(n," ")," ")}`+o},IntValue:{leave:({value:i})=>i},FloatValue:{leave:({value:i})=>i},StringValue:{leave:({value:i,block:t})=>t?uu(i):Pu(i)},BooleanValue:{leave:({value:i})=>i?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:i})=>i},ListValue:{leave:({values:i})=>"["+Lt(i,", ")+"]"},ObjectValue:{leave:({fields:i})=>"{"+Lt(i,", ")+"}"},ObjectField:{leave:({name:i,value:t})=>i+": "+t},Directive:{leave:({name:i,arguments:t})=>"@"+i+Nt("(",Lt(t,", "),")")},NamedType:{leave:({name:i})=>i},ListType:{leave:({type:i})=>"["+i+"]"},NonNullType:{leave:({type:i})=>i+"!"},SchemaDefinition:{leave:({description:i,directives:t,operationTypes:e})=>Nt("",i,`
`)+Lt(["schema",Lt(t," "),Le(e)]," ")},OperationTypeDefinition:{leave:({operation:i,type:t})=>i+": "+t},ScalarTypeDefinition:{leave:({description:i,name:t,directives:e})=>Nt("",i,`
`)+Lt(["scalar",t,Lt(e," ")]," ")},ObjectTypeDefinition:{leave:({description:i,name:t,interfaces:e,directives:n,fields:o})=>Nt("",i,`
`)+Lt(["type",t,Nt("implements ",Lt(e," & ")),Lt(n," "),Le(o)]," ")},FieldDefinition:{leave:({description:i,name:t,arguments:e,type:n,directives:o})=>Nt("",i,`
`)+t+(Wa(e)?Nt(`(
`,ni(Lt(e,`
`)),`
)`):Nt("(",Lt(e,", "),")"))+": "+n+Nt(" ",Lt(o," "))},InputValueDefinition:{leave:({description:i,name:t,type:e,defaultValue:n,directives:o})=>Nt("",i,`
`)+Lt([t+": "+e,Nt("= ",n),Lt(o," ")]," ")},InterfaceTypeDefinition:{leave:({description:i,name:t,interfaces:e,directives:n,fields:o})=>Nt("",i,`
`)+Lt(["interface",t,Nt("implements ",Lt(e," & ")),Lt(n," "),Le(o)]," ")},UnionTypeDefinition:{leave:({description:i,name:t,directives:e,types:n})=>Nt("",i,`
`)+Lt(["union",t,Lt(e," "),Nt("= ",Lt(n," | "))]," ")},EnumTypeDefinition:{leave:({description:i,name:t,directives:e,values:n})=>Nt("",i,`
`)+Lt(["enum",t,Lt(e," "),Le(n)]," ")},EnumValueDefinition:{leave:({description:i,name:t,directives:e})=>Nt("",i,`
`)+Lt([t,Lt(e," ")]," ")},InputObjectTypeDefinition:{leave:({description:i,name:t,directives:e,fields:n})=>Nt("",i,`
`)+Lt(["input",t,Lt(e," "),Le(n)]," ")},DirectiveDefinition:{leave:({description:i,name:t,arguments:e,repeatable:n,locations:o})=>Nt("",i,`
`)+"directive @"+t+(Wa(e)?Nt(`(
`,ni(Lt(e,`
`)),`
)`):Nt("(",Lt(e,", "),")"))+(n?" repeatable":"")+" on "+Lt(o," | ")},SchemaExtension:{leave:({directives:i,operationTypes:t})=>Lt(["extend schema",Lt(i," "),Le(t)]," ")},ScalarTypeExtension:{leave:({name:i,directives:t})=>Lt(["extend scalar",i,Lt(t," ")]," ")},ObjectTypeExtension:{leave:({name:i,interfaces:t,directives:e,fields:n})=>Lt(["extend type",i,Nt("implements ",Lt(t," & ")),Lt(e," "),Le(n)]," ")},InterfaceTypeExtension:{leave:({name:i,interfaces:t,directives:e,fields:n})=>Lt(["extend interface",i,Nt("implements ",Lt(t," & ")),Lt(e," "),Le(n)]," ")},UnionTypeExtension:{leave:({name:i,directives:t,types:e})=>Lt(["extend union",i,Lt(t," "),Nt("= ",Lt(e," | "))]," ")},EnumTypeExtension:{leave:({name:i,directives:t,values:e})=>Lt(["extend enum",i,Lt(t," "),Le(e)]," ")},InputObjectTypeExtension:{leave:({name:i,directives:t,fields:e})=>Lt(["extend input",i,Lt(t," "),Le(e)]," ")}};function Lt(i,t=""){var e;return(e=i?.filter(n=>n).join(t))!==null&&e!==void 0?e:""}function Le(i){return Nt(`{
`,ni(Lt(i,`
`)),`
}`)}function Nt(i,t,e=""){return t!=null&&t!==""?i+t+e:""}function ni(i){return Nt("  ",i.replace(/\n/g,`
  `))}function Wa(i){var t;return(t=i?.some(e=>e.includes(`
`)))!==null&&t!==void 0?t:!1}function zu(){return Ua()}function ju(){__DEV__?ht(typeof Ni=="boolean",Ni):ht(typeof Ni=="boolean",38)}zu();ju();function Ei(i,t){var e=i.directives;return!e||!e.length?!0:Vu(e).every(function(n){var o=n.directive,a=n.ifArgument,c=!1;return a.value.kind==="Variable"?(c=t&&t[a.value.name.value],__DEV__?ht(c!==void 0,"Invalid variable referenced in @".concat(o.name.value," directive.")):ht(c!==void 0,39)):c=a.value.value,o.name.value==="skip"?!c:c})}function Ho(i,t,e){var n=new Set(i),o=n.size;return Oe(t,{Directive:function(a){if(n.delete(a.name.value)&&(!e||!n.size))return Jo}}),e?!n.size:n.size<o}function Uu(i){return i&&Ho(["client","export"],i,!0)}function $u(i){var t=i.name.value;return t==="skip"||t==="include"}function Vu(i){var t=[];return i&&i.length&&i.forEach(function(e){if(!!$u(e)){var n=e.arguments,o=e.name.value;__DEV__?ht(n&&n.length===1,"Incorrect number of arguments for the @".concat(o," directive.")):ht(n&&n.length===1,40);var a=n[0];__DEV__?ht(a.name&&a.name.value==="if","Invalid argument for the @".concat(o," directive.")):ht(a.name&&a.name.value==="if",41);var c=a.value;__DEV__?ht(c&&(c.kind==="Variable"||c.kind==="BooleanValue"),"Argument for the @".concat(o," directive must be a variable or a boolean value.")):ht(c&&(c.kind==="Variable"||c.kind==="BooleanValue"),42),t.push({directive:e,ifArgument:a})}}),t}function Qu(i,t){var e=t,n=[];i.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw __DEV__?new Dt("Found a ".concat(a.operation," operation").concat(a.name?" named '".concat(a.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new Dt(43);a.kind==="FragmentDefinition"&&n.push(a)}),typeof e>"u"&&(__DEV__?ht(n.length===1,"Found ".concat(n.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):ht(n.length===1,44),e=n[0].name.value);var o=G(G({},i),{definitions:li([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:e}}]}}],i.definitions,!0)});return o}function Xo(i){i===void 0&&(i=[]);var t={};return i.forEach(function(e){t[e.name.value]=e}),t}function Yo(i,t){switch(i.kind){case"InlineFragment":return i;case"FragmentSpread":{var e=i.name.value;if(typeof t=="function")return t(e);var n=t&&t[e];return __DEV__?ht(n,"No fragment named ".concat(e)):ht(n,45),n||null}default:return null}}function Zt(i){return i!==null&&typeof i=="object"}function dn(i){return{__ref:String(i)}}function jt(i){return Boolean(i&&typeof i=="object"&&typeof i.__ref=="string")}function Gu(i){return Zt(i)&&i.kind==="Document"&&Array.isArray(i.definitions)}function Wu(i){return i.kind==="StringValue"}function Zu(i){return i.kind==="BooleanValue"}function Ju(i){return i.kind==="IntValue"}function Hu(i){return i.kind==="FloatValue"}function Xu(i){return i.kind==="Variable"}function Yu(i){return i.kind==="ObjectValue"}function Ku(i){return i.kind==="ListValue"}function td(i){return i.kind==="EnumValue"}function ed(i){return i.kind==="NullValue"}function _n(i,t,e,n){if(Ju(e)||Hu(e))i[t.value]=Number(e.value);else if(Zu(e)||Wu(e))i[t.value]=e.value;else if(Yu(e)){var o={};e.fields.map(function(c){return _n(o,c.name,c.value,n)}),i[t.value]=o}else if(Xu(e)){var a=(n||{})[e.name.value];i[t.value]=a}else if(Ku(e))i[t.value]=e.values.map(function(c){var l={};return _n(l,t,c,n),l[t.value]});else if(td(e))i[t.value]=e.value;else if(ed(e))i[t.value]=null;else throw __DEV__?new Dt('The inline argument "'.concat(t.value,'" of kind "').concat(e.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new Dt(54)}function nd(i,t){var e=null;i.directives&&(e={},i.directives.forEach(function(o){e[o.name.value]={},o.arguments&&o.arguments.forEach(function(a){var c=a.name,l=a.value;return _n(e[o.name.value],c,l,t)})}));var n=null;return i.arguments&&i.arguments.length&&(n={},i.arguments.forEach(function(o){var a=o.name,c=o.value;return _n(n,a,c,t)})),Ko(i.name.value,n,e)}var id=["connection","include","skip","client","rest","export"],Ko=Object.assign(function(i,t,e){if(t&&e&&e.connection&&e.connection.key)if(e.connection.filter&&e.connection.filter.length>0){var n=e.connection.filter?e.connection.filter:[];n.sort();var o={};return n.forEach(function(l){o[l]=t[l]}),"".concat(e.connection.key,"(").concat(wn(o),")")}else return e.connection.key;var a=i;if(t){var c=wn(t);a+="(".concat(c,")")}return e&&Object.keys(e).forEach(function(l){id.indexOf(l)===-1&&(e[l]&&Object.keys(e[l]).length?a+="@".concat(l,"(").concat(wn(e[l]),")"):a+="@".concat(l))}),a},{setStringify:function(i){var t=wn;return wn=i,t}}),wn=function(t){return JSON.stringify(t,od)};function od(i,t){return Zt(t)&&!Array.isArray(t)&&(t=Object.keys(t).sort().reduce(function(e,n){return e[n]=t[n],e},{})),t}function Fi(i,t){if(i.arguments&&i.arguments.length){var e={};return i.arguments.forEach(function(n){var o=n.name,a=n.value;return _n(e,o,a,t)}),e}return null}function Xe(i){return i.alias?i.alias.value:i.name.value}function _o(i,t,e){if(typeof i.__typename=="string")return i.__typename;for(var n=0,o=t.selections;n<o.length;n++){var a=o[n];if(Te(a)){if(a.name.value==="__typename")return i[Xe(a)]}else{var c=_o(i,Yo(a,e).selectionSet,e);if(typeof c=="string")return c}}}function Te(i){return i.kind==="Field"}function Ls(i){return i.kind==="InlineFragment"}function Ci(i){__DEV__?ht(i&&i.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):ht(i&&i.kind==="Document",46);var t=i.definitions.filter(function(e){return e.kind!=="FragmentDefinition"}).map(function(e){if(e.kind!=="OperationDefinition")throw __DEV__?new Dt('Schema type definitions not allowed in queries. Found: "'.concat(e.kind,'"')):new Dt(47);return e});return __DEV__?ht(t.length<=1,"Ambiguous GraphQL document: contains ".concat(t.length," operations")):ht(t.length<=1,48),i}function $n(i){return Ci(i),i.definitions.filter(function(t){return t.kind==="OperationDefinition"})[0]}function po(i){return i.definitions.filter(function(t){return t.kind==="OperationDefinition"&&t.name}).map(function(t){return t.name.value})[0]||null}function ta(i){return i.definitions.filter(function(t){return t.kind==="FragmentDefinition"})}function bs(i){var t=$n(i);return __DEV__?ht(t&&t.operation==="query","Must contain a query definition."):ht(t&&t.operation==="query",49),t}function ad(i){__DEV__?ht(i.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):ht(i.kind==="Document",50),__DEV__?ht(i.definitions.length<=1,"Fragment must have exactly one definition."):ht(i.definitions.length<=1,51);var t=i.definitions[0];return __DEV__?ht(t.kind==="FragmentDefinition","Must be a fragment definition."):ht(t.kind==="FragmentDefinition",52),t}function ea(i){Ci(i);for(var t,e=0,n=i.definitions;e<n.length;e++){var o=n[e];if(o.kind==="OperationDefinition"){var a=o.operation;if(a==="query"||a==="mutation"||a==="subscription")return o}o.kind==="FragmentDefinition"&&!t&&(t=o)}if(t)return t;throw __DEV__?new Dt("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new Dt(53)}function na(i){var t=Object.create(null),e=i&&i.variableDefinitions;return e&&e.length&&e.forEach(function(n){n.defaultValue&&_n(t,n.variable.name,n.defaultValue)}),t}function Za(i,t,e){var n=0;return i.forEach(function(o,a){t.call(this,o,a,i)&&(i[n++]=o)},e),i.length=n,i}var Ja={kind:"Field",name:{kind:"Name",value:"__typename"}};function vs(i,t){return!i||i.selectionSet.selections.every(function(e){return e.kind==="FragmentSpread"&&vs(t[e.name.value],t)})}function ia(i){return vs($n(i)||ad(i),Xo(ta(i)))?null:i}function Ha(i){return function(e){return i.some(function(n){return n.name&&n.name===e.name.value||n.test&&n.test(e)})}}function ws(i,t){var e=Object.create(null),n=[],o=Object.create(null),a=[],c=ia(Oe(t,{Variable:{enter:function(l,d,s){s.kind!=="VariableDefinition"&&(e[l.name.value]=!0)}},Field:{enter:function(l){if(i&&l.directives){var d=i.some(function(s){return s.remove});if(d&&l.directives&&l.directives.some(Ha(i)))return l.arguments&&l.arguments.forEach(function(s){s.value.kind==="Variable"&&n.push({name:s.value.name.value})}),l.selectionSet&&Es(l.selectionSet).forEach(function(s){a.push({name:s.name.value})}),null}}},FragmentSpread:{enter:function(l){o[l.name.value]=!0}},Directive:{enter:function(l){if(Ha(i)(l))return null}}}));return c&&Za(n,function(l){return!!l.name&&!e[l.name]}).length&&(c=ld(n,c)),c&&Za(a,function(l){return!!l.name&&!o[l.name]}).length&&(c=ud(a,c)),c}var oa=Object.assign(function(i){return Oe(i,{SelectionSet:{enter:function(t,e,n){if(!(n&&n.kind==="OperationDefinition")){var o=t.selections;if(!!o){var a=o.some(function(l){return Te(l)&&(l.name.value==="__typename"||l.name.value.lastIndexOf("__",0)===0)});if(!a){var c=n;if(!(Te(c)&&c.directives&&c.directives.some(function(l){return l.name.value==="export"})))return G(G({},t),{selections:li(li([],o,!0),[Ja],!1)})}}}}}})},{added:function(i){return i===Ja}}),rd={test:function(i){var t=i.name.value==="connection";return t&&(!i.arguments||!i.arguments.some(function(e){return e.name.value==="key"}))&&__DEV__&&ht.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),t}};function sd(i){return ws([rd],Ci(i))}function cd(i){return function(e){return i.some(function(n){return e.value&&e.value.kind==="Variable"&&e.value.name&&(n.name===e.value.name.value||n.test&&n.test(e))})}}function ld(i,t){var e=cd(i);return ia(Oe(t,{OperationDefinition:{enter:function(n){return G(G({},n),{variableDefinitions:n.variableDefinitions?n.variableDefinitions.filter(function(o){return!i.some(function(a){return a.name===o.variable.name.value})}):[]})}},Field:{enter:function(n){var o=i.some(function(c){return c.remove});if(o){var a=0;if(n.arguments&&n.arguments.forEach(function(c){e(c)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(n){if(e(n))return null}}}))}function ud(i,t){function e(n){if(i.some(function(o){return o.name===n.name.value}))return null}return ia(Oe(t,{FragmentSpread:{enter:e},FragmentDefinition:{enter:e}}))}function Es(i){var t=[];return i.selections.forEach(function(e){(Te(e)||Ls(e))&&e.selectionSet?Es(e.selectionSet).forEach(function(n){return t.push(n)}):e.kind==="FragmentSpread"&&t.push(e)}),t}function dd(i){var t=ea(i),e=t.operation;if(e==="query")return i;var n=Oe(i,{OperationDefinition:{enter:function(o){return G(G({},o),{operation:"query"})}}});return n}function fd(i){Ci(i);var t=ws([{test:function(e){return e.name.value==="client"},remove:!0}],i);return t&&(t=Oe(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet){var n=e.selectionSet.selections.every(function(o){return Te(o)&&o.name.value==="__typename"});if(n)return null}}}})),t}var hd=Object.prototype.hasOwnProperty;function Xa(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return aa(i)}function aa(i){var t=i[0]||{},e=i.length;if(e>1)for(var n=new Ye,o=1;o<e;++o)t=n.merge(t,i[o]);return t}var _d=function(i,t,e){return this.merge(i[e],t[e])},Ye=function(){function i(t){t===void 0&&(t=_d),this.reconciler=t,this.isObject=Zt,this.pastCopies=new Set}return i.prototype.merge=function(t,e){for(var n=this,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return Zt(e)&&Zt(t)?(Object.keys(e).forEach(function(c){if(hd.call(t,c)){var l=t[c];if(e[c]!==l){var d=n.reconciler.apply(n,li([t,e,c],o,!1));d!==l&&(t=n.shallowCopyForMerge(t),t[c]=d)}}else t=n.shallowCopyForMerge(t),t[c]=e[c]}),t):e},i.prototype.shallowCopyForMerge=function(t){return Zt(t)&&(this.pastCopies.has(t)||(Array.isArray(t)?t=t.slice(0):t=G({__proto__:Object.getPrototypeOf(t)},t),this.pastCopies.add(t))),t},i}();function pd(i,t){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(e)return(e=e.call(i)).next.bind(e);if(Array.isArray(i)||(e=gd(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var n=0;return function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gd(i,t){if(!!i){if(typeof i=="string")return Ya(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ya(i,t)}}function Ya(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=i[e];return n}function Ka(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function ra(i,t,e){return t&&Ka(i.prototype,t),e&&Ka(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}var sa=function(){return typeof Symbol=="function"},ca=function(i){return sa()&&Boolean(Symbol[i])},la=function(i){return ca(i)?Symbol[i]:"@@"+i};sa()&&!ca("observable")&&(Symbol.observable=Symbol("observable"));var md=la("iterator"),go=la("observable"),Fs=la("species");function ui(i,t){var e=i[t];if(e!=null){if(typeof e!="function")throw new TypeError(e+" is not a function");return e}}function En(i){var t=i.constructor;return t!==void 0&&(t=t[Fs],t===null&&(t=void 0)),t!==void 0?t:Gt}function yd(i){return i instanceof Gt}function pn(i){pn.log?pn.log(i):setTimeout(function(){throw i})}function ii(i){Promise.resolve().then(function(){try{i()}catch(t){pn(t)}})}function Cs(i){var t=i._cleanup;if(t!==void 0&&(i._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var e=ui(t,"unsubscribe");e&&e.call(t)}}catch(n){pn(n)}}function mo(i){i._observer=void 0,i._queue=void 0,i._state="closed"}function Ld(i){var t=i._queue;if(!!t){i._queue=void 0,i._state="ready";for(var e=0;e<t.length&&(As(i,t[e].type,t[e].value),i._state!=="closed");++e);}}function As(i,t,e){i._state="running";var n=i._observer;try{var o=ui(n,t);switch(t){case"next":o&&o.call(n,e);break;case"error":if(mo(i),o)o.call(n,e);else throw e;break;case"complete":mo(i),o&&o.call(n);break}}catch(a){pn(a)}i._state==="closed"?Cs(i):i._state==="running"&&(i._state="ready")}function zi(i,t,e){if(i._state!=="closed"){if(i._state==="buffering"){i._queue.push({type:t,value:e});return}if(i._state!=="ready"){i._state="buffering",i._queue=[{type:t,value:e}],ii(function(){return Ld(i)});return}As(i,t,e)}}var bd=function(){function i(e,n){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var o=new vd(this);try{this._cleanup=n.call(void 0,o)}catch(a){o.error(a)}this._state==="initializing"&&(this._state="ready")}var t=i.prototype;return t.unsubscribe=function(){this._state!=="closed"&&(mo(this),Cs(this))},ra(i,[{key:"closed",get:function(){return this._state==="closed"}}]),i}(),vd=function(){function i(e){this._subscription=e}var t=i.prototype;return t.next=function(n){zi(this._subscription,"next",n)},t.error=function(n){zi(this._subscription,"error",n)},t.complete=function(){zi(this._subscription,"complete")},ra(i,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),i}(),Gt=function(){function i(e){if(!(this instanceof i))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}var t=i.prototype;return t.subscribe=function(n){return(typeof n!="object"||n===null)&&(n={next:n,error:arguments[1],complete:arguments[2]}),new bd(n,this._subscriber)},t.forEach=function(n){var o=this;return new Promise(function(a,c){if(typeof n!="function"){c(new TypeError(n+" is not a function"));return}function l(){d.unsubscribe(),a()}var d=o.subscribe({next:function(s){try{n(s,l)}catch(r){c(r),d.unsubscribe()}},error:c,complete:a})})},t.map=function(n){var o=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=En(this);return new a(function(c){return o.subscribe({next:function(l){try{l=n(l)}catch(d){return c.error(d)}c.next(l)},error:function(l){c.error(l)},complete:function(){c.complete()}})})},t.filter=function(n){var o=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=En(this);return new a(function(c){return o.subscribe({next:function(l){try{if(!n(l))return}catch(d){return c.error(d)}c.next(l)},error:function(l){c.error(l)},complete:function(){c.complete()}})})},t.reduce=function(n){var o=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=En(this),c=arguments.length>1,l=!1,d=arguments[1],s=d;return new a(function(r){return o.subscribe({next:function(g){var L=!l;if(l=!0,!L||c)try{s=n(s,g)}catch(m){return r.error(m)}else s=g},error:function(g){r.error(g)},complete:function(){if(!l&&!c)return r.error(new TypeError("Cannot reduce an empty sequence"));r.next(s),r.complete()}})})},t.concat=function(){for(var n=this,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];var l=En(this);return new l(function(d){var s,r=0;function g(L){s=L.subscribe({next:function(m){d.next(m)},error:function(m){d.error(m)},complete:function(){r===a.length?(s=void 0,d.complete()):g(l.from(a[r++]))}})}return g(n),function(){s&&(s.unsubscribe(),s=void 0)}})},t.flatMap=function(n){var o=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=En(this);return new a(function(c){var l=[],d=o.subscribe({next:function(r){if(n)try{r=n(r)}catch(L){return c.error(L)}var g=a.from(r).subscribe({next:function(L){c.next(L)},error:function(L){c.error(L)},complete:function(){var L=l.indexOf(g);L>=0&&l.splice(L,1),s()}});l.push(g)},error:function(r){c.error(r)},complete:function(){s()}});function s(){d.closed&&l.length===0&&c.complete()}return function(){l.forEach(function(r){return r.unsubscribe()}),d.unsubscribe()}})},t[go]=function(){return this},i.from=function(n){var o=typeof this=="function"?this:i;if(n==null)throw new TypeError(n+" is not an object");var a=ui(n,go);if(a){var c=a.call(n);if(Object(c)!==c)throw new TypeError(c+" is not an object");return yd(c)&&c.constructor===o?c:new o(function(l){return c.subscribe(l)})}if(ca("iterator")&&(a=ui(n,md),a))return new o(function(l){ii(function(){if(!l.closed){for(var d=pd(a.call(n)),s;!(s=d()).done;){var r=s.value;if(l.next(r),l.closed)return}l.complete()}})});if(Array.isArray(n))return new o(function(l){ii(function(){if(!l.closed){for(var d=0;d<n.length;++d)if(l.next(n[d]),l.closed)return;l.complete()}})});throw new TypeError(n+" is not observable")},i.of=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var c=typeof this=="function"?this:i;return new c(function(l){ii(function(){if(!l.closed){for(var d=0;d<o.length;++d)if(l.next(o[d]),l.closed)return;l.complete()}})})},ra(i,null,[{key:Fs,get:function(){return this}}]),i}();sa()&&Object.defineProperty(Gt,Symbol("extensions"),{value:{symbol:go,hostReportError:pn},configurable:!0});function wd(i){var t,e=i.Symbol;if(typeof e=="function")if(e.observable)t=e.observable;else{typeof e.for=="function"?t=e.for("https://github.com/benlesh/symbol-observable"):t=e("https://github.com/benlesh/symbol-observable");try{e.observable=t}catch{}}else t="@@observable";return t}var sn;typeof self<"u"?sn=self:typeof window<"u"?sn=window:typeof global<"u"?sn=global:typeof module<"u"?sn=module:sn=Function("return this")();wd(sn);var tr=Gt.prototype,er="@@observable";tr[er]||(tr[er]=function(){return this});var Ed=Object.prototype.toString;function ua(i){return yo(i)}function yo(i,t){switch(Ed.call(i)){case"[object Array]":{if(t=t||new Map,t.has(i))return t.get(i);var e=i.slice(0);return t.set(i,e),e.forEach(function(o,a){e[a]=yo(o,t)}),e}case"[object Object]":{if(t=t||new Map,t.has(i))return t.get(i);var n=Object.create(Object.getPrototypeOf(i));return t.set(i,n),Object.keys(i).forEach(function(o){n[o]=yo(i[o],t)}),n}default:return i}}function Fd(i){var t=new Set([i]);return t.forEach(function(e){Zt(e)&&Cd(e)===e&&Object.getOwnPropertyNames(e).forEach(function(n){Zt(e[n])&&t.add(e[n])})}),i}function Cd(i){if(__DEV__&&!Object.isFrozen(i))try{Object.freeze(i)}catch(t){if(t instanceof TypeError)return null;throw t}return i}function Lo(i){return __DEV__&&Fd(i),i}function Mn(i,t,e){var n=[];i.forEach(function(o){return o[t]&&n.push(o)}),n.forEach(function(o){return o[t](e)})}function ji(i,t,e){return new Gt(function(n){var o=n.next,a=n.error,c=n.complete,l=0,d=!1,s={then:function(m){return new Promise(function(C){return C(m())})}};function r(m,C){return m?function(A){++l;var w=function(){return m(A)};s=s.then(w,w).then(function(T){--l,o&&o.call(n,T),d&&g.complete()},function(T){throw--l,T}).catch(function(T){a&&a.call(n,T)})}:function(A){return C&&C.call(n,A)}}var g={next:r(t,o),error:r(e,a),complete:function(){d=!0,l||c&&c.call(n)}},L=i.subscribe(g);return function(){return L.unsubscribe()}})}var tn=typeof WeakMap=="function"&&ge(function(){return navigator.product})!=="ReactNative",Ad=typeof WeakSet=="function",Ss=typeof Symbol=="function"&&typeof Symbol.for=="function",Ai=Ss&&Symbol.asyncIterator;ge(function(){return window.document.createElement});ge(function(){return navigator.userAgent.indexOf("jsdom")>=0});function xs(i){function t(e){Object.defineProperty(i,e,{value:Gt})}return Ss&&Symbol.species&&t(Symbol.species),t("@@species"),i}function nr(i){return i&&typeof i.then=="function"}var Bn=function(i){Ee(t,i);function t(e){var n=i.call(this,function(o){return n.addObserver(o),function(){return n.removeObserver(o)}})||this;return n.observers=new Set,n.promise=new Promise(function(o,a){n.resolve=o,n.reject=a}),n.handlers={next:function(o){n.sub!==null&&(n.latest=["next",o],n.notify("next",o),Mn(n.observers,"next",o))},error:function(o){var a=n.sub;a!==null&&(a&&setTimeout(function(){return a.unsubscribe()}),n.sub=null,n.latest=["error",o],n.reject(o),n.notify("error",o),Mn(n.observers,"error",o))},complete:function(){var o=n.sub;if(o!==null){var a=n.sources.shift();a?nr(a)?a.then(function(c){return n.sub=c.subscribe(n.handlers)}):n.sub=a.subscribe(n.handlers):(o&&setTimeout(function(){return o.unsubscribe()}),n.sub=null,n.latest&&n.latest[0]==="next"?n.resolve(n.latest[1]):n.resolve(),n.notify("complete"),Mn(n.observers,"complete"))}}},n.nextResultListeners=new Set,n.cancel=function(o){n.reject(o),n.sources=[],n.handlers.complete()},n.promise.catch(function(o){}),typeof e=="function"&&(e=[new Gt(e)]),nr(e)?e.then(function(o){return n.start(o)},n.handlers.error):n.start(e),n}return t.prototype.start=function(e){this.sub===void 0&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var n=this.latest[0],o=e[n];o&&o.call(e,this.latest[1]),this.sub===null&&n==="next"&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e))},t.prototype.removeObserver=function(e){this.observers.delete(e)&&this.observers.size<1&&this.handlers.complete()},t.prototype.notify=function(e,n){var o=this.nextResultListeners;o.size&&(this.nextResultListeners=new Set,o.forEach(function(a){return a(e,n)}))},t.prototype.beforeNext=function(e){var n=!1;this.nextResultListeners.add(function(o,a){n||(n=!0,e(o,a))})},t}(Gt);xs(Bn);function Se(i){return Array.isArray(i)&&i.length>0}function oi(i){return i.errors&&i.errors.length>0||!1}function Si(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=Object.create(null);return i.forEach(function(n){!n||Object.keys(n).forEach(function(o){var a=n[o];a!==void 0&&(e[o]=a)})}),e}var ir=new Map;function bo(i){var t=ir.get(i)||1;return ir.set(i,t+1),"".concat(i,":").concat(t,":").concat(Math.random().toString(36).slice(2))}function Sd(i){var t=bo("stringifyForDisplay");return JSON.stringify(i,function(e,n){return n===void 0?t:n}).split(JSON.stringify(t)).join("<undefined>")}function Ui(i,t){return Si(i,t,t.variables&&{variables:G(G({},i&&i.variables),t.variables)})}function or(i){return new Gt(function(t){t.error(i)})}var vo=function(i,t,e){var n=new Error(e);throw n.name="ServerError",n.response=i,n.statusCode=i.status,n.result=t,n};function xd(i){for(var t=["query","operationName","variables","extensions","context"],e=0,n=Object.keys(i);e<n.length;e++){var o=n[e];if(t.indexOf(o)<0)throw __DEV__?new Dt("illegal argument: ".concat(o)):new Dt(26)}return i}function Od(i,t){var e=G({},i),n=function(a){typeof a=="function"?e=G(G({},e),a(e)):e=G(G({},e),a)},o=function(){return G({},e)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:n}),Object.defineProperty(t,"getContext",{enumerable:!1,value:o}),t}function Id(i){var t={variables:i.variables||{},extensions:i.extensions||{},operationName:i.operationName,query:i.query};return t.operationName||(t.operationName=typeof t.query!="string"?po(t.query)||void 0:""),t}function ar(i,t){return t?t(i):Gt.of()}function Fn(i){return typeof i=="function"?new Vn(i):i}function Hn(i){return i.request.length<=1}var Bd=function(i){Ee(t,i);function t(e,n){var o=i.call(this,e)||this;return o.link=n,o}return t}(Error),Vn=function(){function i(t){t&&(this.request=t)}return i.empty=function(){return new i(function(){return Gt.of()})},i.from=function(t){return t.length===0?i.empty():t.map(Fn).reduce(function(e,n){return e.concat(n)})},i.split=function(t,e,n){var o=Fn(e),a=Fn(n||new i(ar));return Hn(o)&&Hn(a)?new i(function(c){return t(c)?o.request(c)||Gt.of():a.request(c)||Gt.of()}):new i(function(c,l){return t(c)?o.request(c,l)||Gt.of():a.request(c,l)||Gt.of()})},i.execute=function(t,e){return t.request(Od(e.context,Id(xd(e))))||Gt.of()},i.concat=function(t,e){var n=Fn(t);if(Hn(n))return __DEV__&&ht.warn(new Bd("You are calling concat on a terminating link, which will have no effect",n)),n;var o=Fn(e);return Hn(o)?new i(function(a){return n.request(a,function(c){return o.request(c)||Gt.of()})||Gt.of()}):new i(function(a,c){return n.request(a,function(l){return o.request(l,c)||Gt.of()})||Gt.of()})},i.prototype.split=function(t,e,n){return this.concat(i.split(t,e,n||new i(ar)))},i.prototype.concat=function(t){return i.concat(this,t)},i.prototype.request=function(t,e){throw __DEV__?new Dt("request is not implemented"):new Dt(21)},i.prototype.onError=function(t,e){if(e&&e.error)return e.error(t),!1;throw t},i.prototype.setOnError=function(t){return this.onError=t,this},i}(),wo=Vn.execute,Pd="3.7.0";function Td(i){return!!i.body}function Md(i){return!!i.getReader}function qd(i){return!!(Ai&&i[Symbol.asyncIterator])}function kd(i){return!!i.stream}function Rd(i){return!!i.arrayBuffer}function Nd(i){return!!i.pipe}function Dd(i){var t,e=i[Symbol.asyncIterator]();return t={next:function(){return e.next()}},t[Symbol.asyncIterator]=function(){return this},t}function zd(i){var t=null,e=null,n=!1,o=[],a=[];function c(g){if(!e){if(a.length){var L=a.shift();if(Array.isArray(L)&&L[0])return L[0]({value:g,done:!1})}o.push(g)}}function l(g){e=g;var L=a.slice();L.forEach(function(m){m[1](g)}),!t||t()}function d(){n=!0;var g=a.slice();g.forEach(function(L){L[0]({value:void 0,done:!0})}),!t||t()}t=function(){t=null,i.removeListener("data",c),i.removeListener("error",l),i.removeListener("end",d),i.removeListener("finish",d),i.removeListener("close",d)},i.on("data",c),i.on("error",l),i.on("end",d),i.on("finish",d),i.on("close",d);function s(){return new Promise(function(g,L){if(e)return L(e);if(o.length)return g({value:o.shift(),done:!1});if(n)return g({value:void 0,done:!0});a.push([g,L])})}var r={next:function(){return s()}};return Ai&&(r[Symbol.asyncIterator]=function(){return this}),r}function jd(i){var t=!1,e={next:function(){return t?Promise.resolve({value:void 0,done:!0}):(t=!0,new Promise(function(n,o){i.then(function(a){n({value:a,done:!1})}).catch(o)}))}};return Ai&&(e[Symbol.asyncIterator]=function(){return this}),e}function rr(i){var t={next:function(){return i.read()}};return Ai&&(t[Symbol.asyncIterator]=function(){return this}),t}function Ud(i){var t=i;if(Td(i)&&(t=i.body),qd(t))return Dd(t);if(Md(t))return rr(t.getReader());if(kd(t))return rr(t.stream().getReader());if(Rd(t))return jd(t.arrayBuffer());if(Nd(t))return zd(t);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var sr=Object.prototype.hasOwnProperty;function $d(i,t){var e,n,o;return De(this,void 0,void 0,function(){var a,c,l,d,s,r,g,L,m,C,A,w,T,F,R,q,Z,E,f,y;return ze(this,function(I){switch(I.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");a=new TextDecoder("utf-8"),c=(e=i.headers)===null||e===void 0?void 0:e.get("content-type"),l="boundary=",d=c?.includes(l)?c?.substring(c?.indexOf(l)+l.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",s="--".concat(d),r="",g=Ud(i),L=!0,I.label=1;case 1:return L?[4,g.next()]:[3,3];case 2:for(m=I.sent(),C=m.value,A=m.done,w=typeof C=="string"?C:a.decode(C),L=!A,r+=w,T=r.indexOf(s);T>-1;){if(F=void 0,y=[r.slice(0,T),r.slice(T+s.length)],F=y[0],r=y[1],F.trim()){if(R=F.indexOf(`\r
\r
`),q=Vd(F.slice(0,R)),Z=q["content-type"],Z&&Z.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");E=F.slice(R);try{f=Os(i,E.replace(`\r
`,"")),(Object.keys(f).length>1||"data"in f||"incremental"in f||"errors"in f)&&((n=t.next)===null||n===void 0||n.call(t,f))}catch(k){da(k,t)}}T=r.indexOf(s)}return[3,1];case 3:return(o=t.complete)===null||o===void 0||o.call(t),[2]}})})}function Vd(i){var t={};return i.split(`
`).forEach(function(e){var n=e.indexOf(":");if(n>-1){var o=e.slice(0,n).trim().toLowerCase(),a=e.slice(n+1).trim();t[o]=a}}),t}function Os(i,t){if(i.status>=300){var e=function(){try{return JSON.parse(t)}catch{return t}};vo(i,e(),"Response not successful: Received status code ".concat(i.status))}try{return JSON.parse(t)}catch(o){var n=o;throw n.name="ServerParseError",n.response=i,n.statusCode=i.status,n.bodyText=t,n}}function da(i,t){var e,n;i.name!=="AbortError"&&(i.result&&i.result.errors&&i.result.data&&((e=t.next)===null||e===void 0||e.call(t,i.result)),(n=t.error)===null||n===void 0||n.call(t,i))}function Qd(i,t,e){Gd(t)(i).then(function(n){var o,a;(o=e.next)===null||o===void 0||o.call(e,n),(a=e.complete)===null||a===void 0||a.call(e)}).catch(function(n){return da(n,e)})}function Gd(i){return function(t){return t.text().then(function(e){return Os(t,e)}).then(function(e){return t.status>=300&&vo(t,e,"Response not successful: Received status code ".concat(t.status)),!Array.isArray(e)&&!sr.call(e,"data")&&!sr.call(e,"errors")&&vo(t,e,"Server response was missing for query '".concat(Array.isArray(i)?i.map(function(n){return n.operationName}):i.operationName,"'.")),e})}}var Eo=function(i,t){var e;try{e=JSON.stringify(i)}catch(o){var n=__DEV__?new Dt("Network request failed. ".concat(t," is not serializable: ").concat(o.message)):new Dt(23);throw n.parseError=o,n}return e},Wd={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},Zd={accept:"*/*","content-type":"application/json"},Jd={method:"POST"},Hd={http:Wd,headers:Zd,options:Jd},Xd=function(i,t){return t(i)};function Yd(i,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var o={},a={};e.forEach(function(g){o=G(G(G({},o),g.options),{headers:G(G({},o.headers),g.headers)}),g.credentials&&(o.credentials=g.credentials),a=G(G({},a),g.http)}),o.headers=Kd(o.headers,a.preserveHeaderCase);var c=i.operationName,l=i.extensions,d=i.variables,s=i.query,r={operationName:c,variables:d};return a.includeExtensions&&(r.extensions=l),a.includeQuery&&(r.query=t(s,Ru)),{options:o,body:r}}function Kd(i,t){if(!t){var e=Object.create(null);return Object.keys(Object(i)).forEach(function(a){e[a.toLowerCase()]=i[a]}),e}var n=Object.create(null);Object.keys(Object(i)).forEach(function(a){n[a.toLowerCase()]={originalName:a,value:i[a]}});var o=Object.create(null);return Object.keys(n).forEach(function(a){o[n[a].originalName]=n[a].value}),o}var tf=function(i){if(!i&&typeof fetch>"u")throw __DEV__?new Dt(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new Dt(22)},ef=function(){if(typeof AbortController>"u")return{controller:!1,signal:!1};var i=new AbortController,t=i.signal;return{controller:i,signal:t}},nf=function(i,t){var e=i.getContext(),n=e.uri;return n||(typeof t=="function"?t(i):t||"/graphql")};function of(i,t){var e=[],n=function(g,L){e.push("".concat(g,"=").concat(encodeURIComponent(L)))};if("query"in t&&n("query",t.query),t.operationName&&n("operationName",t.operationName),t.variables){var o=void 0;try{o=Eo(t.variables,"Variables map")}catch(g){return{parseError:g}}n("variables",o)}if(t.extensions){var a=void 0;try{a=Eo(t.extensions,"Extensions map")}catch(g){return{parseError:g}}n("extensions",a)}var c="",l=i,d=i.indexOf("#");d!==-1&&(c=i.substr(d),l=i.substr(0,d));var s=l.indexOf("?")===-1?"?":"&",r=l+s+e.join("&")+c;return{newURI:r}}var cr=ge(function(){return fetch}),af=function(i){i===void 0&&(i={});var t=i.uri,e=t===void 0?"/graphql":t,n=i.fetch,o=i.print,a=o===void 0?Xd:o,c=i.includeExtensions,l=i.preserveHeaderCase,d=i.useGETForQueries,s=i.includeUnusedVariables,r=s===void 0?!1:s,g=hn(i,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);__DEV__&&tf(n||cr);var L={http:{includeExtensions:c,preserveHeaderCase:l},options:g.fetchOptions,credentials:g.credentials,headers:g.headers};return new Vn(function(m){var C=nf(m,e),A=m.getContext(),w={};if(A.clientAwareness){var T=A.clientAwareness,F=T.name,R=T.version;F&&(w["apollographql-client-name"]=F),R&&(w["apollographql-client-version"]=R)}var q=G(G({},w),A.headers),Z={http:A.http,options:A.fetchOptions,credentials:A.credentials,headers:q},E=Yd(m,a,Hd,L,Z),f=E.options,y=E.body;if(y.variables&&!r){var I=new Set(Object.keys(y.variables));Oe(m.query,{Variable:function(U,ct,H){H&&H.kind!=="VariableDefinition"&&I.delete(U.name.value)}}),I.size&&(y.variables=G({},y.variables),I.forEach(function(U){delete y.variables[U]}))}var k;if(!f.signal){var O=ef(),x=O.controller,v=O.signal;k=x,k&&(f.signal=v)}var P=function(U){return U.kind==="OperationDefinition"&&U.operation==="mutation"};if(d&&!m.query.definitions.some(P)&&(f.method="GET"),Ho(["defer"],m.query)&&(f.headers.accept="multipart/mixed; deferSpec=20220824, application/json"),f.method==="GET"){var V=of(C,y),at=V.newURI,et=V.parseError;if(et)return or(et);C=at}else try{f.body=Eo(y,"Payload")}catch(U){return or(U)}return new Gt(function(U){var ct=n||ge(function(){return fetch})||cr;return ct(C,f).then(function(H){var st;m.setContext({response:H});var Mt=(st=H.headers)===null||st===void 0?void 0:st.get("content-type");return Mt!==null&&/^multipart\/mixed/i.test(Mt)?$d(H,U):Qd(H,m,U)}).catch(function(H){return da(H,U)}),function(){k&&k.abort()}})})},rf=function(i){Ee(t,i);function t(e){e===void 0&&(e={});var n=i.call(this,af(e).request)||this;return n.options=e,n}return t}(Vn),Is=Object.prototype,lr=Is.toString,sf=Is.hasOwnProperty,ur=Function.prototype.toString,Fo=new Map;function ie(i,t){try{return Co(i,t)}finally{Fo.clear()}}function Co(i,t){if(i===t)return!0;var e=lr.call(i),n=lr.call(t);if(e!==n)return!1;switch(e){case"[object Array]":if(i.length!==t.length)return!1;case"[object Object]":{if(fr(i,t))return!0;var o=dr(i),a=dr(t),c=o.length;if(c!==a.length)return!1;for(var l=0;l<c;++l)if(!sf.call(t,o[l]))return!1;for(var l=0;l<c;++l){var d=o[l];if(!Co(i[d],t[d]))return!1}return!0}case"[object Error]":return i.name===t.name&&i.message===t.message;case"[object Number]":if(i!==i)return t!==t;case"[object Boolean]":case"[object Date]":return+i==+t;case"[object RegExp]":case"[object String]":return i=="".concat(t);case"[object Map]":case"[object Set]":{if(i.size!==t.size)return!1;if(fr(i,t))return!0;for(var s=i.entries(),r=e==="[object Map]";;){var g=s.next();if(g.done)break;var L=g.value,m=L[0],C=L[1];if(!t.has(m)||r&&!Co(C,t.get(m)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":i=new Uint8Array(i),t=new Uint8Array(t);case"[object DataView]":{var A=i.byteLength;if(A===t.byteLength)for(;A--&&i[A]===t[A];);return A===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var w=ur.call(i);return w!==ur.call(t)?!1:!uf(w,lf)}}return!1}function dr(i){return Object.keys(i).filter(cf,i)}function cf(i){return this[i]!==void 0}var lf="{ [native code] }";function uf(i,t){var e=i.length-t.length;return e>=0&&i.indexOf(t,e)===e}function fr(i,t){var e=Fo.get(i);if(e){if(e.has(t))return!0}else Fo.set(i,e=new Set);return e.add(t),!1}function df(i){return!!i.incremental}var ff=function(){return Object.create(null)},Bs=Array.prototype,hf=Bs.forEach,_f=Bs.slice,Qn=function(){function i(t,e){t===void 0&&(t=!0),e===void 0&&(e=ff),this.weakness=t,this.makeData=e}return i.prototype.lookup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.lookupArray(t)},i.prototype.lookupArray=function(t){var e=this;return hf.call(t,function(n){return e=e.getChildTrie(n)}),e.data||(e.data=this.makeData(_f.call(t)))},i.prototype.getChildTrie=function(t){var e=this.weakness&&pf(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=e.get(t);return n||e.set(t,n=new i(this.weakness,this.makeData)),n},i}();function pf(i){switch(typeof i){case"object":if(i===null)break;case"function":return!0}return!1}var ae=null,hr={},gf=1,mf=function(){return function(){function i(){this.id=["slot",gf++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return i.prototype.hasValue=function(){for(var t=ae;t;t=t.parent)if(this.id in t.slots){var e=t.slots[this.id];if(e===hr)break;return t!==ae&&(ae.slots[this.id]=e),!0}return ae&&(ae.slots[this.id]=hr),!1},i.prototype.getValue=function(){if(this.hasValue())return ae.slots[this.id]},i.prototype.withValue=function(t,e,n,o){var a,c=(a={__proto__:null},a[this.id]=t,a),l=ae;ae={parent:l,slots:c};try{return e.apply(o,n)}finally{ae=l}},i.bind=function(t){var e=ae;return function(){var n=ae;try{return ae=e,t.apply(this,arguments)}finally{ae=n}}},i.noContext=function(t,e,n){if(ae){var o=ae;try{return ae=null,t.apply(n,e)}finally{ae=o}}else return t.apply(n,e)},i}()},$i="@wry/context:Slot",Vi=Array,fa=Vi[$i]||function(){var i=mf();try{Object.defineProperty(Vi,$i,{value:Vi[$i]=i,enumerable:!1,writable:!1,configurable:!1})}finally{return i}}();fa.bind;fa.noContext;function yf(){}var Lf=function(){function i(t,e){t===void 0&&(t=1/0),e===void 0&&(e=yf),this.max=t,this.dispose=e,this.map=new Map,this.newest=null,this.oldest=null}return i.prototype.has=function(t){return this.map.has(t)},i.prototype.get=function(t){var e=this.getNode(t);return e&&e.value},i.prototype.getNode=function(t){var e=this.map.get(t);if(e&&e!==this.newest){var n=e.older,o=e.newer;o&&(o.older=n),n&&(n.newer=o),e.older=this.newest,e.older.newer=e,e.newer=null,this.newest=e,e===this.oldest&&(this.oldest=o)}return e},i.prototype.set=function(t,e){var n=this.getNode(t);return n?n.value=e:(n={key:t,value:e,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(t,n),n.value)},i.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},i.prototype.delete=function(t){var e=this.map.get(t);return e?(e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.map.delete(t),this.dispose(e.value,t),!0):!1},i}(),xi=new fa,Qi,bf=Object.prototype.hasOwnProperty,ha=(Qi=Array.from,Qi===void 0?function(i){var t=[];return i.forEach(function(e){return t.push(e)}),t}:Qi);function di(i){var t=i.unsubscribe;typeof t=="function"&&(i.unsubscribe=void 0,t())}var Nn=[],vf=100;function gn(i,t){if(!i)throw new Error(t||"assertion failure")}function wf(i,t){var e=i.length;return e>0&&e===t.length&&i[e-1]===t[e-1]}function Ps(i){switch(i.length){case 0:throw new Error("unknown value");case 1:return i[0];case 2:throw i[1]}}function Ef(i){return i.slice(0)}var Ff=function(){function i(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++i.count}return i.prototype.peek=function(){if(this.value.length===1&&!$e(this))return _r(this),this.value[0]},i.prototype.recompute=function(t){return gn(!this.recomputing,"already recomputing"),_r(this),$e(this)?Cf(this,t):Ps(this.value)},i.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,Ts(this),di(this))},i.prototype.dispose=function(){var t=this;this.setDirty(),Ns(this),_a(this,function(e,n){e.setDirty(),Ds(e,t)})},i.prototype.forget=function(){this.dispose()},i.prototype.dependOn=function(t){t.add(this),this.deps||(this.deps=Nn.pop()||new Set),this.deps.add(t)},i.prototype.forgetDeps=function(){var t=this;this.deps&&(ha(this.deps).forEach(function(e){return e.delete(t)}),this.deps.clear(),Nn.push(this.deps),this.deps=null)},i.count=0,i}();function _r(i){var t=xi.getValue();if(t)return i.parents.add(t),t.childValues.has(i)||t.childValues.set(i,[]),$e(i)?qs(t,i):ks(t,i),t}function Cf(i,t){return Ns(i),xi.withValue(i,Af,[i,t]),xf(i,t)&&Sf(i),Ps(i.value)}function Af(i,t){i.recomputing=!0,i.value.length=0;try{i.value[0]=i.fn.apply(null,t)}catch(e){i.value[1]=e}i.recomputing=!1}function $e(i){return i.dirty||!!(i.dirtyChildren&&i.dirtyChildren.size)}function Sf(i){i.dirty=!1,!$e(i)&&Ms(i)}function Ts(i){_a(i,qs)}function Ms(i){_a(i,ks)}function _a(i,t){var e=i.parents.size;if(e)for(var n=ha(i.parents),o=0;o<e;++o)t(n[o],i)}function qs(i,t){gn(i.childValues.has(t)),gn($e(t));var e=!$e(i);if(!i.dirtyChildren)i.dirtyChildren=Nn.pop()||new Set;else if(i.dirtyChildren.has(t))return;i.dirtyChildren.add(t),e&&Ts(i)}function ks(i,t){gn(i.childValues.has(t)),gn(!$e(t));var e=i.childValues.get(t);e.length===0?i.childValues.set(t,Ef(t.value)):wf(e,t.value)||i.setDirty(),Rs(i,t),!$e(i)&&Ms(i)}function Rs(i,t){var e=i.dirtyChildren;e&&(e.delete(t),e.size===0&&(Nn.length<vf&&Nn.push(e),i.dirtyChildren=null))}function Ns(i){i.childValues.size>0&&i.childValues.forEach(function(t,e){Ds(i,e)}),i.forgetDeps(),gn(i.dirtyChildren===null)}function Ds(i,t){t.parents.delete(i),i.childValues.delete(t),Rs(i,t)}function xf(i,t){if(typeof i.subscribe=="function")try{di(i),i.unsubscribe=i.subscribe.apply(null,t)}catch{return i.setDirty(),!1}return!0}var Of={setDirty:!0,dispose:!0,forget:!0};function zs(i){var t=new Map,e=i&&i.subscribe;function n(o){var a=xi.getValue();if(a){var c=t.get(o);c||t.set(o,c=new Set),a.dependOn(c),typeof e=="function"&&(di(c),c.unsubscribe=e(o))}}return n.dirty=function(a,c){var l=t.get(a);if(l){var d=c&&bf.call(Of,c)?c:"setDirty";ha(l).forEach(function(s){return s[d]()}),t.delete(a),di(l)}},n}function js(){var i=new Qn(typeof WeakMap=="function");return function(){return i.lookupArray(arguments)}}js();var Gi=new Set;function fi(i,t){t===void 0&&(t=Object.create(null));var e=new Lf(t.max||Math.pow(2,16),function(s){return s.dispose()}),n=t.keyArgs,o=t.makeCacheKey||js(),a=function(){var s=o.apply(null,n?n.apply(null,arguments):arguments);if(s===void 0)return i.apply(null,arguments);var r=e.get(s);r||(e.set(s,r=new Ff(i)),r.subscribe=t.subscribe,r.forget=function(){return e.delete(s)});var g=r.recompute(Array.prototype.slice.call(arguments));return e.set(s,r),Gi.add(e),xi.hasValue()||(Gi.forEach(function(L){return L.clean()}),Gi.clear()),g};Object.defineProperty(a,"size",{get:function(){return e.map.size},configurable:!1,enumerable:!1});function c(s){var r=e.get(s);r&&r.setDirty()}a.dirtyKey=c,a.dirty=function(){c(o.apply(null,arguments))};function l(s){var r=e.get(s);if(r)return r.peek()}a.peekKey=l,a.peek=function(){return l(o.apply(null,arguments))};function d(s){return e.delete(s)}return a.forgetKey=d,a.forget=function(){return d(o.apply(null,arguments))},a.makeCacheKey=o,a.getKey=n?function(){return o.apply(null,n.apply(null,arguments))}:o,Object.freeze(a)}var If=function(){function i(){this.getFragmentDoc=fi(Qu)}return i.prototype.batch=function(t){var e=this,n=typeof t.optimistic=="string"?t.optimistic:t.optimistic===!1?null:void 0,o;return this.performTransaction(function(){return o=t.update(e)},n),o},i.prototype.recordOptimisticTransaction=function(t,e){this.performTransaction(t,e)},i.prototype.transformDocument=function(t){return t},i.prototype.transformForLink=function(t){return t},i.prototype.identify=function(t){},i.prototype.gc=function(){return[]},i.prototype.modify=function(t){return!1},i.prototype.readQuery=function(t,e){return e===void 0&&(e=!!t.optimistic),this.read(G(G({},t),{rootId:t.id||"ROOT_QUERY",optimistic:e}))},i.prototype.readFragment=function(t,e){return e===void 0&&(e=!!t.optimistic),this.read(G(G({},t),{query:this.getFragmentDoc(t.fragment,t.fragmentName),rootId:t.id,optimistic:e}))},i.prototype.writeQuery=function(t){var e=t.id,n=t.data,o=hn(t,["id","data"]);return this.write(Object.assign(o,{dataId:e||"ROOT_QUERY",result:n}))},i.prototype.writeFragment=function(t){var e=t.id,n=t.data,o=t.fragment,a=t.fragmentName,c=hn(t,["id","data","fragment","fragmentName"]);return this.write(Object.assign(c,{query:this.getFragmentDoc(o,a),dataId:e,result:n}))},i.prototype.updateQuery=function(t,e){return this.batch({update:function(n){var o=n.readQuery(t),a=e(o);return a==null?o:(n.writeQuery(G(G({},t),{data:a})),a)}})},i.prototype.updateFragment=function(t,e){return this.batch({update:function(n){var o=n.readFragment(t),a=e(o);return a==null?o:(n.writeFragment(G(G({},t),{data:a})),a)}})},i}(),Us=function(i){Ee(t,i);function t(e,n,o,a){var c,l=i.call(this,e)||this;if(l.message=e,l.path=n,l.query=o,l.variables=a,Array.isArray(l.path)){l.missing=l.message;for(var d=l.path.length-1;d>=0;--d)l.missing=(c={},c[l.path[d]]=l.missing,c)}else l.missing=l.path;return l.__proto__=t.prototype,l}return t}(Error),ee=Object.prototype.hasOwnProperty;function Cn(i){return i==null}var Jt=Array.isArray;function $s(i,t){var e=i.__typename,n=i.id,o=i._id;if(typeof e=="string"&&(t&&(t.keyObject=Cn(n)?Cn(o)?void 0:{_id:o}:{id:n}),Cn(n)&&!Cn(o)&&(n=o),!Cn(n)))return"".concat(e,":").concat(typeof n=="number"||typeof n=="string"?n:JSON.stringify(n))}var Vs={dataIdFromObject:$s,addTypename:!0,resultCaching:!0,canonizeResults:!1};function Bf(i){return Si(Vs,i)}function Qs(i){var t=i.canonizeResults;return t===void 0?Vs.canonizeResults:t}function Pf(i,t){return jt(t)?i.get(t.__ref,"__typename"):t&&t.__typename}var Gs=/^[_a-z][_0-9a-z]*/i;function Ve(i){var t=i.match(Gs);return t?t[0]:i}function Ao(i,t,e){return Zt(t)?Jt(t)?t.every(function(n){return Ao(i,n,e)}):i.selections.every(function(n){if(Te(n)&&Ei(n,e)){var o=Xe(n);return ee.call(t,o)&&(!n.selectionSet||Ao(n.selectionSet,t[o],e))}return!0}):!1}function ln(i){return Zt(i)&&!jt(i)&&!Jt(i)}function Tf(){return new Ye}function Ws(i,t){var e=Xo(ta(i));return{fragmentMap:e,lookupFragment:function(n){var o=e[n];return!o&&t&&(o=t.lookup(n)),o||null}}}var ai=Object.create(null),Wi=function(){return ai},pr=Object.create(null),Dn=function(){function i(t,e){var n=this;this.policies=t,this.group=e,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(o,a){return Lo(jt(o)?n.get(o.__ref,a):o&&o[a])},this.canRead=function(o){return jt(o)?n.has(o.__ref):typeof o=="object"},this.toReference=function(o,a){if(typeof o=="string")return dn(o);if(jt(o))return o;var c=n.policies.identify(o)[0];if(c){var l=dn(c);return a&&n.merge(c,o),l}}}return i.prototype.toObject=function(){return G({},this.data)},i.prototype.has=function(t){return this.lookup(t,!0)!==void 0},i.prototype.get=function(t,e){if(this.group.depend(t,e),ee.call(this.data,t)){var n=this.data[t];if(n&&ee.call(n,e))return n[e]}if(e==="__typename"&&ee.call(this.policies.rootTypenamesById,t))return this.policies.rootTypenamesById[t];if(this instanceof Ne)return this.parent.get(t,e)},i.prototype.lookup=function(t,e){if(e&&this.group.depend(t,"__exists"),ee.call(this.data,t))return this.data[t];if(this instanceof Ne)return this.parent.lookup(t,e);if(this.policies.rootTypenamesById[t])return Object.create(null)},i.prototype.merge=function(t,e){var n=this,o;jt(t)&&(t=t.__ref),jt(e)&&(e=e.__ref);var a=typeof t=="string"?this.lookup(o=t):t,c=typeof e=="string"?this.lookup(o=e):e;if(!!c){__DEV__?ht(typeof o=="string","store.merge expects a string ID"):ht(typeof o=="string",1);var l=new Ye(qf).merge(a,c);if(this.data[o]=l,l!==a&&(delete this.refs[o],this.group.caching)){var d=Object.create(null);a||(d.__exists=1),Object.keys(c).forEach(function(s){if(!a||a[s]!==l[s]){d[s]=1;var r=Ve(s);r!==s&&!n.policies.hasKeyArgs(l.__typename,r)&&(d[r]=1),l[s]===void 0&&!(n instanceof Ne)&&delete l[s]}}),d.__typename&&!(a&&a.__typename)&&this.policies.rootTypenamesById[o]===l.__typename&&delete d.__typename,Object.keys(d).forEach(function(s){return n.group.dirty(o,s)})}}},i.prototype.modify=function(t,e){var n=this,o=this.lookup(t);if(o){var a=Object.create(null),c=!1,l=!0,d={DELETE:ai,INVALIDATE:pr,isReference:jt,toReference:this.toReference,canRead:this.canRead,readField:function(s,r){return n.policies.readField(typeof s=="string"?{fieldName:s,from:r||dn(t)}:s,{store:n})}};if(Object.keys(o).forEach(function(s){var r=Ve(s),g=o[s];if(g!==void 0){var L=typeof e=="function"?e:e[s]||e[r];if(L){var m=L===Wi?ai:L(Lo(g),G(G({},d),{fieldName:r,storeFieldName:s,storage:n.getStorage(t,s)}));m===pr?n.group.dirty(t,s):(m===ai&&(m=void 0),m!==g&&(a[s]=m,c=!0,g=m))}g!==void 0&&(l=!1)}}),c)return this.merge(t,a),l&&(this instanceof Ne?this.data[t]=void 0:delete this.data[t],this.group.dirty(t,"__exists")),!0}return!1},i.prototype.delete=function(t,e,n){var o,a=this.lookup(t);if(a){var c=this.getFieldValue(a,"__typename"),l=e&&n?this.policies.getStoreFieldName({typename:c,fieldName:e,args:n}):e;return this.modify(t,l?(o={},o[l]=Wi,o):Wi)}return!1},i.prototype.evict=function(t,e){var n=!1;return t.id&&(ee.call(this.data,t.id)&&(n=this.delete(t.id,t.fieldName,t.args)),this instanceof Ne&&this!==e&&(n=this.parent.evict(t,e)||n),(t.fieldName||n)&&this.group.dirty(t.id,t.fieldName||"__exists")),n},i.prototype.clear=function(){this.replace(null)},i.prototype.extract=function(){var t=this,e=this.toObject(),n=[];return this.getRootIdSet().forEach(function(o){ee.call(t.policies.rootTypenamesById,o)||n.push(o)}),n.length&&(e.__META={extraRootIds:n.sort()}),e},i.prototype.replace=function(t){var e=this;if(Object.keys(this.data).forEach(function(a){t&&ee.call(t,a)||e.delete(a)}),t){var n=t.__META,o=hn(t,["__META"]);Object.keys(o).forEach(function(a){e.merge(a,o[a])}),n&&n.extraRootIds.forEach(this.retain,this)}},i.prototype.retain=function(t){return this.rootIds[t]=(this.rootIds[t]||0)+1},i.prototype.release=function(t){if(this.rootIds[t]>0){var e=--this.rootIds[t];return e||delete this.rootIds[t],e}return 0},i.prototype.getRootIdSet=function(t){return t===void 0&&(t=new Set),Object.keys(this.rootIds).forEach(t.add,t),this instanceof Ne?this.parent.getRootIdSet(t):Object.keys(this.policies.rootTypenamesById).forEach(t.add,t),t},i.prototype.gc=function(){var t=this,e=this.getRootIdSet(),n=this.toObject();e.forEach(function(c){ee.call(n,c)&&(Object.keys(t.findChildRefIds(c)).forEach(e.add,e),delete n[c])});var o=Object.keys(n);if(o.length){for(var a=this;a instanceof Ne;)a=a.parent;o.forEach(function(c){return a.delete(c)})}return o},i.prototype.findChildRefIds=function(t){if(!ee.call(this.refs,t)){var e=this.refs[t]=Object.create(null),n=this.data[t];if(!n)return e;var o=new Set([n]);o.forEach(function(a){jt(a)&&(e[a.__ref]=!0),Zt(a)&&Object.keys(a).forEach(function(c){var l=a[c];Zt(l)&&o.add(l)})})}return this.refs[t]},i.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},i}(),Zs=function(){function i(t,e){e===void 0&&(e=null),this.caching=t,this.parent=e,this.d=null,this.resetCaching()}return i.prototype.resetCaching=function(){this.d=this.caching?zs():null,this.keyMaker=new Qn(tn)},i.prototype.depend=function(t,e){if(this.d){this.d(Zi(t,e));var n=Ve(e);n!==e&&this.d(Zi(t,n)),this.parent&&this.parent.depend(t,e)}},i.prototype.dirty=function(t,e){this.d&&this.d.dirty(Zi(t,e),e==="__exists"?"forget":"setDirty")},i}();function Zi(i,t){return t+"#"+i}function gr(i,t){qn(i)&&i.group.depend(t,"__exists")}(function(i){var t=function(e){Ee(n,e);function n(o){var a=o.policies,c=o.resultCaching,l=c===void 0?!0:c,d=o.seed,s=e.call(this,a,new Zs(l))||this;return s.stump=new Mf(s),s.storageTrie=new Qn(tn),d&&s.replace(d),s}return n.prototype.addLayer=function(o,a){return this.stump.addLayer(o,a)},n.prototype.removeLayer=function(){return this},n.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},n}(i);i.Root=t})(Dn||(Dn={}));var Ne=function(i){Ee(t,i);function t(e,n,o,a){var c=i.call(this,n.policies,a)||this;return c.id=e,c.parent=n,c.replay=o,c.group=a,o(c),c}return t.prototype.addLayer=function(e,n){return new t(e,this,n,this.group)},t.prototype.removeLayer=function(e){var n=this,o=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var c=n.data[a],l=o.lookup(a);l?c?c!==l&&Object.keys(c).forEach(function(d){ie(c[d],l[d])||n.group.dirty(a,d)}):(n.group.dirty(a,"__exists"),Object.keys(l).forEach(function(d){n.group.dirty(a,d)})):n.delete(a)}),o):o===this.parent?this:o.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return G(G({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(e){var n=this.parent.findChildRefIds(e);return ee.call(this.data,e)?G(G({},n),i.prototype.findChildRefIds.call(this,e)):n},t.prototype.getStorage=function(){for(var e=this.parent;e.parent;)e=e.parent;return e.getStorage.apply(e,arguments)},t}(Dn),Mf=function(i){Ee(t,i);function t(e){return i.call(this,"EntityStore.Stump",e,function(){},new Zs(e.group.caching,e.group))||this}return t.prototype.removeLayer=function(){return this},t.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},t}(Ne);function qf(i,t,e){var n=i[e],o=t[e];return ie(n,o)?n:o}function qn(i){return!!(i instanceof Dn&&i.group.caching)}function kf(i){return Zt(i)?Jt(i)?i.slice(0):G({__proto__:Object.getPrototypeOf(i)},i):i}var So=function(){function i(){this.known=new(Ad?WeakSet:Set),this.pool=new Qn(tn),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return i.prototype.isKnown=function(t){return Zt(t)&&this.known.has(t)},i.prototype.pass=function(t){if(Zt(t)){var e=kf(t);return this.passes.set(e,t),e}return t},i.prototype.admit=function(t){var e=this;if(Zt(t)){var n=this.passes.get(t);if(n)return n;var o=Object.getPrototypeOf(t);switch(o){case Array.prototype:{if(this.known.has(t))return t;var a=t.map(this.admit,this),c=this.pool.lookupArray(a);return c.array||(this.known.add(c.array=a),__DEV__&&Object.freeze(a)),c.array}case null:case Object.prototype:{if(this.known.has(t))return t;var l=Object.getPrototypeOf(t),d=[l],s=this.sortedKeys(t);d.push(s.json);var r=d.length;s.sorted.forEach(function(m){d.push(e.admit(t[m]))});var c=this.pool.lookupArray(d);if(!c.object){var g=c.object=Object.create(l);this.known.add(g),s.sorted.forEach(function(m,C){g[m]=d[r+C]}),__DEV__&&Object.freeze(g)}return c.object}}}return t},i.prototype.sortedKeys=function(t){var e=Object.keys(t),n=this.pool.lookupArray(e);if(!n.keys){e.sort();var o=JSON.stringify(e);(n.keys=this.keysByJSON.get(o))||this.keysByJSON.set(o,n.keys={sorted:e,json:o})}return n.keys},i}(),Je=Object.assign(function(i){if(Zt(i)){xo===void 0&&mr();var t=xo.admit(i),e=Oo.get(t);return e===void 0&&Oo.set(t,e=JSON.stringify(t)),e}return JSON.stringify(i)},{reset:mr}),xo,Oo;function mr(){xo=new So,Oo=new(tn?WeakMap:Map)}function yr(i){return[i.selectionSet,i.objectOrReference,i.context,i.context.canonizeResults]}var Rf=function(){function i(t){var e=this;this.knownResults=new(tn?WeakMap:Map),this.config=Si(t,{addTypename:t.addTypename!==!1,canonizeResults:Qs(t)}),this.canon=t.canon||new So,this.executeSelectionSet=fi(function(n){var o,a=n.context.canonizeResults,c=yr(n);c[3]=!a;var l=(o=e.executeSelectionSet).peek.apply(o,c);return l?a?G(G({},l),{result:e.canon.admit(l.result)}):l:(gr(n.context.store,n.enclosingRef.__ref),e.execSelectionSetImpl(n))},{max:this.config.resultCacheMaxSize,keyArgs:yr,makeCacheKey:function(n,o,a,c){if(qn(a.store))return a.store.makeCacheKey(n,jt(o)?o.__ref:o,a.varString,c)}}),this.executeSubSelectedArray=fi(function(n){return gr(n.context.store,n.enclosingRef.__ref),e.execSubSelectedArrayImpl(n)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(n){var o=n.field,a=n.array,c=n.context;if(qn(c.store))return c.store.makeCacheKey(o,a,c.varString)}})}return i.prototype.resetCanon=function(){this.canon=new So},i.prototype.diffQueryAgainstStore=function(t){var e=t.store,n=t.query,o=t.rootId,a=o===void 0?"ROOT_QUERY":o,c=t.variables,l=t.returnPartialData,d=l===void 0?!0:l,s=t.canonizeResults,r=s===void 0?this.config.canonizeResults:s,g=this.config.cache.policies;c=G(G({},na(bs(n))),c);var L=dn(a),m=this.executeSelectionSet({selectionSet:ea(n).selectionSet,objectOrReference:L,enclosingRef:L,context:G({store:e,query:n,policies:g,variables:c,varString:Je(c),canonizeResults:r},Ws(n,this.config.fragments))}),C;if(m.missing&&(C=[new Us(Nf(m.missing),m.missing,n,c)],!d))throw C[0];return{result:m.result,complete:!C,missing:C}},i.prototype.isFresh=function(t,e,n,o){if(qn(o.store)&&this.knownResults.get(t)===n){var a=this.executeSelectionSet.peek(n,e,o,this.canon.isKnown(t));if(a&&t===a.result)return!0}return!1},i.prototype.execSelectionSetImpl=function(t){var e=this,n=t.selectionSet,o=t.objectOrReference,a=t.enclosingRef,c=t.context;if(jt(o)&&!c.policies.rootTypenamesById[o.__ref]&&!c.store.has(o.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(o.__ref," object")};var l=c.variables,d=c.policies,s=c.store,r=s.getFieldValue(o,"__typename"),g=[],L,m=new Ye;this.config.addTypename&&typeof r=="string"&&!d.rootIdsByTypename[r]&&g.push({__typename:r});function C(R,q){var Z;return R.missing&&(L=m.merge(L,(Z={},Z[q]=R.missing,Z))),R.result}var A=new Set(n.selections);A.forEach(function(R){var q,Z;if(!!Ei(R,l))if(Te(R)){var E=d.readField({fieldName:R.name.value,field:R,variables:c.variables,from:o},c),f=Xe(R);E===void 0?oa.added(R)||(L=m.merge(L,(q={},q[f]="Can't find field '".concat(R.name.value,"' on ").concat(jt(o)?o.__ref+" object":"object "+JSON.stringify(o,null,2)),q))):Jt(E)?E=C(e.executeSubSelectedArray({field:R,array:E,enclosingRef:a,context:c}),f):R.selectionSet?E!=null&&(E=C(e.executeSelectionSet({selectionSet:R.selectionSet,objectOrReference:E,enclosingRef:jt(E)?E:a,context:c}),f)):c.canonizeResults&&(E=e.canon.pass(E)),E!==void 0&&g.push((Z={},Z[f]=E,Z))}else{var y=Yo(R,c.lookupFragment);if(!y&&R.kind===St.FRAGMENT_SPREAD)throw __DEV__?new Dt("No fragment named ".concat(R.name.value)):new Dt(5);y&&d.fragmentMatches(y,r)&&y.selectionSet.selections.forEach(A.add,A)}});var w=aa(g),T={result:w,missing:L},F=c.canonizeResults?this.canon.admit(T):Lo(T);return F.result&&this.knownResults.set(F.result,n),F},i.prototype.execSubSelectedArrayImpl=function(t){var e=this,n=t.field,o=t.array,a=t.enclosingRef,c=t.context,l,d=new Ye;function s(r,g){var L;return r.missing&&(l=d.merge(l,(L={},L[g]=r.missing,L))),r.result}return n.selectionSet&&(o=o.filter(c.store.canRead)),o=o.map(function(r,g){return r===null?null:Jt(r)?s(e.executeSubSelectedArray({field:n,array:r,enclosingRef:a,context:c}),g):n.selectionSet?s(e.executeSelectionSet({selectionSet:n.selectionSet,objectOrReference:r,enclosingRef:jt(r)?r:a,context:c}),g):(__DEV__&&Df(c.store,n,r),r)}),{result:c.canonizeResults?this.canon.admit(o):o,missing:l}},i}();function Nf(i){try{JSON.stringify(i,function(t,e){if(typeof e=="string")throw e;return e})}catch(t){return t}}function Df(i,t,e){if(!t.selectionSet){var n=new Set([e]);n.forEach(function(o){Zt(o)&&(__DEV__?ht(!jt(o),"Missing selection set for object of type ".concat(Pf(i,o)," returned for query field ").concat(t.name.value)):ht(!jt(o),6),Object.values(o).forEach(n.add,n))})}}var re=null,Lr={},zf=1,jf=function(){return function(){function i(){this.id=["slot",zf++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return i.prototype.hasValue=function(){for(var t=re;t;t=t.parent)if(this.id in t.slots){var e=t.slots[this.id];if(e===Lr)break;return t!==re&&(re.slots[this.id]=e),!0}return re&&(re.slots[this.id]=Lr),!1},i.prototype.getValue=function(){if(this.hasValue())return re.slots[this.id]},i.prototype.withValue=function(t,e,n,o){var a,c=(a={__proto__:null},a[this.id]=t,a),l=re;re={parent:l,slots:c};try{return e.apply(o,n)}finally{re=l}},i.bind=function(t){var e=re;return function(){var n=re;try{return re=e,t.apply(this,arguments)}finally{re=n}}},i.noContext=function(t,e,n){if(re){var o=re;try{return re=null,t.apply(n,e)}finally{re=o}}else return t.apply(n,e)},i}()};function br(i){try{return i()}catch{}}var Ji="@wry/context:Slot",Uf=br(function(){return globalThis})||br(function(){return global})||Object.create(null),vr=Uf,pa=vr[Ji]||Array[Ji]||function(i){try{Object.defineProperty(vr,Ji,{value:i,enumerable:!1,writable:!1,configurable:!0})}finally{return i}}(jf());pa.bind;pa.noContext;var ga=new pa,wr=new WeakMap;function kn(i){var t=wr.get(i);return t||wr.set(i,t={vars:new Set,dep:zs()}),t}function Er(i){kn(i).vars.forEach(function(t){return t.forgetCache(i)})}function $f(i){kn(i).vars.forEach(function(t){return t.attachCache(i)})}function Vf(i){var t=new Set,e=new Set,n=function(a){if(arguments.length>0){if(i!==a){i=a,t.forEach(function(d){kn(d).dep.dirty(n),Qf(d)});var c=Array.from(e);e.clear(),c.forEach(function(d){return d(i)})}}else{var l=ga.getValue();l&&(o(l),kn(l).dep(n))}return i};n.onNextChange=function(a){return e.add(a),function(){e.delete(a)}};var o=n.attachCache=function(a){return t.add(a),kn(a).vars.add(n),n};return n.forgetCache=function(a){return t.delete(a)},n}function Qf(i){i.broadcastWatches&&i.broadcastWatches()}var Fr=Object.create(null);function ma(i){var t=JSON.stringify(i);return Fr[t]||(Fr[t]=Object.create(null))}function Cr(i){var t=ma(i);return t.keyFieldsFn||(t.keyFieldsFn=function(e,n){var o=function(c,l){return n.readField(l,c)},a=n.keyObject=ya(i,function(c){var l=fn(n.storeObject,c,o);return l===void 0&&e!==n.storeObject&&ee.call(e,c[0])&&(l=fn(e,c,Hs)),__DEV__?ht(l!==void 0,"Missing field '".concat(c.join("."),"' while extracting keyFields from ").concat(JSON.stringify(e))):ht(l!==void 0,2),l});return"".concat(n.typename,":").concat(JSON.stringify(a))})}function Ar(i){var t=ma(i);return t.keyArgsFn||(t.keyArgsFn=function(e,n){var o=n.field,a=n.variables,c=n.fieldName,l=ya(i,function(s){var r=s[0],g=r.charAt(0);if(g==="@"){if(o&&Se(o.directives)){var L=r.slice(1),m=o.directives.find(function(T){return T.name.value===L}),C=m&&Fi(m,a);return C&&fn(C,s.slice(1))}return}if(g==="$"){var A=r.slice(1);if(a&&ee.call(a,A)){var w=s.slice(0);return w[0]=A,fn(a,w)}return}if(e)return fn(e,s)}),d=JSON.stringify(l);return(e||d!=="{}")&&(c+=":"+d),c})}function ya(i,t){var e=new Ye;return Js(i).reduce(function(n,o){var a,c=t(o);if(c!==void 0){for(var l=o.length-1;l>=0;--l)c=(a={},a[o[l]]=c,a);n=e.merge(n,c)}return n},Object.create(null))}function Js(i){var t=ma(i);if(!t.paths){var e=t.paths=[],n=[];i.forEach(function(o,a){Jt(o)?(Js(o).forEach(function(c){return e.push(n.concat(c))}),n.length=0):(n.push(o),Jt(i[a+1])||(e.push(n.slice(0)),n.length=0))})}return t.paths}function Hs(i,t){return i[t]}function fn(i,t,e){return e=e||Hs,Xs(t.reduce(function n(o,a){return Jt(o)?o.map(function(c){return n(c,a)}):o&&e(o,a)},i))}function Xs(i){return Zt(i)?Jt(i)?i.map(Xs):ya(Object.keys(i).sort(),function(t){return fn(i,t)}):i}Ko.setStringify(Je);function Io(i){return i.args!==void 0?i.args:i.field?Fi(i.field,i.variables):null}var Gf=function(){},Sr=function(i,t){return t.fieldName},xr=function(i,t,e){var n=e.mergeObjects;return n(i,t)},Or=function(i,t){return t},Wf=function(){function i(t){this.config=t,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=G({dataIdFromObject:$s},t),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),t.possibleTypes&&this.addPossibleTypes(t.possibleTypes),t.typePolicies&&this.addTypePolicies(t.typePolicies)}return i.prototype.identify=function(t,e){var n,o=this,a=e&&(e.typename||((n=e.storeObject)===null||n===void 0?void 0:n.__typename))||t.__typename;if(a===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var c=e&&e.storeObject||t,l=G(G({},e),{typename:a,storeObject:c,readField:e&&e.readField||function(){var L=La(arguments,c);return o.readField(L,{store:o.cache.data,variables:L.variables})}}),d,s=a&&this.getTypePolicy(a),r=s&&s.keyFn||this.config.dataIdFromObject;r;){var g=r(t,l);if(Jt(g))r=Cr(g);else{d=g;break}}return d=d?String(d):void 0,l.keyObject?[d,l.keyObject]:[d]},i.prototype.addTypePolicies=function(t){var e=this;Object.keys(t).forEach(function(n){var o=t[n],a=o.queryType,c=o.mutationType,l=o.subscriptionType,d=hn(o,["queryType","mutationType","subscriptionType"]);a&&e.setRootTypename("Query",n),c&&e.setRootTypename("Mutation",n),l&&e.setRootTypename("Subscription",n),ee.call(e.toBeAdded,n)?e.toBeAdded[n].push(d):e.toBeAdded[n]=[d]})},i.prototype.updateTypePolicy=function(t,e){var n=this,o=this.getTypePolicy(t),a=e.keyFields,c=e.fields;function l(d,s){d.merge=typeof s=="function"?s:s===!0?xr:s===!1?Or:d.merge}l(o,e.merge),o.keyFn=a===!1?Gf:Jt(a)?Cr(a):typeof a=="function"?a:o.keyFn,c&&Object.keys(c).forEach(function(d){var s=n.getFieldPolicy(t,d,!0),r=c[d];if(typeof r=="function")s.read=r;else{var g=r.keyArgs,L=r.read,m=r.merge;s.keyFn=g===!1?Sr:Jt(g)?Ar(g):typeof g=="function"?g:s.keyFn,typeof L=="function"&&(s.read=L),l(s,m)}s.read&&s.merge&&(s.keyFn=s.keyFn||Sr)})},i.prototype.setRootTypename=function(t,e){e===void 0&&(e=t);var n="ROOT_"+t.toUpperCase(),o=this.rootTypenamesById[n];e!==o&&(__DEV__?ht(!o||o===t,"Cannot change root ".concat(t," __typename more than once")):ht(!o||o===t,3),o&&delete this.rootIdsByTypename[o],this.rootIdsByTypename[e]=n,this.rootTypenamesById[n]=e)},i.prototype.addPossibleTypes=function(t){var e=this;this.usingPossibleTypes=!0,Object.keys(t).forEach(function(n){e.getSupertypeSet(n,!0),t[n].forEach(function(o){e.getSupertypeSet(o,!0).add(n);var a=o.match(Gs);(!a||a[0]!==o)&&e.fuzzySubtypes.set(o,new RegExp(o))})})},i.prototype.getTypePolicy=function(t){var e=this;if(!ee.call(this.typePolicies,t)){var n=this.typePolicies[t]=Object.create(null);n.fields=Object.create(null);var o=this.supertypeMap.get(t);o&&o.size&&o.forEach(function(c){var l=e.getTypePolicy(c),d=l.fields,s=hn(l,["fields"]);Object.assign(n,s),Object.assign(n.fields,d)})}var a=this.toBeAdded[t];return a&&a.length&&a.splice(0).forEach(function(c){e.updateTypePolicy(t,c)}),this.typePolicies[t]},i.prototype.getFieldPolicy=function(t,e,n){if(t){var o=this.getTypePolicy(t).fields;return o[e]||n&&(o[e]=Object.create(null))}},i.prototype.getSupertypeSet=function(t,e){var n=this.supertypeMap.get(t);return!n&&e&&this.supertypeMap.set(t,n=new Set),n},i.prototype.fragmentMatches=function(t,e,n,o){var a=this;if(!t.typeCondition)return!0;if(!e)return!1;var c=t.typeCondition.name.value;if(e===c)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(c))for(var l=this.getSupertypeSet(e,!0),d=[l],s=function(C){var A=a.getSupertypeSet(C,!1);A&&A.size&&d.indexOf(A)<0&&d.push(A)},r=!!(n&&this.fuzzySubtypes.size),g=!1,L=0;L<d.length;++L){var m=d[L];if(m.has(c))return l.has(c)||(g&&__DEV__&&ht.warn("Inferring subtype ".concat(e," of supertype ").concat(c)),l.add(c)),!0;m.forEach(s),r&&L===d.length-1&&Ao(t.selectionSet,n,o)&&(r=!1,g=!0,this.fuzzySubtypes.forEach(function(C,A){var w=e.match(C);w&&w[0]===e&&s(A)}))}return!1},i.prototype.hasKeyArgs=function(t,e){var n=this.getFieldPolicy(t,e,!1);return!!(n&&n.keyFn)},i.prototype.getStoreFieldName=function(t){var e=t.typename,n=t.fieldName,o=this.getFieldPolicy(e,n,!1),a,c=o&&o.keyFn;if(c&&e)for(var l={typename:e,fieldName:n,field:t.field||null,variables:t.variables},d=Io(t);c;){var s=c(d,l);if(Jt(s))c=Ar(s);else{a=s||n;break}}return a===void 0&&(a=t.field?nd(t.field,t.variables):Ko(n,Io(t))),a===!1?n:n===Ve(a)?a:n+":"+a},i.prototype.readField=function(t,e){var n=t.from;if(!!n){var o=t.field||t.fieldName;if(!!o){if(t.typename===void 0){var a=e.store.getFieldValue(n,"__typename");a&&(t.typename=a)}var c=this.getStoreFieldName(t),l=Ve(c),d=e.store.getFieldValue(n,c),s=this.getFieldPolicy(t.typename,l,!1),r=s&&s.read;if(r){var g=Ir(this,n,t,e,e.store.getStorage(jt(n)?n.__ref:n,c));return ga.withValue(this.cache,r,[d,g])}return d}}},i.prototype.getReadFunction=function(t,e){var n=this.getFieldPolicy(t,e,!1);return n&&n.read},i.prototype.getMergeFunction=function(t,e,n){var o=this.getFieldPolicy(t,e,!1),a=o&&o.merge;return!a&&n&&(o=this.getTypePolicy(n),a=o&&o.merge),a},i.prototype.runMergeFunction=function(t,e,n,o,a){var c=n.field,l=n.typename,d=n.merge;return d===xr?Ys(o.store)(t,e):d===Or?e:(o.overwrite&&(t=void 0),d(t,e,Ir(this,void 0,{typename:l,fieldName:c.name.value,field:c,variables:o.variables},o,a||Object.create(null))))},i}();function Ir(i,t,e,n,o){var a=i.getStoreFieldName(e),c=Ve(a),l=e.variables||n.variables,d=n.store,s=d.toReference,r=d.canRead;return{args:Io(e),field:e.field||null,fieldName:c,storeFieldName:a,variables:l,isReference:jt,toReference:s,storage:o,cache:i.cache,canRead:r,readField:function(){return i.readField(La(arguments,t,l),n)},mergeObjects:Ys(n.store)}}function La(i,t,e){var n=i[0],o=i[1],a=i.length,c;return typeof n=="string"?c={fieldName:n,from:a>1?o:t}:(c=G({},n),ee.call(c,"from")||(c.from=t)),__DEV__&&c.from===void 0&&__DEV__&&ht.warn("Undefined 'from' passed to readField with arguments ".concat(Sd(Array.from(i)))),c.variables===void 0&&(c.variables=e),c}function Ys(i){return function(e,n){if(Jt(e)||Jt(n))throw __DEV__?new Dt("Cannot automatically merge arrays"):new Dt(4);if(Zt(e)&&Zt(n)){var o=i.getFieldValue(e,"__typename"),a=i.getFieldValue(n,"__typename"),c=o&&a&&o!==a;if(c)return n;if(jt(e)&&ln(n))return i.merge(e.__ref,n),e;if(ln(e)&&jt(n))return i.merge(e,n.__ref),n;if(ln(e)&&ln(n))return G(G({},e),n)}return n}}function Hi(i,t,e){var n="".concat(t).concat(e),o=i.flavors.get(n);return o||i.flavors.set(n,o=i.clientOnly===t&&i.deferred===e?i:G(G({},i),{clientOnly:t,deferred:e})),o}var Zf=function(){function i(t,e,n){this.cache=t,this.reader=e,this.fragments=n}return i.prototype.writeToStore=function(t,e){var n=this,o=e.query,a=e.result,c=e.dataId,l=e.variables,d=e.overwrite,s=$n(o),r=Tf();l=G(G({},na(s)),l);var g=G(G({store:t,written:Object.create(null),merge:function(m,C){return r.merge(m,C)},variables:l,varString:Je(l)},Ws(o,this.fragments)),{overwrite:!!d,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),L=this.processSelectionSet({result:a||Object.create(null),dataId:c,selectionSet:s.selectionSet,mergeTree:{map:new Map},context:g});if(!jt(L))throw __DEV__?new Dt("Could not identify object ".concat(JSON.stringify(a))):new Dt(7);return g.incomingById.forEach(function(m,C){var A=m.storeObject,w=m.mergeTree,T=m.fieldNodeSet,F=dn(C);if(w&&w.map.size){var R=n.applyMerges(w,F,A,g);if(jt(R))return;A=R}if(__DEV__&&!g.overwrite){var q=Object.create(null);T.forEach(function(f){f.selectionSet&&(q[f.name.value]=!0)});var Z=function(f){return q[Ve(f)]===!0},E=function(f){var y=w&&w.map.get(f);return Boolean(y&&y.info&&y.info.merge)};Object.keys(A).forEach(function(f){Z(f)&&!E(f)&&Jf(F,A,f,g.store)})}t.merge(C,A)}),t.retain(L.__ref),L},i.prototype.processSelectionSet=function(t){var e=this,n=t.dataId,o=t.result,a=t.selectionSet,c=t.context,l=t.mergeTree,d=this.cache.policies,s=Object.create(null),r=n&&d.rootTypenamesById[n]||_o(o,a,c.fragmentMap)||n&&c.store.get(n,"__typename");typeof r=="string"&&(s.__typename=r);var g=function(){var R=La(arguments,s,c.variables);if(jt(R.from)){var q=c.incomingById.get(R.from.__ref);if(q){var Z=d.readField(G(G({},R),{from:q.storeObject}),c);if(Z!==void 0)return Z}}return d.readField(R,c)},L=new Set;this.flattenFields(a,o,c,r).forEach(function(R,q){var Z,E=Xe(q),f=o[E];if(L.add(q),f!==void 0){var y=d.getStoreFieldName({typename:r,fieldName:q.name.value,field:q,variables:R.variables}),I=Br(l,y),k=e.processFieldValue(f,q,q.selectionSet?Hi(R,!1,!1):R,I),O=void 0;q.selectionSet&&(jt(k)||ln(k))&&(O=g("__typename",k));var x=d.getMergeFunction(r,q.name.value,O);x?I.info={field:q,typename:r,merge:x}:Pr(l,y),s=R.merge(s,(Z={},Z[y]=k,Z))}else __DEV__&&!R.clientOnly&&!R.deferred&&!oa.added(q)&&!d.getReadFunction(r,q.name.value)&&__DEV__&&ht.error("Missing field '".concat(Xe(q),"' while writing result ").concat(JSON.stringify(o,null,2)).substring(0,1e3))});try{var m=d.identify(o,{typename:r,selectionSet:a,fragmentMap:c.fragmentMap,storeObject:s,readField:g}),C=m[0],A=m[1];n=n||C,A&&(s=c.merge(s,A))}catch(R){if(!n)throw R}if(typeof n=="string"){var w=dn(n),T=c.written[n]||(c.written[n]=[]);if(T.indexOf(a)>=0||(T.push(a),this.reader&&this.reader.isFresh(o,w,a,c)))return w;var F=c.incomingById.get(n);return F?(F.storeObject=c.merge(F.storeObject,s),F.mergeTree=Bo(F.mergeTree,l),L.forEach(function(R){return F.fieldNodeSet.add(R)})):c.incomingById.set(n,{storeObject:s,mergeTree:hi(l)?void 0:l,fieldNodeSet:L}),w}return s},i.prototype.processFieldValue=function(t,e,n,o){var a=this;return!e.selectionSet||t===null?__DEV__?ua(t):t:Jt(t)?t.map(function(c,l){var d=a.processFieldValue(c,e,n,Br(o,l));return Pr(o,l),d}):this.processSelectionSet({result:t,selectionSet:e.selectionSet,context:n,mergeTree:o})},i.prototype.flattenFields=function(t,e,n,o){o===void 0&&(o=_o(e,t,n.fragmentMap));var a=new Map,c=this.cache.policies,l=new Qn(!1);return function d(s,r){var g=l.lookup(s,r.clientOnly,r.deferred);g.visited||(g.visited=!0,s.selections.forEach(function(L){if(!!Ei(L,n.variables)){var m=r.clientOnly,C=r.deferred;if(!(m&&C)&&Se(L.directives)&&L.directives.forEach(function(T){var F=T.name.value;if(F==="client"&&(m=!0),F==="defer"){var R=Fi(T,n.variables);(!R||R.if!==!1)&&(C=!0)}}),Te(L)){var A=a.get(L);A&&(m=m&&A.clientOnly,C=C&&A.deferred),a.set(L,Hi(n,m,C))}else{var w=Yo(L,n.lookupFragment);if(!w&&L.kind===St.FRAGMENT_SPREAD)throw __DEV__?new Dt("No fragment named ".concat(L.name.value)):new Dt(8);w&&c.fragmentMatches(w,o,e,n.variables)&&d(w.selectionSet,Hi(n,m,C))}}}))}(t,n),a},i.prototype.applyMerges=function(t,e,n,o,a){var c,l=this;if(t.map.size&&!jt(n)){var d=!Jt(n)&&(jt(e)||ln(e))?e:void 0,s=n;d&&!a&&(a=[jt(d)?d.__ref:d]);var r,g=function(L,m){return Jt(L)?typeof m=="number"?L[m]:void 0:o.store.getFieldValue(L,String(m))};t.map.forEach(function(L,m){var C=g(d,m),A=g(s,m);if(A!==void 0){a&&a.push(m);var w=l.applyMerges(L,C,A,o,a);w!==A&&(r=r||new Map,r.set(m,w)),a&&ht(a.pop()===m)}}),r&&(n=Jt(s)?s.slice(0):G({},s),r.forEach(function(L,m){n[m]=L}))}return t.info?this.cache.policies.runMergeFunction(e,n,t.info,o,a&&(c=o.store).getStorage.apply(c,a)):n},i}(),Ks=[];function Br(i,t){var e=i.map;return e.has(t)||e.set(t,Ks.pop()||{map:new Map}),e.get(t)}function Bo(i,t){if(i===t||!t||hi(t))return i;if(!i||hi(i))return t;var e=i.info&&t.info?G(G({},i.info),t.info):i.info||t.info,n=i.map.size&&t.map.size,o=n?new Map:i.map.size?i.map:t.map,a={info:e,map:o};if(n){var c=new Set(t.map.keys());i.map.forEach(function(l,d){a.map.set(d,Bo(l,t.map.get(d))),c.delete(d)}),c.forEach(function(l){a.map.set(l,Bo(t.map.get(l),i.map.get(l)))})}return a}function hi(i){return!i||!(i.info||i.map.size)}function Pr(i,t){var e=i.map,n=e.get(t);n&&hi(n)&&(Ks.push(n),e.delete(t))}var Tr=new Set;function Jf(i,t,e,n){var o=function(g){var L=n.getFieldValue(g,e);return typeof L=="object"&&L},a=o(i);if(!!a){var c=o(t);if(!!c&&!jt(a)&&!ie(a,c)&&!Object.keys(a).every(function(g){return n.getFieldValue(c,g)!==void 0})){var l=n.getFieldValue(i,"__typename")||n.getFieldValue(t,"__typename"),d=Ve(e),s="".concat(l,".").concat(d);if(!Tr.has(s)){Tr.add(s);var r=[];!Jt(a)&&!Jt(c)&&[a,c].forEach(function(g){var L=n.getFieldValue(g,"__typename");typeof L=="string"&&!r.includes(L)&&r.push(L)}),__DEV__&&ht.warn("Cache data may be lost when replacing the ".concat(d," field of a ").concat(l,` object.

To address this problem (which is not a bug in Apollo Client), `).concat(r.length?"either ensure all objects of type "+r.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(s,` field, so InMemoryCache can safely merge these objects:

  existing: `).concat(JSON.stringify(a).slice(0,1e3),`
  incoming: `).concat(JSON.stringify(c).slice(0,1e3),`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`))}}}}var Hf=function(i){Ee(t,i);function t(e){e===void 0&&(e={});var n=i.call(this)||this;return n.watches=new Set,n.typenameDocumentCache=new Map,n.makeVar=Vf,n.txCount=0,n.config=Bf(e),n.addTypename=!!n.config.addTypename,n.policies=new Wf({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.init(),n}return t.prototype.init=function(){var e=this.data=new Dn.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=e.stump,this.resetResultCache()},t.prototype.resetResultCache=function(e){var n=this,o=this.storeReader,a=this.config.fragments;this.storeWriter=new Zf(this,this.storeReader=new Rf({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:Qs(this.config),canon:e?void 0:o&&o.canon,fragments:a}),a),this.maybeBroadcastWatch=fi(function(c,l){return n.broadcastWatch(c,l)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(c){var l=c.optimistic?n.optimisticData:n.data;if(qn(l)){var d=c.optimistic,s=c.id,r=c.variables;return l.makeCacheKey(c.query,c.callback,Je({optimistic:d,id:s,variables:r}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(c){return c.resetCaching()})},t.prototype.restore=function(e){return this.init(),e&&this.data.replace(e),this},t.prototype.extract=function(e){return e===void 0&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var n=e.returnPartialData,o=n===void 0?!1:n;try{return this.storeReader.diffQueryAgainstStore(G(G({},e),{store:e.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:o})).result||null}catch(a){if(a instanceof Us)return null;throw a}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore(this.data,e)}finally{!--this.txCount&&e.broadcast!==!1&&this.broadcastWatches()}},t.prototype.modify=function(e){if(ee.call(e,"id")&&!e.id)return!1;var n=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,n.modify(e.id||"ROOT_QUERY",e.fields)}finally{!--this.txCount&&e.broadcast!==!1&&this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore(G(G({},e),{store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(e){var n=this;return this.watches.size||$f(this),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){n.watches.delete(e)&&!n.watches.size&&Er(n),n.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(e){Je.reset();var n=this.optimisticData.gc();return e&&!this.txCount&&(e.resetResultCache?this.resetResultCache(e.resetResultIdentities):e.resetResultIdentities&&this.storeReader.resetCanon()),n},t.prototype.retain=function(e,n){return(n?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,n){return(n?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){if(jt(e))return e.__ref;try{return this.policies.identify(e)[0]}catch(n){__DEV__&&ht.warn(n)}},t.prototype.evict=function(e){if(!e.id){if(ee.call(e,"id"))return!1;e=G(G({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e,this.data)}finally{!--this.txCount&&e.broadcast!==!1&&this.broadcastWatches()}},t.prototype.reset=function(e){var n=this;return this.init(),Je.reset(),e&&e.discardWatches?(this.watches.forEach(function(o){return n.maybeBroadcastWatch.forget(o)}),this.watches.clear(),Er(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var n=this.optimisticData.removeLayer(e);n!==this.optimisticData&&(this.optimisticData=n,this.broadcastWatches())},t.prototype.batch=function(e){var n=this,o=e.update,a=e.optimistic,c=a===void 0?!0:a,l=e.removeOptimistic,d=e.onWatchUpdated,s,r=function(L){var m=n,C=m.data,A=m.optimisticData;++n.txCount,L&&(n.data=n.optimisticData=L);try{return s=o(n)}finally{--n.txCount,n.data=C,n.optimisticData=A}},g=new Set;return d&&!this.txCount&&this.broadcastWatches(G(G({},e),{onWatchUpdated:function(L){return g.add(L),!1}})),typeof c=="string"?this.optimisticData=this.optimisticData.addLayer(c,r):c===!1?r(this.data):r(),typeof l=="string"&&(this.optimisticData=this.optimisticData.removeLayer(l)),d&&g.size?(this.broadcastWatches(G(G({},e),{onWatchUpdated:function(L,m){var C=d.call(this,L,m);return C!==!1&&g.delete(L),C}})),g.size&&g.forEach(function(L){return n.maybeBroadcastWatch.dirty(L)})):this.broadcastWatches(e),s},t.prototype.performTransaction=function(e,n){return this.batch({update:e,optimistic:n||n!==null})},t.prototype.transformDocument=function(e){if(this.addTypename){var n=this.typenameDocumentCache.get(e);return n||(n=oa(e),this.typenameDocumentCache.set(e,n),this.typenameDocumentCache.set(n,n)),n}return e},t.prototype.transformForLink=function(e){var n=this.config.fragments;return n?n.transform(e):e},t.prototype.broadcastWatches=function(e){var n=this;this.txCount||this.watches.forEach(function(o){return n.maybeBroadcastWatch(o,e)})},t.prototype.broadcastWatch=function(e,n){var o=e.lastDiff,a=this.diff(e);n&&(e.optimistic&&typeof n.optimistic=="string"&&(a.fromOptimisticTransaction=!0),n.onWatchUpdated&&n.onWatchUpdated.call(this,e,a,o)===!1)||(!o||!ie(o.result,a.result))&&e.callback(e.lastDiff=a,o)},t}(If);function Xf(i){return i.hasOwnProperty("graphQLErrors")}var Yf=function(i){var t="";if(Se(i.graphQLErrors)||Se(i.clientErrors)){var e=(i.graphQLErrors||[]).concat(i.clientErrors||[]);e.forEach(function(n){var o=n?n.message:"Error message not found.";t+="".concat(o,`
`)})}return i.networkError&&(t+="".concat(i.networkError.message,`
`)),t=t.replace(/\n$/,""),t},on=function(i){Ee(t,i);function t(e){var n=e.graphQLErrors,o=e.clientErrors,a=e.networkError,c=e.errorMessage,l=e.extraInfo,d=i.call(this,c)||this;return d.graphQLErrors=n||[],d.clientErrors=o||[],d.networkError=a||null,d.message=c||Yf(d),d.extraInfo=l,d.__proto__=t.prototype,d}return t}(Error),Qt;(function(i){i[i.loading=1]="loading",i[i.setVariables=2]="setVariables",i[i.fetchMore=3]="fetchMore",i[i.refetch=4]="refetch",i[i.poll=6]="poll",i[i.ready=7]="ready",i[i.error=8]="error"})(Qt||(Qt={}));function zn(i){return i?i<7:!1}var Kf=Object.assign,th=Object.hasOwnProperty,Po=function(i){Ee(t,i);function t(e){var n=e.queryManager,o=e.queryInfo,a=e.options,c=i.call(this,function(w){try{var T=w._subscription._observer;T&&!T.error&&(T.error=eh)}catch{}var F=!c.observers.size;c.observers.add(w);var R=c.last;return R&&R.error?w.error&&w.error(R.error):R&&R.result&&w.next&&w.next(R.result),F&&c.reobserve().catch(function(){}),function(){c.observers.delete(w)&&!c.observers.size&&c.tearDownQuery()}})||this;c.observers=new Set,c.subscriptions=new Set,c.queryInfo=o,c.queryManager=n,c.isTornDown=!1;var l=n.defaultOptions.watchQuery,d=l===void 0?{}:l,s=d.fetchPolicy,r=s===void 0?"cache-first":s,g=a.fetchPolicy,L=g===void 0?r:g,m=a.initialFetchPolicy,C=m===void 0?L==="standby"?r:L:m;c.options=G(G({},a),{initialFetchPolicy:C,fetchPolicy:L}),c.queryId=o.queryId||n.generateQueryId();var A=$n(c.query);return c.queryName=A&&A.name&&A.name.value,c}return Object.defineProperty(t.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return new Promise(function(n,o){var a={next:function(l){n(l),e.observers.delete(a),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout(function(){c.unsubscribe()},0)},error:o},c=e.subscribe(a)})},t.prototype.getCurrentResult=function(e){e===void 0&&(e=!0);var n=this.getLastResult(!0),o=this.queryInfo.networkStatus||n&&n.networkStatus||Qt.ready,a=G(G({},n),{loading:zn(o),networkStatus:o}),c=this.options.fetchPolicy,l=c===void 0?"cache-first":c;if(!(l==="network-only"||l==="no-cache"||l==="standby"||this.queryManager.transform(this.options.query).hasForcedResolvers)){var d=this.queryInfo.getDiff();(d.complete||this.options.returnPartialData)&&(a.data=d.result),ie(a.data,{})&&(a.data=void 0),d.complete?(delete a.partial,d.complete&&a.networkStatus===Qt.loading&&(l==="cache-first"||l==="cache-only")&&(a.networkStatus=Qt.ready,a.loading=!1)):a.partial=!0,__DEV__&&!d.complete&&!this.options.partialRefetch&&!a.loading&&!a.data&&!a.error&&ec(d.missing)}return e&&this.updateLastResult(a),a},t.prototype.isDifferentFromLastResult=function(e){return!this.last||!ie(this.last.result,e)},t.prototype.getLast=function(e,n){var o=this.last;if(o&&o[e]&&(!n||ie(o.variables,this.variables)))return o[e]},t.prototype.getLastResult=function(e){return this.getLast("result",e)},t.prototype.getLastError=function(e){return this.getLast("error",e)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var n,o={pollInterval:0},a=this.options.fetchPolicy;if(a==="cache-and-network"?o.fetchPolicy=a:a==="no-cache"?o.fetchPolicy="no-cache":o.fetchPolicy="network-only",__DEV__&&e&&th.call(e,"variables")){var c=bs(this.query),l=c.variableDefinitions;(!l||!l.some(function(d){return d.variable.name.value==="variables"}))&&__DEV__&&ht.warn("Called refetch(".concat(JSON.stringify(e),") for query ").concat(((n=c.name)===null||n===void 0?void 0:n.value)||JSON.stringify(c),`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`))}return e&&!ie(this.options.variables,e)&&(o.variables=this.options.variables=G(G({},this.options.variables),e)),this.queryInfo.resetLastWrite(),this.reobserve(o,Qt.refetch)},t.prototype.fetchMore=function(e){var n=this,o=G(G({},e.query?e:G(G(G(G({},this.options),{query:this.query}),e),{variables:G(G({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"}),a=this.queryManager.generateQueryId(),c=this.queryInfo,l=c.networkStatus;c.networkStatus=Qt.fetchMore,o.notifyOnNetworkStatusChange&&this.observe();var d=new Set;return this.queryManager.fetchQuery(a,o,Qt.fetchMore).then(function(s){return n.queryManager.removeQuery(a),c.networkStatus===Qt.fetchMore&&(c.networkStatus=l),n.queryManager.cache.batch({update:function(r){var g=e.updateQuery;g?r.updateQuery({query:n.query,variables:n.variables,returnPartialData:!0,optimistic:!1},function(L){return g(L,{fetchMoreResult:s.data,variables:o.variables})}):r.writeQuery({query:o.query,variables:o.variables,data:s.data})},onWatchUpdated:function(r){d.add(r.query)}}),s}).finally(function(){d.has(n.query)||tc(n)})},t.prototype.subscribeToMore=function(e){var n=this,o=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(a){var c=e.updateQuery;c&&n.updateQuery(function(l,d){var s=d.variables;return c(l,{subscriptionData:a,variables:s})})},error:function(a){if(e.onError){e.onError(a);return}__DEV__&&ht.error("Unhandled GraphQL subscription error",a)}});return this.subscriptions.add(o),function(){n.subscriptions.delete(o)&&o.unsubscribe()}},t.prototype.setOptions=function(e){return this.reobserve(e)},t.prototype.setVariables=function(e){return ie(this.variables,e)?this.observers.size?this.result():Promise.resolve():(this.options.variables=e,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:e},Qt.setVariables):Promise.resolve())},t.prototype.updateQuery=function(e){var n=this.queryManager,o=n.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,a=e(o,{variables:this.variables});a&&(n.cache.writeQuery({query:this.options.query,data:a,variables:this.variables}),n.broadcastQueries())},t.prototype.startPolling=function(e){this.options.pollInterval=e,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(e,n){if(n.nextFetchPolicy){var o=n.fetchPolicy,a=o===void 0?"cache-first":o,c=n.initialFetchPolicy,l=c===void 0?a:c;a==="standby"||(typeof n.nextFetchPolicy=="function"?n.fetchPolicy=n.nextFetchPolicy(a,{reason:e,options:n,observable:this,initialFetchPolicy:l}):e==="variables-changed"?n.fetchPolicy=l:n.fetchPolicy=n.nextFetchPolicy)}return n.fetchPolicy},t.prototype.fetch=function(e,n){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,e,n)},t.prototype.updatePolling=function(){var e=this;if(!this.queryManager.ssrMode){var n=this,o=n.pollingInfo,a=n.options.pollInterval;if(!a){o&&(clearTimeout(o.timeout),delete this.pollingInfo);return}if(!(o&&o.interval===a)){__DEV__?ht(a,"Attempted to start a polling query without a polling interval."):ht(a,12);var c=o||(this.pollingInfo={});c.interval=a;var l=function(){e.pollingInfo&&(zn(e.queryInfo.networkStatus)?d():e.reobserve({fetchPolicy:e.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},Qt.poll).then(d,d))},d=function(){var s=e.pollingInfo;s&&(clearTimeout(s.timeout),s.timeout=setTimeout(l,s.interval))};d()}}},t.prototype.updateLastResult=function(e,n){return n===void 0&&(n=this.variables),this.last=G(G({},this.last),{result:this.queryManager.assumeImmutableResults?e:ua(e),variables:n}),Se(e.errors)||delete this.last.error,this.last},t.prototype.reobserve=function(e,n){var o=this;this.isTornDown=!1;var a=n===Qt.refetch||n===Qt.fetchMore||n===Qt.poll,c=this.options.variables,l=this.options.fetchPolicy,d=Si(this.options,e||{}),s=a?d:Kf(this.options,d);a||(this.updatePolling(),e&&e.variables&&!ie(e.variables,c)&&s.fetchPolicy!=="standby"&&s.fetchPolicy===l&&(this.applyNextFetchPolicy("variables-changed",s),n===void 0&&(n=Qt.setVariables)));var r=s.variables&&G({},s.variables),g=this.fetch(s,n),L={next:function(m){o.reportResult(m,r)},error:function(m){o.reportError(m,r)}};return a||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=g,this.observer=L),g.addObserver(L),g.promise},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(e,n){var o=this.getLastError();(o||this.isDifferentFromLastResult(e))&&((o||!e.partial||this.options.returnPartialData)&&this.updateLastResult(e,n),Mn(this.observers,"next",e))},t.prototype.reportError=function(e,n){var o=G(G({},this.getLastResult()),{error:e,errors:e.graphQLErrors,networkStatus:Qt.error,loading:!1});this.updateLastResult(o,n),Mn(this.observers,"error",this.last.error=e)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(Gt);xs(Po);function tc(i){var t=i.options,e=t.fetchPolicy,n=t.nextFetchPolicy;return e==="cache-and-network"||e==="network-only"?i.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=n,typeof n=="function"?n.apply(this,arguments):e}}):i.reobserve()}function eh(i){__DEV__&&ht.error("Unhandled error",i.message,i.stack)}function ec(i){__DEV__&&i&&__DEV__&&ht.debug("Missing cache result fields: ".concat(JSON.stringify(i)),i)}var nc=function(){function i(t){var e=t.cache,n=t.client,o=t.resolvers,a=t.fragmentMatcher;this.cache=e,n&&(this.client=n),o&&this.addResolvers(o),a&&this.setFragmentMatcher(a)}return i.prototype.addResolvers=function(t){var e=this;this.resolvers=this.resolvers||{},Array.isArray(t)?t.forEach(function(n){e.resolvers=Xa(e.resolvers,n)}):this.resolvers=Xa(this.resolvers,t)},i.prototype.setResolvers=function(t){this.resolvers={},this.addResolvers(t)},i.prototype.getResolvers=function(){return this.resolvers||{}},i.prototype.runResolvers=function(t){var e=t.document,n=t.remoteResult,o=t.context,a=t.variables,c=t.onlyRunForcedResolvers,l=c===void 0?!1:c;return De(this,void 0,void 0,function(){return ze(this,function(d){return e?[2,this.resolveDocument(e,n.data,o,a,this.fragmentMatcher,l).then(function(s){return G(G({},n),{data:s.result})})]:[2,n]})})},i.prototype.setFragmentMatcher=function(t){this.fragmentMatcher=t},i.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},i.prototype.clientQuery=function(t){return Ho(["client"],t)&&this.resolvers?t:null},i.prototype.serverQuery=function(t){return fd(t)},i.prototype.prepareContext=function(t){var e=this.cache;return G(G({},t),{cache:e,getCacheKey:function(n){return e.identify(n)}})},i.prototype.addExportedVariables=function(t,e,n){return e===void 0&&(e={}),n===void 0&&(n={}),De(this,void 0,void 0,function(){return ze(this,function(o){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,e)||{},this.prepareContext(n),e).then(function(a){return G(G({},e),a.exportedVariables)})]:[2,G({},e)]})})},i.prototype.shouldForceResolvers=function(t){var e=!1;return Oe(t,{Directive:{enter:function(n){if(n.name.value==="client"&&n.arguments&&(e=n.arguments.some(function(o){return o.name.value==="always"&&o.value.kind==="BooleanValue"&&o.value.value===!0}),e))return Jo}}}),e},i.prototype.buildRootValueFromCache=function(t,e){return this.cache.diff({query:dd(t),variables:e,returnPartialData:!0,optimistic:!1}).result},i.prototype.resolveDocument=function(t,e,n,o,a,c){return n===void 0&&(n={}),o===void 0&&(o={}),a===void 0&&(a=function(){return!0}),c===void 0&&(c=!1),De(this,void 0,void 0,function(){var l,d,s,r,g,L,m,C,A;return ze(this,function(w){return l=ea(t),d=ta(t),s=Xo(d),r=l.operation,g=r?r.charAt(0).toUpperCase()+r.slice(1):"Query",L=this,m=L.cache,C=L.client,A={fragmentMap:s,context:G(G({},n),{cache:m,client:C}),variables:o,fragmentMatcher:a,defaultOperationType:g,exportedVariables:{},onlyRunForcedResolvers:c},[2,this.resolveSelectionSet(l.selectionSet,e,A).then(function(T){return{result:T,exportedVariables:A.exportedVariables}})]})})},i.prototype.resolveSelectionSet=function(t,e,n){return De(this,void 0,void 0,function(){var o,a,c,l,d,s=this;return ze(this,function(r){return o=n.fragmentMap,a=n.context,c=n.variables,l=[e],d=function(g){return De(s,void 0,void 0,function(){var L,m;return ze(this,function(C){return Ei(g,c)?Te(g)?[2,this.resolveField(g,e,n).then(function(A){var w;typeof A<"u"&&l.push((w={},w[Xe(g)]=A,w))})]:(Ls(g)?L=g:(L=o[g.name.value],__DEV__?ht(L,"No fragment named ".concat(g.name.value)):ht(L,11)),L&&L.typeCondition&&(m=L.typeCondition.name.value,n.fragmentMatcher(e,m,a))?[2,this.resolveSelectionSet(L.selectionSet,e,n).then(function(A){l.push(A)})]:[2]):[2]})})},[2,Promise.all(t.selections.map(d)).then(function(){return aa(l)})]})})},i.prototype.resolveField=function(t,e,n){return De(this,void 0,void 0,function(){var o,a,c,l,d,s,r,g,L,m=this;return ze(this,function(C){return o=n.variables,a=t.name.value,c=Xe(t),l=a!==c,d=e[c]||e[a],s=Promise.resolve(d),(!n.onlyRunForcedResolvers||this.shouldForceResolvers(t))&&(r=e.__typename||n.defaultOperationType,g=this.resolvers&&this.resolvers[r],g&&(L=g[l?a:c],L&&(s=Promise.resolve(ga.withValue(this.cache,L,[e,Fi(t,o),n.context,{field:t,fragmentMap:n.fragmentMap}]))))),[2,s.then(function(A){if(A===void 0&&(A=d),t.directives&&t.directives.forEach(function(w){w.name.value==="export"&&w.arguments&&w.arguments.forEach(function(T){T.name.value==="as"&&T.value.kind==="StringValue"&&(n.exportedVariables[T.value.value]=A)})}),!t.selectionSet||A==null)return A;if(Array.isArray(A))return m.resolveSubSelectedArray(t,A,n);if(t.selectionSet)return m.resolveSelectionSet(t.selectionSet,A,n)})]})})},i.prototype.resolveSubSelectedArray=function(t,e,n){var o=this;return Promise.all(e.map(function(a){if(a===null)return null;if(Array.isArray(a))return o.resolveSubSelectedArray(t,a,n);if(t.selectionSet)return o.resolveSelectionSet(t.selectionSet,a,n)}))},i}(),un=new(tn?WeakMap:Map);function Xi(i,t){var e=i[t];typeof e=="function"&&(i[t]=function(){return un.set(i,(un.get(i)+1)%1e15),e.apply(this,arguments)})}function Mr(i){i.notifyTimeout&&(clearTimeout(i.notifyTimeout),i.notifyTimeout=void 0)}var Yi=function(){function i(t,e){e===void 0&&(e=t.generateQueryId()),this.queryId=e,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var n=this.cache=t.cache;un.has(n)||(un.set(n,0),Xi(n,"evict"),Xi(n,"modify"),Xi(n,"reset"))}return i.prototype.init=function(t){var e=t.networkStatus||Qt.loading;return this.variables&&this.networkStatus!==Qt.loading&&!ie(this.variables,t.variables)&&(e=Qt.setVariables),ie(t.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:t.document,variables:t.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:e}),t.observableQuery&&this.setObservableQuery(t.observableQuery),t.lastRequestId&&(this.lastRequestId=t.lastRequestId),this},i.prototype.reset=function(){Mr(this),this.dirty=!1},i.prototype.getDiff=function(t){t===void 0&&(t=this.variables);var e=this.getDiffOptions(t);if(this.lastDiff&&ie(e,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=t);var n=this.observableQuery;if(n&&n.options.fetchPolicy==="no-cache")return{complete:!1};var o=this.cache.diff(e);return this.updateLastDiff(o,e),o},i.prototype.updateLastDiff=function(t,e){this.lastDiff=t?{diff:t,options:e||this.getDiffOptions()}:void 0},i.prototype.getDiffOptions=function(t){var e;return t===void 0&&(t=this.variables),{query:this.document,variables:t,returnPartialData:!0,optimistic:!0,canonizeResults:(e=this.observableQuery)===null||e===void 0?void 0:e.options.canonizeResults}},i.prototype.setDiff=function(t){var e=this,n=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(t),!this.dirty&&!ie(n&&n.result,t&&t.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return e.notify()},0)))},i.prototype.setObservableQuery=function(t){var e=this;t!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=t,t?(t.queryInfo=this,this.listeners.add(this.oqListener=function(){var n=e.getDiff();n.fromOptimisticTransaction?t.observe():tc(t)})):delete this.oqListener)},i.prototype.notify=function(){var t=this;Mr(this),this.shouldNotify()&&this.listeners.forEach(function(e){return e(t)}),this.dirty=!1},i.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(zn(this.networkStatus)&&this.observableQuery){var t=this.observableQuery.options.fetchPolicy;if(t!=="cache-only"&&t!=="cache-and-network")return!1}return!0},i.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=i.prototype.cancel,this.subscriptions.forEach(function(e){return e.unsubscribe()});var t=this.observableQuery;t&&t.stopPolling()}},i.prototype.cancel=function(){},i.prototype.updateWatch=function(t){var e=this;t===void 0&&(t=this.variables);var n=this.observableQuery;if(!(n&&n.options.fetchPolicy==="no-cache")){var o=G(G({},this.getDiffOptions(t)),{watcher:this,callback:function(a){return e.setDiff(a)}});(!this.lastWatch||!ie(o,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=o))}},i.prototype.resetLastWrite=function(){this.lastWrite=void 0},i.prototype.shouldWrite=function(t,e){var n=this.lastWrite;return!(n&&n.dmCount===un.get(this.cache)&&ie(e,n.variables)&&ie(t.data,n.result.data))},i.prototype.markResult=function(t,e,n,o){var a=this,c=Se(t.errors)?t.errors.slice(0):[];if(this.reset(),"incremental"in t&&Se(t.incremental)){var l=this.getDiff().result,d=new Ye;t.incremental.forEach(function(s){for(var r=s.data,g=s.path,L=s.errors,m=g.length-1;m>=0;--m){var C=g[m],A=!isNaN(+C),w=A?[]:{};w[C]=r,r=w}L&&c.push.apply(c,L),l=d.merge(l,r)}),t.data=l}this.graphQLErrors=c,n.fetchPolicy==="no-cache"?this.updateLastDiff({result:t.data,complete:!0},this.getDiffOptions(n.variables)):o!==0&&(To(t,n.errorPolicy)?this.cache.performTransaction(function(s){if(a.shouldWrite(t,n.variables))s.writeQuery({query:e,data:t.data,variables:n.variables,overwrite:o===1}),a.lastWrite={result:t,variables:n.variables,dmCount:un.get(a.cache)};else if(a.lastDiff&&a.lastDiff.diff.complete){t.data=a.lastDiff.diff.result;return}var r=a.getDiffOptions(n.variables),g=s.diff(r);a.stopped||a.updateWatch(n.variables),a.updateLastDiff(g,r),g.complete&&(t.data=g.result)}):this.lastWrite=void 0)},i.prototype.markReady=function(){return this.networkError=null,this.networkStatus=Qt.ready},i.prototype.markError=function(t){return this.networkStatus=Qt.error,this.lastWrite=void 0,this.reset(),t.graphQLErrors&&(this.graphQLErrors=t.graphQLErrors),t.networkError&&(this.networkError=t.networkError),t},i}();function To(i,t){t===void 0&&(t="none");var e=t==="ignore"||t==="all",n=!oi(i);return!n&&e&&i.data&&(n=!0),n}var nh=Object.prototype.hasOwnProperty,ih=function(){function i(t){var e=t.cache,n=t.link,o=t.defaultOptions,a=t.queryDeduplication,c=a===void 0?!1:a,l=t.onBroadcast,d=t.ssrMode,s=d===void 0?!1:d,r=t.clientAwareness,g=r===void 0?{}:r,L=t.localState,m=t.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(tn?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=e,this.link=n,this.defaultOptions=o||Object.create(null),this.queryDeduplication=c,this.clientAwareness=g,this.localState=L||new nc({cache:e}),this.ssrMode=s,this.assumeImmutableResults=!!m,(this.onBroadcast=l)&&(this.mutationStore=Object.create(null))}return i.prototype.stop=function(){var t=this;this.queries.forEach(function(e,n){t.stopQueryNoBroadcast(n)}),this.cancelPendingFetches(__DEV__?new Dt("QueryManager stopped while query was in flight"):new Dt(13))},i.prototype.cancelPendingFetches=function(t){this.fetchCancelFns.forEach(function(e){return e(t)}),this.fetchCancelFns.clear()},i.prototype.mutate=function(t){var e,n,o=t.mutation,a=t.variables,c=t.optimisticResponse,l=t.updateQueries,d=t.refetchQueries,s=d===void 0?[]:d,r=t.awaitRefetchQueries,g=r===void 0?!1:r,L=t.update,m=t.onQueryUpdated,C=t.fetchPolicy,A=C===void 0?((e=this.defaultOptions.mutate)===null||e===void 0?void 0:e.fetchPolicy)||"network-only":C,w=t.errorPolicy,T=w===void 0?((n=this.defaultOptions.mutate)===null||n===void 0?void 0:n.errorPolicy)||"none":w,F=t.keepRootFields,R=t.context;return De(this,void 0,void 0,function(){var q,Z,E,f,y,I;return ze(this,function(k){switch(k.label){case 0:return __DEV__?ht(o,"mutation option is required. You must specify your GraphQL document in the mutation option."):ht(o,14),__DEV__?ht(A==="network-only"||A==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):ht(A==="network-only"||A==="no-cache",15),q=this.generateMutationId(),Z=this.transform(o),E=Z.document,f=Z.hasClientExports,o=this.cache.transformForLink(E),a=this.getVariables(o,a),f?[4,this.localState.addExportedVariables(o,a,R)]:[3,2];case 1:a=k.sent(),k.label=2;case 2:return y=this.mutationStore&&(this.mutationStore[q]={mutation:o,variables:a,loading:!0,error:null}),c&&this.markMutationOptimistic(c,{mutationId:q,document:o,variables:a,fetchPolicy:A,errorPolicy:T,context:R,updateQueries:l,update:L,keepRootFields:F}),this.broadcastQueries(),I=this,[2,new Promise(function(O,x){return ji(I.getObservableFromLink(o,G(G({},R),{optimisticResponse:c}),a,!1),function(v){if(oi(v)&&T==="none")throw new on({graphQLErrors:v.errors});y&&(y.loading=!1,y.error=null);var P=G({},v);return typeof s=="function"&&(s=s(P)),T==="ignore"&&oi(P)&&delete P.errors,I.markMutationResult({mutationId:q,result:P,document:o,variables:a,fetchPolicy:A,errorPolicy:T,context:R,update:L,updateQueries:l,awaitRefetchQueries:g,refetchQueries:s,removeOptimistic:c?q:void 0,onQueryUpdated:m,keepRootFields:F})}).subscribe({next:function(v){I.broadcastQueries(),O(v)},error:function(v){y&&(y.loading=!1,y.error=v),c&&I.cache.removeOptimistic(q),I.broadcastQueries(),x(v instanceof on?v:new on({networkError:v}))}})})]}})})},i.prototype.markMutationResult=function(t,e){var n=this;e===void 0&&(e=this.cache);var o=t.result,a=[],c=t.fetchPolicy==="no-cache";if(!c&&To(o,t.errorPolicy)){a.push({result:o.data,dataId:"ROOT_MUTATION",query:t.document,variables:t.variables});var l=t.updateQueries;l&&this.queries.forEach(function(s,r){var g=s.observableQuery,L=g&&g.queryName;if(!(!L||!nh.call(l,L))){var m=l[L],C=n.queries.get(r),A=C.document,w=C.variables,T=e.diff({query:A,variables:w,returnPartialData:!0,optimistic:!1}),F=T.result,R=T.complete;if(R&&F){var q=m(F,{mutationResult:o,queryName:A&&po(A)||void 0,queryVariables:w});q&&a.push({result:q,dataId:"ROOT_QUERY",query:A,variables:w})}}})}if(a.length>0||t.refetchQueries||t.update||t.onQueryUpdated||t.removeOptimistic){var d=[];if(this.refetchQueries({updateCache:function(s){c||a.forEach(function(L){return s.write(L)});var r=t.update;if(r){if(!c){var g=s.diff({id:"ROOT_MUTATION",query:n.transform(t.document).asQuery,variables:t.variables,optimistic:!1,returnPartialData:!0});g.complete&&!df(o)&&(o=G(G({},o),{data:g.result}))}r(s,o,{context:t.context,variables:t.variables})}!c&&!t.keepRootFields&&s.modify({id:"ROOT_MUTATION",fields:function(L,m){var C=m.fieldName,A=m.DELETE;return C==="__typename"?L:A}})},include:t.refetchQueries,optimistic:!1,removeOptimistic:t.removeOptimistic,onQueryUpdated:t.onQueryUpdated||null}).forEach(function(s){return d.push(s)}),t.awaitRefetchQueries||t.onQueryUpdated)return Promise.all(d).then(function(){return o})}return Promise.resolve(o)},i.prototype.markMutationOptimistic=function(t,e){var n=this,o=typeof t=="function"?t(e.variables):t;return this.cache.recordOptimisticTransaction(function(a){try{n.markMutationResult(G(G({},e),{result:{data:o}}),a)}catch(c){__DEV__&&ht.error(c)}},e.mutationId)},i.prototype.fetchQuery=function(t,e,n){return this.fetchQueryObservable(t,e,n).promise},i.prototype.getQueryStore=function(){var t=Object.create(null);return this.queries.forEach(function(e,n){t[n]={variables:e.variables,networkStatus:e.networkStatus,networkError:e.networkError,graphQLErrors:e.graphQLErrors}}),t},i.prototype.resetErrors=function(t){var e=this.queries.get(t);e&&(e.networkError=void 0,e.graphQLErrors=[])},i.prototype.transform=function(t){var e=this.transformCache;if(!e.has(t)){var n=this.cache.transformDocument(t),o=sd(n),a=this.localState.clientQuery(n),c=o&&this.localState.serverQuery(o),l={document:n,hasClientExports:Uu(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:a,serverQuery:c,defaultVars:na($n(n)),asQuery:G(G({},n),{definitions:n.definitions.map(function(s){return s.kind==="OperationDefinition"&&s.operation!=="query"?G(G({},s),{operation:"query"}):s})})},d=function(s){s&&!e.has(s)&&e.set(s,l)};d(t),d(n),d(a),d(c)}return e.get(t)},i.prototype.getVariables=function(t,e){return G(G({},this.transform(t).defaultVars),e)},i.prototype.watchQuery=function(t){t=G(G({},t),{variables:this.getVariables(t.query,t.variables)}),typeof t.notifyOnNetworkStatusChange>"u"&&(t.notifyOnNetworkStatusChange=!1);var e=new Yi(this),n=new Po({queryManager:this,queryInfo:e,options:t});return this.queries.set(n.queryId,e),e.init({document:n.query,observableQuery:n,variables:n.variables}),n},i.prototype.query=function(t,e){var n=this;return e===void 0&&(e=this.generateQueryId()),__DEV__?ht(t.query,"query option is required. You must specify your GraphQL document in the query option."):ht(t.query,16),__DEV__?ht(t.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):ht(t.query.kind==="Document",17),__DEV__?ht(!t.returnPartialData,"returnPartialData option only supported on watchQuery."):ht(!t.returnPartialData,18),__DEV__?ht(!t.pollInterval,"pollInterval option only supported on watchQuery."):ht(!t.pollInterval,19),this.fetchQuery(e,t).finally(function(){return n.stopQuery(e)})},i.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},i.prototype.generateRequestId=function(){return this.requestIdCounter++},i.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},i.prototype.stopQueryInStore=function(t){this.stopQueryInStoreNoBroadcast(t),this.broadcastQueries()},i.prototype.stopQueryInStoreNoBroadcast=function(t){var e=this.queries.get(t);e&&e.stop()},i.prototype.clearStore=function(t){return t===void 0&&(t={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new Dt("Store reset while query was in flight (not completed in link chain)"):new Dt(20)),this.queries.forEach(function(e){e.observableQuery?e.networkStatus=Qt.loading:e.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(t)},i.prototype.getObservableQueries=function(t){var e=this;t===void 0&&(t="active");var n=new Map,o=new Map,a=new Set;return Array.isArray(t)&&t.forEach(function(c){typeof c=="string"?o.set(c,!1):Gu(c)?o.set(e.transform(c).document,!1):Zt(c)&&c.query&&a.add(c)}),this.queries.forEach(function(c,l){var d=c.observableQuery,s=c.document;if(d){if(t==="all"){n.set(l,d);return}var r=d.queryName,g=d.options.fetchPolicy;if(g==="standby"||t==="active"&&!d.hasObservers())return;(t==="active"||r&&o.has(r)||s&&o.has(s))&&(n.set(l,d),r&&o.set(r,!0),s&&o.set(s,!0))}}),a.size&&a.forEach(function(c){var l=bo("legacyOneTimeQuery"),d=e.getQuery(l).init({document:c.query,variables:c.variables}),s=new Po({queryManager:e,queryInfo:d,options:G(G({},c),{fetchPolicy:"network-only"})});ht(s.queryId===l),d.setObservableQuery(s),n.set(l,s)}),__DEV__&&o.size&&o.forEach(function(c,l){c||__DEV__&&ht.warn("Unknown query ".concat(typeof l=="string"?"named ":"").concat(JSON.stringify(l,null,2)," requested in refetchQueries options.include array"))}),n},i.prototype.reFetchObservableQueries=function(t){var e=this;t===void 0&&(t=!1);var n=[];return this.getObservableQueries(t?"all":"active").forEach(function(o,a){var c=o.options.fetchPolicy;o.resetLastResults(),(t||c!=="standby"&&c!=="cache-only")&&n.push(o.refetch()),e.getQuery(a).setDiff(null)}),this.broadcastQueries(),Promise.all(n)},i.prototype.setObservableQuery=function(t){this.getQuery(t.queryId).setObservableQuery(t)},i.prototype.startGraphQLSubscription=function(t){var e=this,n=t.query,o=t.fetchPolicy,a=t.errorPolicy,c=t.variables,l=t.context,d=l===void 0?{}:l;n=this.transform(n).document,c=this.getVariables(n,c);var s=function(g){return e.getObservableFromLink(n,d,g).map(function(L){if(o!=="no-cache"&&(To(L,a)&&e.cache.write({query:n,result:L.data,dataId:"ROOT_SUBSCRIPTION",variables:g}),e.broadcastQueries()),oi(L))throw new on({graphQLErrors:L.errors});return L})};if(this.transform(n).hasClientExports){var r=this.localState.addExportedVariables(n,c,d).then(s);return new Gt(function(g){var L=null;return r.then(function(m){return L=m.subscribe(g)},g.error),function(){return L&&L.unsubscribe()}})}return s(c)},i.prototype.stopQuery=function(t){this.stopQueryNoBroadcast(t),this.broadcastQueries()},i.prototype.stopQueryNoBroadcast=function(t){this.stopQueryInStoreNoBroadcast(t),this.removeQuery(t)},i.prototype.removeQuery=function(t){this.fetchCancelFns.delete(t),this.queries.has(t)&&(this.getQuery(t).stop(),this.queries.delete(t))},i.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(t){return t.notify()})},i.prototype.getLocalState=function(){return this.localState},i.prototype.getObservableFromLink=function(t,e,n,o){var a=this,c;o===void 0&&(o=(c=e?.queryDeduplication)!==null&&c!==void 0?c:this.queryDeduplication);var l,d=this.transform(t).serverQuery;if(d){var s=this,r=s.inFlightLinkObservables,g=s.link,L={query:d,variables:n,operationName:po(d)||void 0,context:this.prepareContext(G(G({},e),{forceFetch:!o}))};if(e=L.context,o){var m=r.get(d)||new Map;r.set(d,m);var C=Je(n);if(l=m.get(C),!l){var A=new Bn([wo(g,L)]);m.set(C,l=A),A.beforeNext(function(){m.delete(C)&&m.size<1&&r.delete(d)})}}else l=new Bn([wo(g,L)])}else l=new Bn([Gt.of({data:{}})]),e=this.prepareContext(e);var w=this.transform(t).clientQuery;return w&&(l=ji(l,function(T){return a.localState.runResolvers({document:w,remoteResult:T,context:e,variables:n})})),l},i.prototype.getResultsFromLink=function(t,e,n){var o=t.lastRequestId=this.generateRequestId();n=ua(n);var a=this.cache.transformForLink(this.transform(t.document).document);return ji(this.getObservableFromLink(a,n.context,n.variables),function(c){var l=Se(c.errors)?c.errors.slice(0):[];"incremental"in c&&Se(c.incremental)&&c.incremental.forEach(function(r){r.errors&&l.push.apply(l,r.errors)});var d=Se(l);if(o>=t.lastRequestId){if(d&&n.errorPolicy==="none")throw t.markError(new on({graphQLErrors:l}));t.markResult(c,a,n,e),t.markReady()}var s={data:c.data,loading:!1,networkStatus:Qt.ready};return d&&n.errorPolicy!=="ignore"&&(s.errors=l,s.networkStatus=Qt.error),s},function(c){var l=Xf(c)?c:new on({networkError:c});throw o>=t.lastRequestId&&t.markError(l),l})},i.prototype.fetchQueryObservable=function(t,e,n){var o=this;n===void 0&&(n=Qt.loading);var a=this.transform(e.query).document,c=this.getVariables(a,e.variables),l=this.getQuery(t),d=this.defaultOptions.watchQuery,s=e.fetchPolicy,r=s===void 0?d&&d.fetchPolicy||"cache-first":s,g=e.errorPolicy,L=g===void 0?d&&d.errorPolicy||"none":g,m=e.returnPartialData,C=m===void 0?!1:m,A=e.notifyOnNetworkStatusChange,w=A===void 0?!1:A,T=e.context,F=T===void 0?{}:T,R=Object.assign({},e,{query:a,variables:c,fetchPolicy:r,errorPolicy:L,returnPartialData:C,notifyOnNetworkStatusChange:w,context:F}),q=function(f){R.variables=f;var y=o.fetchQueryByPolicy(l,R,n);return R.fetchPolicy!=="standby"&&y.length>0&&l.observableQuery&&l.observableQuery.applyNextFetchPolicy("after-fetch",e),y},Z=function(){return o.fetchCancelFns.delete(t)};this.fetchCancelFns.set(t,function(f){Z(),setTimeout(function(){return E.cancel(f)})});var E=new Bn(this.transform(R.query).hasClientExports?this.localState.addExportedVariables(R.query,R.variables,R.context).then(q):q(R.variables));return E.promise.then(Z,Z),E},i.prototype.refetchQueries=function(t){var e=this,n=t.updateCache,o=t.include,a=t.optimistic,c=a===void 0?!1:a,l=t.removeOptimistic,d=l===void 0?c?bo("refetchQueries"):void 0:l,s=t.onQueryUpdated,r=new Map;o&&this.getObservableQueries(o).forEach(function(L,m){r.set(m,{oq:L,lastDiff:e.getQuery(m).getDiff()})});var g=new Map;return n&&this.cache.batch({update:n,optimistic:c&&d||!1,removeOptimistic:d,onWatchUpdated:function(L,m,C){var A=L.watcher instanceof Yi&&L.watcher.observableQuery;if(A){if(s){r.delete(A.queryId);var w=s(A,m,C);return w===!0&&(w=A.refetch()),w!==!1&&g.set(A,w),w}s!==null&&r.set(A.queryId,{oq:A,lastDiff:C,diff:m})}}}),r.size&&r.forEach(function(L,m){var C=L.oq,A=L.lastDiff,w=L.diff,T;if(s){if(!w){var F=C.queryInfo;F.reset(),w=F.getDiff()}T=s(C,w,A)}(!s||T===!0)&&(T=C.refetch()),T!==!1&&g.set(C,T),m.indexOf("legacyOneTimeQuery")>=0&&e.stopQueryNoBroadcast(m)}),d&&this.cache.removeOptimistic(d),g},i.prototype.fetchQueryByPolicy=function(t,e,n){var o=this,a=e.query,c=e.variables,l=e.fetchPolicy,d=e.refetchWritePolicy,s=e.errorPolicy,r=e.returnPartialData,g=e.context,L=e.notifyOnNetworkStatusChange,m=t.networkStatus;t.init({document:this.transform(a).document,variables:c,networkStatus:n});var C=function(){return t.getDiff(c)},A=function(q,Z){Z===void 0&&(Z=t.networkStatus||Qt.loading);var E=q.result;__DEV__&&!r&&!ie(E,{})&&ec(q.missing);var f=function(y){return Gt.of(G({data:y,loading:zn(Z),networkStatus:Z},q.complete?null:{partial:!0}))};return E&&o.transform(a).hasForcedResolvers?o.localState.runResolvers({document:a,remoteResult:{data:E},context:g,variables:c,onlyRunForcedResolvers:!0}).then(function(y){return f(y.data||void 0)}):f(E)},w=l==="no-cache"?0:n===Qt.refetch&&d!=="merge"?1:2,T=function(){return o.getResultsFromLink(t,w,{variables:c,context:g,fetchPolicy:l,errorPolicy:s})},F=L&&typeof m=="number"&&m!==n&&zn(n);switch(l){default:case"cache-first":{var R=C();return R.complete?[A(R,t.markReady())]:r||F?[A(R),T()]:[T()]}case"cache-and-network":{var R=C();return R.complete||r||F?[A(R),T()]:[T()]}case"cache-only":return[A(C(),t.markReady())];case"network-only":return F?[A(C()),T()]:[T()];case"no-cache":return F?[A(t.getDiff()),T()]:[T()];case"standby":return[]}},i.prototype.getQuery=function(t){return t&&!this.queries.has(t)&&this.queries.set(t,new Yi(this,t)),this.queries.get(t)},i.prototype.prepareContext=function(t){t===void 0&&(t={});var e=this.localState.prepareContext(t);return G(G({},e),{clientAwareness:this.clientAwareness})},i}(),qr=!1,oh=function(){function i(t){var e=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=t.uri,o=t.credentials,a=t.headers,c=t.cache,l=t.ssrMode,d=l===void 0?!1:l,s=t.ssrForceFetchDelay,r=s===void 0?0:s,g=t.connectToDevTools,L=g===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:g,m=t.queryDeduplication,C=m===void 0?!0:m,A=t.defaultOptions,w=t.assumeImmutableResults,T=w===void 0?!1:w,F=t.resolvers,R=t.typeDefs,q=t.fragmentMatcher,Z=t.name,E=t.version,f=t.link;if(f||(f=n?new rf({uri:n,credentials:o,headers:a}):Vn.empty()),!c)throw __DEV__?new Dt(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new Dt(9);if(this.link=f,this.cache=c,this.disableNetworkFetches=d||r>0,this.queryDeduplication=C,this.defaultOptions=A||Object.create(null),this.typeDefs=R,r&&setTimeout(function(){return e.disableNetworkFetches=!1},r),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),L&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!qr&&__DEV__&&(qr=!0,typeof window<"u"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var y=window.navigator,I=y&&y.userAgent,k=void 0;typeof I=="string"&&(I.indexOf("Chrome/")>-1?k="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":I.indexOf("Firefox/")>-1&&(k="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),k&&__DEV__&&ht.log("Download the Apollo DevTools for a better development experience: "+k)}this.version=Pd,this.localState=new nc({cache:c,client:this,resolvers:F,fragmentMatcher:q}),this.queryManager=new ih({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:C,ssrMode:d,clientAwareness:{name:Z,version:E},localState:this.localState,assumeImmutableResults:T,onBroadcast:L?function(){e.devToolsHookCb&&e.devToolsHookCb({action:{},state:{queries:e.queryManager.getQueryStore(),mutations:e.queryManager.mutationStore||{}},dataWithOptimisticResults:e.cache.extract(!0)})}:void 0})}return i.prototype.stop=function(){this.queryManager.stop()},i.prototype.watchQuery=function(t){return this.defaultOptions.watchQuery&&(t=Ui(this.defaultOptions.watchQuery,t)),this.disableNetworkFetches&&(t.fetchPolicy==="network-only"||t.fetchPolicy==="cache-and-network")&&(t=G(G({},t),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(t)},i.prototype.query=function(t){return this.defaultOptions.query&&(t=Ui(this.defaultOptions.query,t)),__DEV__?ht(t.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):ht(t.fetchPolicy!=="cache-and-network",10),this.disableNetworkFetches&&t.fetchPolicy==="network-only"&&(t=G(G({},t),{fetchPolicy:"cache-first"})),this.queryManager.query(t)},i.prototype.mutate=function(t){return this.defaultOptions.mutate&&(t=Ui(this.defaultOptions.mutate,t)),this.queryManager.mutate(t)},i.prototype.subscribe=function(t){return this.queryManager.startGraphQLSubscription(t)},i.prototype.readQuery=function(t,e){return e===void 0&&(e=!1),this.cache.readQuery(t,e)},i.prototype.readFragment=function(t,e){return e===void 0&&(e=!1),this.cache.readFragment(t,e)},i.prototype.writeQuery=function(t){this.cache.writeQuery(t),this.queryManager.broadcastQueries()},i.prototype.writeFragment=function(t){this.cache.writeFragment(t),this.queryManager.broadcastQueries()},i.prototype.__actionHookForDevTools=function(t){this.devToolsHookCb=t},i.prototype.__requestRaw=function(t){return wo(this.link,t)},i.prototype.resetStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(t.resetStoreCallbacks.map(function(e){return e()}))}).then(function(){return t.reFetchObservableQueries()})},i.prototype.clearStore=function(){var t=this;return Promise.resolve().then(function(){return t.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(t.clearStoreCallbacks.map(function(e){return e()}))})},i.prototype.onResetStore=function(t){var e=this;return this.resetStoreCallbacks.push(t),function(){e.resetStoreCallbacks=e.resetStoreCallbacks.filter(function(n){return n!==t})}},i.prototype.onClearStore=function(t){var e=this;return this.clearStoreCallbacks.push(t),function(){e.clearStoreCallbacks=e.clearStoreCallbacks.filter(function(n){return n!==t})}},i.prototype.reFetchObservableQueries=function(t){return this.queryManager.reFetchObservableQueries(t)},i.prototype.refetchQueries=function(t){var e=this.queryManager.refetchQueries(t),n=[],o=[];e.forEach(function(c,l){n.push(l),o.push(c)});var a=Promise.all(o);return a.queries=n,a.results=o,a.catch(function(c){__DEV__&&ht.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(c))}),a},i.prototype.getObservableQueries=function(t){return t===void 0&&(t="active"),this.queryManager.getObservableQueries(t)},i.prototype.extract=function(t){return this.cache.extract(t)},i.prototype.restore=function(t){return this.cache.restore(t)},i.prototype.addResolvers=function(t){this.localState.addResolvers(t)},i.prototype.setResolvers=function(t){this.localState.setResolvers(t)},i.prototype.getResolvers=function(){return this.localState.getResolvers()},i.prototype.setLocalStateFragmentMatcher=function(t){this.localState.setFragmentMatcher(t)},i.prototype.setLink=function(t){this.link=this.queryManager.link=t},i}(),ri=new Map,Mo=new Map,ic=!0,_i=!1;function oc(i){return i.replace(/[\s,]+/g," ").trim()}function ah(i){return oc(i.source.body.substring(i.start,i.end))}function rh(i){var t=new Set,e=[];return i.definitions.forEach(function(n){if(n.kind==="FragmentDefinition"){var o=n.name.value,a=ah(n.loc),c=Mo.get(o);c&&!c.has(a)?ic&&console.warn("Warning: fragment with name "+o+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):c||Mo.set(o,c=new Set),c.add(a),t.has(a)||(t.add(a),e.push(n))}else e.push(n)}),G(G({},i),{definitions:e})}function sh(i){var t=new Set(i.definitions);t.forEach(function(n){n.loc&&delete n.loc,Object.keys(n).forEach(function(o){var a=n[o];a&&typeof a=="object"&&t.add(a)})});var e=i.loc;return e&&(delete e.startToken,delete e.endToken),i}function ch(i){var t=oc(i);if(!ri.has(t)){var e=Iu(i,{experimentalFragmentVariables:_i,allowLegacyFragmentVariables:_i});if(!e||e.kind!=="Document")throw new Error("Not a valid GraphQL document.");ri.set(t,sh(rh(e)))}return ri.get(t)}function mn(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];typeof i=="string"&&(i=[i]);var n=i[0];return t.forEach(function(o,a){o&&o.kind==="Document"?n+=o.loc.source.body:n+=o,n+=i[a+1]}),ch(n)}function lh(){ri.clear(),Mo.clear()}function uh(){ic=!1}function dh(){_i=!0}function fh(){_i=!1}var An={gql:mn,resetCaches:lh,disableFragmentWarnings:uh,enableExperimentalFragmentVariables:dh,disableExperimentalFragmentVariables:fh};(function(i){i.gql=An.gql,i.resetCaches=An.resetCaches,i.disableFragmentWarnings=An.disableFragmentWarnings,i.enableExperimentalFragmentVariables=An.enableExperimentalFragmentVariables,i.disableExperimentalFragmentVariables=An.disableExperimentalFragmentVariables})(mn||(mn={}));mn.default=mn;const hh=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function Oi(i,t){if(!t||t==10)return BigInt(i);if(t==16)return i.slice(0,2)=="0x"?BigInt(i):BigInt("0x"+i)}const en=Oi;function _h(i,t){let e=BigInt(0);t=BigInt(t);for(let n=0;n<i.length;n++)e=e*t+BigInt(i[n]);return e}function ac(i){const t=i.toString(16);return(t.length-1)*4+hh[parseInt(t[0],16)]}function ph(i){return BigInt(i)<BigInt(0)}function gh(i){return!i}function rc(i,t){return BigInt(i)<<BigInt(t)}function ba(i,t){return BigInt(i)>>BigInt(t)}const mh=rc,yh=ba;function Lh(i){return(BigInt(i)&BigInt(1))==BigInt(1)}function bh(i){let t=BigInt(i);const e=[];for(;t;){if(t&BigInt(1)){const n=2-Number(t%BigInt(4));e.push(n),t=t-BigInt(n)}else e.push(0);t=t>>BigInt(1)}return e}function vh(i){let t=BigInt(i);const e=[];for(;t;)t&BigInt(1)?e.push(1):e.push(0),t=t>>BigInt(1);return e}function sc(i){if(i>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Number too big");return Number(i)}function wh(i,t){const e=[];let n=BigInt(i);for(t=BigInt(t);n;)e.unshift(Number(n%t)),n=n/t;return e}function Eh(i,t){return BigInt(i)+BigInt(t)}function Fh(i,t){return BigInt(i)-BigInt(t)}function Ch(i){return-BigInt(i)}function Ah(i,t){return BigInt(i)*BigInt(t)}function Sh(i){return BigInt(i)*BigInt(i)}function xh(i,t){return BigInt(i)**BigInt(t)}function Oh(i,t){return BigInt(i)**BigInt(t)}function Ih(i){return BigInt(i)>=0?BigInt(i):-BigInt(i)}function Bh(i,t){return BigInt(i)/BigInt(t)}function Ph(i,t){return BigInt(i)%BigInt(t)}function Th(i,t){return BigInt(i)==BigInt(t)}function Mh(i,t){return BigInt(i)!=BigInt(t)}function qh(i,t){return BigInt(i)<BigInt(t)}function kh(i,t){return BigInt(i)>BigInt(t)}function Rh(i,t){return BigInt(i)<=BigInt(t)}function Nh(i,t){return BigInt(i)>=BigInt(t)}function cc(i,t){return BigInt(i)&BigInt(t)}function Dh(i,t){return BigInt(i)|BigInt(t)}function zh(i,t){return BigInt(i)^BigInt(t)}function jh(i,t){return BigInt(i)&&BigInt(t)}function Uh(i,t){return BigInt(i)||BigInt(t)}function $h(i){return!BigInt(i)}function lc(i,t,e,n){const o="0000000"+e.toString(16),a=new Uint32Array(i.buffer,t,n/4),c=((o.length-7)*4-1>>5)+1;for(let l=0;l<c;l++)a[l]=parseInt(o.substring(o.length-8*l-8,o.length-8*l),16);for(let l=c;l<a.length;l++)a[l]=0;for(let l=a.length*4;l<n;l++)i[l]=sc(cc(ba(e,l*8),255))}function Vh(i,t,e,n){const o="0000000"+e.toString(16),a=new DataView(i.buffer,i.byteOffset+t,n),c=((o.length-7)*4-1>>5)+1;for(let l=0;l<c;l++)a.setUint32(n-l*4-4,parseInt(o.substring(o.length-8*l-8,o.length-8*l),16),!1);for(let l=0;l<n/4-c;l++)a[l]=0}function Qh(i,t,e){e=e||i.byteLength,t=t||0;const n=new Uint32Array(i.buffer,t,e/4),o=new Array(e/4);return n.forEach((a,c)=>o[o.length-c-1]=a.toString(16).padStart(8,"0")),Oi(o.join(""),16)}function Gh(i,t,e){e=e||i.byteLength,t=t||0;const n=new DataView(i.buffer,i.byteOffset+t,e),o=new Array(e/4);for(let a=0;a<e/4;a++)o[a]=n.getUint32(a*4,!1).toString(16).padStart(8,"0");return Oi(o.join(""),16)}function Wh(i,t){return i.toString(t)}function Zh(i){const t=new Uint8Array(Math.floor((ac(i)-1)/8)+1);return lc(t,0,i,t.byteLength),t}const Jh=en(0),Hh=en(1),Xh=Object.freeze(Object.defineProperty({__proto__:null,fromString:Oi,e:en,fromArray:_h,bitLength:ac,isNegative:ph,isZero:gh,shiftLeft:rc,shiftRight:ba,shl:mh,shr:yh,isOdd:Lh,naf:bh,bits:vh,toNumber:sc,toArray:wh,add:Eh,sub:Fh,neg:Ch,mul:Ah,square:Sh,pow:xh,exp:Oh,abs:Ih,div:Bh,mod:Ph,eq:Th,neq:Mh,lt:qh,gt:kh,leq:Rh,geq:Nh,band:cc,bor:Dh,bxor:zh,land:jh,lor:Uh,lnot:$h,toRprLE:lc,toRprBE:Vh,fromRprLE:Qh,fromRprBE:Gh,toString:Wh,toLEBuff:Zh,zero:Jh,one:Hh},Symbol.toStringTag,{value:"Module"})),se=1<<30;class pi{constructor(t){this.buffers=[],this.byteLength=t;for(let e=0;e<t;e+=se){const n=Math.min(t-e,se);this.buffers.push(new Uint8Array(n))}}slice(t,e){e===void 0&&(e=this.byteLength),t===void 0&&(t=0);const n=e-t,o=Math.floor(t/se),a=Math.floor((t+n-1)/se);if(o==a||n==0)return this.buffers[o].slice(t%se,t%se+n);let c,l=o,d=t%se,s=n;for(;s>0;){const r=d+s>se?se-d:s,g=new Uint8Array(this.buffers[l].buffer,this.buffers[l].byteOffset+d,r);if(r==n)return g.slice();c||(n<=se?c=new Uint8Array(n):c=new pi(n)),c.set(g,n-s),s=s-r,l++,d=0}return c}set(t,e){e===void 0&&(e=0);const n=t.byteLength;if(n==0)return;const o=Math.floor(e/se),a=Math.floor((e+n-1)/se);if(o==a)return t instanceof pi&&t.buffers.length==1?this.buffers[o].set(t.buffers[0],e%se):this.buffers[o].set(t,e%se);let c=o,l=e%se,d=n;for(;d>0;){const s=l+d>se?se-l:d,r=t.slice(n-d,n-d+s);new Uint8Array(this.buffers[c].buffer,this.buffers[c].byteOffset+l,s).set(r),d=d-s,c++,l=0}}}function Yh(i){let e,n;i&&(i.onmessage=function(r){let g;if(r.data?g=r.data:g=r,g[0].cmd=="INIT")o(g[0]).then(function(){i.postMessage(g.result)});else if(g[0].cmd=="TERMINATE")i.close();else{const L=s(g);i.postMessage(L)}});async function o(r){const g=new Uint8Array(r.code),L=await WebAssembly.compile(g);n=new WebAssembly.Memory({initial:r.init,maximum:32767}),e=await WebAssembly.instantiate(L,{env:{memory:n}})}function a(r){const g=new Uint32Array(n.buffer,0,1);for(;g[0]&3;)g[0]++;const L=g[0];if(g[0]+=r,g[0]+r>n.buffer.byteLength){const m=n.buffer.byteLength/65536;let C=Math.floor((g[0]+r)/65536)+1;C>32767&&(C=32767),n.grow(C-m)}return L}function c(r){const g=a(r.byteLength);return d(g,r),g}function l(r,g){const L=new Uint8Array(n.buffer);return new Uint8Array(L.buffer,L.byteOffset+r,g)}function d(r,g){new Uint8Array(n.buffer).set(new Uint8Array(g),r)}function s(r){if(r[0].cmd=="INIT")return o(r[0]);const g={vars:[],out:[]},m=new Uint32Array(n.buffer,0,1)[0];for(let A=0;A<r.length;A++)switch(r[A].cmd){case"ALLOCSET":g.vars[r[A].var]=c(r[A].buff);break;case"ALLOC":g.vars[r[A].var]=a(r[A].len);break;case"SET":d(g.vars[r[A].var],r[A].buff);break;case"CALL":{const w=[];for(let T=0;T<r[A].params.length;T++){const F=r[A].params[T];typeof F.var<"u"?w.push(g.vars[F.var]+(F.offset||0)):typeof F.val<"u"&&w.push(F.val)}e.exports[r[A].fnName](...w);break}case"GET":g.out[r[A].out]=l(g.vars[r[A].var],r[A].len).slice();break;default:throw new Error("Invalid cmd")}const C=new Uint32Array(n.buffer,0,1);return C[0]=m,g.out}return s}function Kh(i){return process.browser?globalThis.btoa(i):Buffer.from(i).toString("base64")}Kh("("+Yh.toString()+")(self)");globalThis.curve_bn128=null;globalThis.curve_bls12381=null;en("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16);en("21888242871839275222246405745257275088548364400416034343698204186575808495617");en("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16);en("21888242871839275222246405745257275088696311157297823662689037894645226208583");const uc=Xh;async function dc(i,t,e,n){if(e=e||4096*64,typeof t!="number"&&["w+","wx+","r","ax+","a+"].indexOf(t)<0)throw new Error("Invalid open option");const o=await Go.promises.open(i,t),a=await o.stat();return new t2(o,a,e,n,i)}class t2{constructor(t,e,n,o,a){for(this.fileName=a,this.fd=t,this.pos=0,this.pageSize=o||1<<8;this.pageSize<e.blksize;)this.pageSize*=2;this.totalSize=e.size,this.totalPages=Math.floor((e.size-1)/this.pageSize)+1,this.maxPagesLoaded=Math.floor(n/this.pageSize)+1,this.pages={},this.pendingLoads=[],this.writing=!1,this.reading=!1,this.avBuffs=[],this.history={}}_loadPage(t){const e=this,n=new Promise((o,a)=>{e.pendingLoads.push({page:t,resolve:o,reject:a})});return e.__statusPage("After Load request: ",t),n}__statusPage(t,e){const n=[],o=this;if(!o.logHistory)return;n.push("=="+t+" "+e);let a="";for(let c=0;c<o.pendingLoads.length;c++)o.pendingLoads[c].page==e&&(a=a+" "+c);if(a&&n.push("Pending loads:"+a),typeof o.pages[e]<"u"){const c=o.pages[e];n.push("Loaded"),n.push("pendingOps: "+c.pendingOps),c.loading&&n.push("loading: "+c.loading),c.writing&&n.push("writing"),c.dirty&&n.push("dirty")}n.push("=="),o.history[e]||(o.history[e]=[]),o.history[e].push(n)}__printHistory(t){const e=this;e.history[t]||console.log("Empty History ",t),console.log("History "+t);for(let n=0;n<e.history[t].length;n++)for(let o=0;o<e.history[t][n].length;o++)console.log("-> "+e.history[t][n][o])}_triggerLoad(){const t=this;if(t.reading||t.pendingLoads.length==0)return;const e=Object.keys(t.pages),n=[];for(let l=0;l<e.length;l++){const d=t.pages[parseInt(e[l])];d.dirty==!1&&d.pendingOps==0&&!d.writing&&!d.loading&&n.push(parseInt(e[l]))}let o=t.maxPagesLoaded-e.length;const a=[];for(;t.pendingLoads.length>0&&(typeof t.pages[t.pendingLoads[0].page]<"u"||o>0||n.length>0);){const l=t.pendingLoads.shift();if(typeof t.pages[l.page]<"u"){t.pages[l.page].pendingOps++;const d=n.indexOf(l.page);d>=0&&n.splice(d,1),t.pages[l.page].loading?t.pages[l.page].loading.push(l):l.resolve(),t.__statusPage("After Load (cached): ",l.page)}else{if(o)o--;else{const d=n.shift();t.__statusPage("Before Unload: ",d),t.avBuffs.unshift(t.pages[d]),delete t.pages[d],t.__statusPage("After Unload: ",d)}l.page>=t.totalPages?(t.pages[l.page]=c(),l.resolve(),t.__statusPage("After Load (new): ",l.page)):(t.reading=!0,t.pages[l.page]=c(),t.pages[l.page].loading=[l],a.push(t.fd.read(t.pages[l.page].buff,0,t.pageSize,l.page*t.pageSize).then(d=>{t.pages[l.page].size=d.bytesRead;const s=t.pages[l.page].loading;delete t.pages[l.page].loading;for(let r=0;r<s.length;r++)s[r].resolve();return t.__statusPage("After Load (loaded): ",l.page),d},d=>{l.reject(d)})),t.__statusPage("After Load (loading): ",l.page))}}Promise.all(a).then(()=>{t.reading=!1,t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t)),t._tryClose()});function c(){if(t.avBuffs.length>0){const l=t.avBuffs.shift();return l.dirty=!1,l.pendingOps=1,l.size=0,l}else return{dirty:!1,buff:new Uint8Array(t.pageSize),pendingOps:1,size:0}}}_triggerWrite(){const t=this;if(t.writing)return;const e=Object.keys(t.pages),n=[];for(let o=0;o<e.length;o++){const a=t.pages[parseInt(e[o])];a.dirty&&(a.dirty=!1,a.writing=!0,t.writing=!0,n.push(t.fd.write(a.buff,0,a.size,parseInt(e[o])*t.pageSize).then(()=>{a.writing=!1},c=>{console.log("ERROR Writing: "+c),t.error=c,t._tryClose()})))}t.writing&&Promise.all(n).then(()=>{t.writing=!1,setImmediate(t._triggerWrite.bind(t)),t._tryClose(),t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t))})}_getDirtyPage(){for(let t in this.pages)if(this.pages[t].dirty)return t;return-1}async write(t,e){if(t.byteLength==0)return;const n=this;if(typeof e>"u"&&(e=n.pos),n.pos=e+t.byteLength,n.totalSize<e+t.byteLength&&(n.totalSize=e+t.byteLength),n.pendingClose)throw new Error("Writing a closing file");const o=Math.floor(e/n.pageSize),a=Math.floor((e+t.byteLength-1)/n.pageSize),c=[];for(let r=o;r<=a;r++)c.push(n._loadPage(r));n._triggerLoad();let l=o,d=e%n.pageSize,s=t.byteLength;for(;s>0;){await c[l-o];const r=d+s>n.pageSize?n.pageSize-d:s,g=t.slice(t.byteLength-s,t.byteLength-s+r);new Uint8Array(n.pages[l].buff.buffer,d,r).set(g),n.pages[l].dirty=!0,n.pages[l].pendingOps--,n.pages[l].size=Math.max(d+r,n.pages[l].size),l>=n.totalPages&&(n.totalPages=l+1),s=s-r,l++,d=0,n.writing||setImmediate(n._triggerWrite.bind(n))}}async read(t,e){const n=this;let o=new Uint8Array(t);return await n.readToBuffer(o,0,t,e),o}async readToBuffer(t,e,n,o){if(n==0)return;const a=this;if(n>a.pageSize*a.maxPagesLoaded*.8){const L=Math.floor(n*1.1);this.maxPagesLoaded=Math.floor(L/a.pageSize)+1}if(typeof o>"u"&&(o=a.pos),a.pos=o+n,a.pendingClose)throw new Error("Reading a closing file");const c=Math.floor(o/a.pageSize),l=Math.floor((o+n-1)/a.pageSize),d=[];for(let L=c;L<=l;L++)d.push(a._loadPage(L));a._triggerLoad();let s=c,r=o%a.pageSize,g=o+n>a.totalSize?n-(o+n-a.totalSize):n;for(;g>0;){await d[s-c],a.__statusPage("After Await (read): ",s);const L=r+g>a.pageSize?a.pageSize-r:g,m=new Uint8Array(a.pages[s].buff.buffer,a.pages[s].buff.byteOffset+r,L);t.set(m,e+n-g),a.pages[s].pendingOps--,a.__statusPage("After Op done: ",s),g=g-L,s++,r=0,a.pendingLoads.length>0&&setImmediate(a._triggerLoad.bind(a))}this.pos=o+n}_tryClose(){const t=this;!t.pendingClose||(t.error&&t.pendingCloseReject(t.error),t._getDirtyPage()>=0||t.writing||t.reading||t.pendingLoads.length>0)||t.pendingClose()}close(){const t=this;if(t.pendingClose)throw new Error("Closing the file twice");return new Promise((e,n)=>{t.pendingClose=e,t.pendingCloseReject=n,t._tryClose()}).then(()=>{t.fd.close()},e=>{throw t.fd.close(),e})}async discard(){await this.close(),await Go.promises.unlink(this.fileName)}async writeULE32(t,e){const n=this,o=new Uint8Array(4);new DataView(o.buffer).setUint32(0,t,!0),await n.write(o,e)}async writeUBE32(t,e){const n=this,o=new Uint8Array(4);new DataView(o.buffer).setUint32(0,t,!1),await n.write(o,e)}async writeULE64(t,e){const n=this,o=new Uint8Array(8),a=new DataView(o.buffer);a.setUint32(0,t&4294967295,!0),a.setUint32(4,Math.floor(t/4294967296),!0),await n.write(o,e)}async readULE32(t){const n=await this.read(4,t);return new Uint32Array(n.buffer)[0]}async readUBE32(t){const n=await this.read(4,t);return new DataView(n.buffer).getUint32(0,!1)}async readULE64(t){const n=await this.read(8,t),o=new Uint32Array(n.buffer);return o[1]*4294967296+o[0]}async readString(t){const e=this;if(e.pendingClose)throw new Error("Reading a closing file");let n=typeof t>"u"?e.pos:t,o=Math.floor(n/e.pageSize),a=!1,c="";for(;!a;){let l=e._loadPage(o);e._triggerLoad(),await l,e.__statusPage("After Await (read): ",o);let d=n%e.pageSize;const s=new Uint8Array(e.pages[o].buff.buffer,e.pages[o].buff.byteOffset+d,e.pageSize-d);let r=s.findIndex(g=>g===0);a=r!==-1,a?(c+=new TextDecoder().decode(s.slice(0,r)),e.pos=o*this.pageSize+d+r+1):(c+=new TextDecoder().decode(s),e.pos=o*this.pageSize+d+s.length),e.pages[o].pendingOps--,e.__statusPage("After Op done: ",o),n=e.pos,o++,e.pendingLoads.length>0&&setImmediate(e._triggerLoad.bind(e))}return c}}function e2(i){const t=i.initialSize||1048576,e=new hc;return e.o=i,e.o.data=new Uint8Array(t),e.allocSize=t,e.totalSize=0,e.readOnly=!1,e.pos=0,e}function n2(i){const t=new hc;return t.o=i,t.allocSize=i.data.byteLength,t.totalSize=i.data.byteLength,t.readOnly=!0,t.pos=0,t}const qo=new Uint8Array(4),kr=new DataView(qo.buffer),fc=new Uint8Array(8),Rr=new DataView(fc.buffer);class hc{constructor(){this.pageSize=1<<14}_resizeIfNeeded(t){if(t>this.allocSize){const e=Math.max(this.allocSize+1048576,Math.floor(this.allocSize*1.1),t),n=new Uint8Array(e);n.set(this.o.data),this.o.data=n,this.allocSize=e}}async write(t,e){if(typeof e>"u"&&(e=this.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(e+t.byteLength),this.o.data.set(t.slice(),e),e+t.byteLength>this.totalSize&&(this.totalSize=e+t.byteLength),this.pos=e+t.byteLength}async readToBuffer(t,e,n,o){if(typeof o>"u"&&(o=this.pos),this.readOnly&&o+n>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(o+n);const c=new Uint8Array(this.o.data.buffer,this.o.data.byteOffset+o,n);t.set(c,e),this.pos=o+n}async read(t,e){const n=this,o=new Uint8Array(t);return await n.readToBuffer(o,0,t,e),o}close(){this.o.data.byteLength!=this.totalSize&&(this.o.data=this.o.data.slice(0,this.totalSize))}async discard(){}async writeULE32(t,e){const n=this;kr.setUint32(0,t,!0),await n.write(qo,e)}async writeUBE32(t,e){const n=this;kr.setUint32(0,t,!1),await n.write(qo,e)}async writeULE64(t,e){const n=this;Rr.setUint32(0,t&4294967295,!0),Rr.setUint32(4,Math.floor(t/4294967296),!0),await n.write(fc,e)}async readULE32(t){const n=await this.read(4,t);return new Uint32Array(n.buffer)[0]}async readUBE32(t){const n=await this.read(4,t);return new DataView(n.buffer).getUint32(0,!1)}async readULE64(t){const n=await this.read(8,t),o=new Uint32Array(n.buffer);return o[1]*4294967296+o[0]}async readString(t){const e=this;let n=typeof t>"u"?e.pos:t;if(n>this.totalSize){if(this.readOnly)throw new Error("Reading out of bounds");this._resizeIfNeeded(t)}const o=new Uint8Array(e.o.data.buffer,n,this.totalSize-n);let a=o.findIndex(d=>d===0),c=a!==-1,l="";return c?(l=new TextDecoder().decode(o.slice(0,a)),e.pos=n+a+1):e.pos=n,l}}const Kt=1<<22;function i2(i){const t=i.initialSize||0,e=new pc;e.o=i;const n=t?Math.floor((t-1)/Kt)+1:0;e.o.data=[];for(let o=0;o<n-1;o++)e.o.data.push(new Uint8Array(Kt));return n&&e.o.data.push(new Uint8Array(t-Kt*(n-1))),e.totalSize=0,e.readOnly=!1,e.pos=0,e}function o2(i){const t=new pc;return t.o=i,t.totalSize=(i.data.length-1)*Kt+i.data[i.data.length-1].byteLength,t.readOnly=!0,t.pos=0,t}const ko=new Uint8Array(4),Nr=new DataView(ko.buffer),_c=new Uint8Array(8),Dr=new DataView(_c.buffer);class pc{constructor(){this.pageSize=1<<14}_resizeIfNeeded(t){if(t<=this.totalSize)return;if(this.readOnly)throw new Error("Reading out of file bounds");const e=Math.floor((t-1)/Kt)+1;for(let n=Math.max(this.o.data.length-1,0);n<e;n++){const o=n<e-1?Kt:t-(e-1)*Kt,a=new Uint8Array(o);n==this.o.data.length-1&&a.set(this.o.data[n]),this.o.data[n]=a}this.totalSize=t}async write(t,e){const n=this;if(typeof e>"u"&&(e=n.pos),this.readOnly)throw new Error("Writing a read only file");this._resizeIfNeeded(e+t.byteLength);let a=Math.floor(e/Kt),c=e%Kt,l=t.byteLength;for(;l>0;){const d=c+l>Kt?Kt-c:l,s=t.slice(t.byteLength-l,t.byteLength-l+d);new Uint8Array(n.o.data[a].buffer,c,d).set(s),l=l-d,a++,c=0}this.pos=e+t.byteLength}async readToBuffer(t,e,n,o){const a=this;if(typeof o>"u"&&(o=a.pos),this.readOnly&&o+n>this.totalSize)throw new Error("Reading out of bounds");this._resizeIfNeeded(o+n);let l=Math.floor(o/Kt),d=o%Kt,s=n;for(;s>0;){const r=d+s>Kt?Kt-d:s,g=new Uint8Array(a.o.data[l].buffer,d,r);t.set(g,e+n-s),s=s-r,l++,d=0}this.pos=o+n}async read(t,e){const n=this,o=new Uint8Array(t);return await n.readToBuffer(o,0,t,e),o}close(){}async discard(){}async writeULE32(t,e){const n=this;Nr.setUint32(0,t,!0),await n.write(ko,e)}async writeUBE32(t,e){const n=this;Nr.setUint32(0,t,!1),await n.write(ko,e)}async writeULE64(t,e){const n=this;Dr.setUint32(0,t&4294967295,!0),Dr.setUint32(4,Math.floor(t/4294967296),!0),await n.write(_c,e)}async readULE32(t){const n=await this.read(4,t);return new Uint32Array(n.buffer)[0]}async readUBE32(t){const n=await this.read(4,t);return new DataView(n.buffer).getUint32(0,!1)}async readULE64(t){const n=await this.read(8,t),o=new Uint32Array(n.buffer);return o[1]*4294967296+o[0]}async readString(t){const e=this,n=2048;let o=typeof t>"u"?e.pos:t;if(o>this.totalSize){if(this.readOnly)throw new Error("Reading out of bounds");this._resizeIfNeeded(t)}let a=!1,c="";for(;!a;){let l=Math.floor(o/Kt),d=o%Kt;if(e.o.data[l]===void 0)throw new Error("ERROR");let s=Math.min(n,e.o.data[l].length-d);const r=new Uint8Array(e.o.data[l].buffer,d,s);let g=r.findIndex(L=>L===0);a=g!==-1,a?(c+=new TextDecoder().decode(r.slice(0,g)),e.pos=l*Kt+d+g+1):(c+=new TextDecoder().decode(r),e.pos=l*Kt+d+r.length),o=e.pos}return c}}var a2=0,r2=2,s2=512,c2=1024;const gc=1<<16,mc=1<<13;async function yc(i,t,e){if(typeof i=="string"&&(i={type:"file",fileName:i,cacheSize:t||gc,pageSize:e||mc}),i.type=="file")return await dc(i.fileName,c2|s2|r2,i.cacheSize,i.pageSize);if(i.type=="mem")return e2(i);if(i.type=="bigMem")return i2(i);throw new Error("Invalid FastFile type: "+i.type)}async function Lc(i,t,e){if(i instanceof Uint8Array&&(i={type:"mem",data:i}),process.browser){if(typeof i=="string"){const n=await fetch(i).then(function(o){return o.arrayBuffer()}).then(function(o){return new Uint8Array(o)});i={type:"mem",data:n}}}else typeof i=="string"&&(i={type:"file",fileName:i,cacheSize:t||gc,pageSize:e||mc});if(i.type=="file")return await dc(i.fileName,a2,i.cacheSize,i.pageSize);if(i.type=="mem")return await n2(i);if(i.type=="bigMem")return await o2(i);throw new Error("Invalid FastFile type: "+i.type)}async function zr(i,t,e,n,o){const a=await Lc(i,n,o),c=await a.read(4);let l="";for(let g=0;g<4;g++)l+=String.fromCharCode(c[g]);if(l!=t)throw new Error(i+": Invalid File format");if(await a.readULE32()>e)throw new Error("Version not supported");const s=await a.readULE32();let r=[];for(let g=0;g<s;g++){let L=await a.readULE32(),m=await a.readULE64();typeof r[L]>"u"&&(r[L]=[]),r[L].push({p:a.pos,size:m}),a.pos+=m}return{fd:a,sections:r}}async function l2(i,t,e,n,o,a){const c=await yc(i,o,a),l=new Uint8Array(4);for(let d=0;d<4;d++)l[d]=t.charCodeAt(d);return await c.write(l,0),await c.writeULE32(e),await c.writeULE32(n),c}async function jr(i,t){if(typeof i.writingSection<"u")throw new Error("Already writing a section");await i.writeULE32(t),i.writingSection={pSectionSize:i.pos},await i.writeULE64(0)}async function Ur(i){if(typeof i.writingSection>"u")throw new Error("Not writing a section");const t=i.pos-i.writingSection.pSectionSize-8,e=i.pos;i.pos=i.writingSection.pSectionSize,await i.writeULE64(t),i.pos=e,delete i.writingSection}async function Ii(i,t,e){if(typeof i.readingSection<"u")throw new Error("Already reading a section");if(!t[e])throw new Error(i.fileName+": Missing section "+e);if(t[e].length>1)throw new Error(i.fileName+": Section Duplicated "+e);i.pos=t[e][0].p,i.readingSection=t[e][0]}async function Bi(i,t){if(typeof i.readingSection>"u")throw new Error("Not reading a section");if(!t&&i.pos-i.readingSection.p!=i.readingSection.size)throw new Error("Invalid section size reading");delete i.readingSection}async function u2(i,t,e,n){const o=new Uint8Array(e);uc.toRprLE(o,0,t,e),await i.write(o,n)}async function jn(i,t,e){const n=await i.read(t,e);return uc.fromRprLE(n,0,t)}async function Ge(i,t,e,n,o){if(n=typeof n>"u"?0:n,o=typeof o>"u"?t[e][0].size-n:o,n+o>t[e][0].size)throw new Error("Reading out of the range of the section");let a;return o<1<<30?a=new Uint8Array(o):a=new pi(o),await i.readToBuffer(a,0,o,t[e][0].p+n),a}const d2=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function bc(i,t){if(!t||t==10)return BigInt(i);if(t==16)return i.slice(0,2)=="0x"?BigInt(i):BigInt("0x"+i)}const f2=bc;function h2(i,t){let e=BigInt(0);t=BigInt(t);for(let n=0;n<i.length;n++)e=e*t+BigInt(i[n]);return e}function _2(i){const t=i.toString(16);return(t.length-1)*4+d2[parseInt(t[0],16)]}function p2(i){return BigInt(i)<BigInt(0)}function g2(i){return!i}function vc(i,t){return BigInt(i)<<BigInt(t)}function wc(i,t){return BigInt(i)>>BigInt(t)}const m2=vc,y2=wc;function L2(i){return(BigInt(i)&BigInt(1))==BigInt(1)}function b2(i){let t=BigInt(i);const e=[];for(;t;){if(t&BigInt(1)){const n=2-Number(t%BigInt(4));e.push(n),t=t-BigInt(n)}else e.push(0);t=t>>BigInt(1)}return e}function v2(i){let t=BigInt(i);const e=[];for(;t;)t&BigInt(1)?e.push(1):e.push(0),t=t>>BigInt(1);return e}function w2(i){if(i>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Number too big");return Number(i)}function E2(i,t){const e=[];let n=BigInt(i);for(t=BigInt(t);n;)e.unshift(Number(n%t)),n=n/t;return e}function F2(i,t){return BigInt(i)+BigInt(t)}function C2(i,t){return BigInt(i)-BigInt(t)}function A2(i){return-BigInt(i)}function S2(i,t){return BigInt(i)*BigInt(t)}function x2(i){return BigInt(i)*BigInt(i)}function O2(i,t){return BigInt(i)**BigInt(t)}function I2(i,t){return BigInt(i)**BigInt(t)}function B2(i){return BigInt(i)>=0?BigInt(i):-BigInt(i)}function P2(i,t){return BigInt(i)/BigInt(t)}function T2(i,t){return BigInt(i)%BigInt(t)}function M2(i,t){return BigInt(i)==BigInt(t)}function q2(i,t){return BigInt(i)!=BigInt(t)}function k2(i,t){return BigInt(i)<BigInt(t)}function R2(i,t){return BigInt(i)>BigInt(t)}function N2(i,t){return BigInt(i)<=BigInt(t)}function D2(i,t){return BigInt(i)>=BigInt(t)}function z2(i,t){return BigInt(i)&BigInt(t)}function j2(i,t){return BigInt(i)|BigInt(t)}function U2(i,t){return BigInt(i)^BigInt(t)}function $2(i,t){return BigInt(i)&&BigInt(t)}function V2(i,t){return BigInt(i)||BigInt(t)}function Q2(i){return!BigInt(i)}const G2=Object.freeze(Object.defineProperty({__proto__:null,fromString:bc,e:f2,fromArray:h2,bitLength:_2,isNegative:p2,isZero:g2,shiftLeft:vc,shiftRight:wc,shl:m2,shr:y2,isOdd:L2,naf:b2,bits:v2,toNumber:w2,toArray:E2,add:F2,sub:C2,neg:A2,mul:S2,square:x2,pow:O2,exp:I2,abs:B2,div:P2,mod:T2,eq:M2,neq:q2,lt:k2,gt:R2,leq:N2,geq:D2,band:z2,bor:j2,bxor:U2,land:$2,lor:V2,lnot:Q2},Symbol.toStringTag,{value:"Module"}));function Ec(i,t){return typeof i=="string"?i.slice(0,2)=="0x"?lt(i.slice(2),16):lt(i,t):lt(i,t)}const W2=Ec;function Z2(i,t){return lt.fromArray(i,t)}function J2(i){return lt(i).bitLength()}function H2(i){return lt(i).isNegative()}function X2(i){return lt(i).isZero()}function Fc(i,t){return lt(i).shiftLeft(t)}function Cc(i,t){return lt(i).shiftRight(t)}const Y2=Fc,K2=Cc;function t_(i){return lt(i).isOdd()}function e_(i){let t=lt(i);const e=[];for(;t.gt(lt.zero);){if(t.isOdd()){const n=2-t.mod(4).toJSNumber();e.push(n),t=t.minus(n)}else e.push(0);t=t.shiftRight(1)}return e}function n_(i){let t=lt(i);const e=[];for(;t.gt(lt.zero);)t.isOdd()?e.push(1):e.push(0),t=t.shiftRight(1);return e}function i_(i){if(!i.lt(lt("9007199254740992",10)))throw new Error("Number too big");return i.toJSNumber()}function o_(i,t){return lt(i).toArray(t)}function a_(i,t){return lt(i).add(lt(t))}function r_(i,t){return lt(i).minus(lt(t))}function s_(i){return lt.zero.minus(lt(i))}function c_(i,t){return lt(i).times(lt(t))}function l_(i){return lt(i).square()}function u_(i,t){return lt(i).pow(lt(t))}function d_(i,t){return lt(i).pow(lt(t))}function f_(i){return lt(i).abs()}function h_(i,t){return lt(i).divide(lt(t))}function __(i,t){return lt(i).mod(lt(t))}function p_(i,t){return lt(i).eq(lt(t))}function g_(i,t){return lt(i).neq(lt(t))}function m_(i,t){return lt(i).lt(lt(t))}function y_(i,t){return lt(i).gt(lt(t))}function L_(i,t){return lt(i).leq(lt(t))}function b_(i,t){return lt(i).geq(lt(t))}function v_(i,t){return lt(i).and(lt(t))}function w_(i,t){return lt(i).or(lt(t))}function E_(i,t){return lt(i).xor(lt(t))}function F_(i,t){return!lt(i).isZero()&&!lt(t).isZero()}function C_(i,t){return!lt(i).isZero()||!lt(t).isZero()}function A_(i){return lt(i).isZero()}const S_=Object.freeze(Object.defineProperty({__proto__:null,fromString:Ec,e:W2,fromArray:Z2,bitLength:J2,isNegative:H2,isZero:X2,shiftLeft:Fc,shiftRight:Cc,shl:Y2,shr:K2,isOdd:t_,naf:e_,bits:n_,toNumber:i_,toArray:o_,add:a_,sub:r_,neg:s_,mul:c_,square:l_,pow:u_,exp:d_,abs:f_,div:h_,mod:__,eq:p_,neq:g_,lt:m_,gt:y_,leq:L_,geq:b_,band:v_,bor:w_,bxor:E_,land:F_,lor:C_,lnot:A_},Symbol.toStringTag,{value:"Module"})),x_=typeof BigInt=="function";let Yt={};x_?Object.assign(Yt,G2):Object.assign(Yt,S_);Yt.toRprLE=function(t,e,n,o){const a="0000000"+n.toString(16),c=new Uint32Array(t.buffer,e,o/4),l=((a.length-7)*4-1>>5)+1;for(let d=0;d<l;d++)c[d]=parseInt(a.substring(a.length-8*d-8,a.length-8*d),16);for(let d=l;d<c.length;d++)c[d]=0;for(let d=c.length*4;d<o;d++)t[d]=Yt.toNumber(Yt.band(Yt.shiftRight(n,d*8),255))};Yt.toRprBE=function(t,e,n,o){const a="0000000"+n.toString(16),c=new DataView(t.buffer,t.byteOffset+e,o),l=((a.length-7)*4-1>>5)+1;for(let d=0;d<l;d++)c.setUint32(o-d*4-4,parseInt(a.substring(a.length-8*d-8,a.length-8*d),16),!1);for(let d=0;d<o/4-l;d++)c[d]=0};Yt.fromRprLE=function(t,e,n){n=n||t.byteLength,e=e||0;const o=new Uint32Array(t.buffer,e,n/4),a=new Array(n/4);return o.forEach((c,l)=>a[a.length-l-1]=c.toString(16).padStart(8,"0")),Yt.fromString(a.join(""),16)};Yt.fromRprBE=function(t,e,n){n=n||t.byteLength,e=e||0;const o=new DataView(t.buffer,t.byteOffset+e,n),a=new Array(n/4);for(let c=0;c<n/4;c++)a[c]=o.getUint32(c*4,!1).toString(16).padStart(8,"0");return Yt.fromString(a.join(""),16)};Yt.toString=function(t,e){return t.toString(e)};Yt.toLEBuff=function(t){const e=new Uint8Array(Math.floor((Yt.bitLength(t)-1)/8)+1);return Yt.toRprLE(e,0,t,e.byteLength),e};Yt.zero=Yt.e(0);Yt.one=Yt.e(1);let{toRprLE:gi,toRprBE:Ac,fromRprLE:Un,fromRprBE:Sc,toString:xc,toLEBuff:yn,zero:Oc,one:We,fromString:O_,e:te,fromArray:I_,bitLength:Pi,isNegative:Ic,isZero:Bc,shiftLeft:Ro,shiftRight:si,shl:B_,shr:P_,isOdd:va,naf:T_,bits:Pc,toNumber:M_,toArray:q_,add:wa,sub:Pe,neg:Tc,mul:Mc,square:k_,pow:Gn,exp:R_,abs:N_,div:Ln,mod:Ae,eq:Ze,neq:D_,lt:z_,gt:No,leq:j_,geq:qc,band:kc,bor:U_,bxor:$_,land:V_,lor:Q_,lnot:G_}=Yt;const W_=Object.freeze(Object.defineProperty({__proto__:null,toRprLE:gi,toRprBE:Ac,fromRprLE:Un,fromRprBE:Sc,toString:xc,toLEBuff:yn,zero:Oc,one:We,fromString:O_,e:te,fromArray:I_,bitLength:Pi,isNegative:Ic,isZero:Bc,shiftLeft:Ro,shiftRight:si,shl:B_,shr:P_,isOdd:va,naf:T_,bits:Pc,toNumber:M_,toArray:q_,add:wa,sub:Pe,neg:Tc,mul:Mc,square:k_,pow:Gn,exp:R_,abs:N_,div:Ln,mod:Ae,eq:Ze,neq:D_,lt:z_,gt:No,leq:j_,geq:qc,band:kc,bor:U_,bxor:$_,land:V_,lor:Q_,lnot:G_},Symbol.toStringTag,{value:"Module"}));function $r(i,t,e){if(Bc(e))return i.one;const n=Pc(e);if(n.length==0)return i.one;let o=t;for(let a=n.length-2;a>=0;a--)o=i.square(o),n[a]&&(o=i.mul(o,t));return o}function Rc(i){if(i.m%2==1)if(Ze(Ae(i.p,4),1))if(Ze(Ae(i.p,8),1))if(Ze(Ae(i.p,16),1))Z_(i);else if(Ze(Ae(i.p,16),9))J_(i);else throw new Error("Field withot sqrt");else if(Ze(Ae(i.p,8),5))H_(i);else throw new Error("Field withot sqrt");else Ze(Ae(i.p,4),3)&&X_(i);else{const t=Ae(Gn(i.p,i.m/2),4);t==1?Y_(i):t==3?K_(i):tp(i)}}function Z_(i){for(i.sqrt_q=Gn(i.p,i.m),i.sqrt_s=0,i.sqrt_t=Pe(i.sqrt_q,1);!va(i.sqrt_t);)i.sqrt_s=i.sqrt_s+1,i.sqrt_t=Ln(i.sqrt_t,2);let t=i.one;for(;i.eq(t,i.one);){const e=i.random();i.sqrt_z=i.pow(e,i.sqrt_t),t=i.pow(i.sqrt_z,2**(i.sqrt_s-1))}i.sqrt_tm1d2=Ln(Pe(i.sqrt_t,1),2),i.sqrt=function(e){const n=this;if(n.isZero(e))return n.zero;let o=n.pow(e,n.sqrt_tm1d2);const a=n.pow(n.mul(n.square(o),e),2**(n.sqrt_s-1));if(n.eq(a,n.negone))return null;let c=n.sqrt_s,l=n.mul(e,o),d=n.mul(l,o),s=n.sqrt_z;for(;!n.eq(d,n.one);){let r=n.square(d),g=1;for(;!n.eq(r,n.one);)r=n.square(r),g++;o=s;for(let L=0;L<c-g-1;L++)o=n.square(o);s=n.square(o),d=n.mul(d,s),l=n.mul(l,o),c=g}return n.geq(l,n.zero)?l:n.neg(l)}}function J_(i){i.sqrt=function(){throw new Error("Sqrt alg 4 not implemented")}}function H_(i){i.sqrt=function(){throw new Error("Sqrt alg 3 not implemented")}}function X_(i){i.sqrt_q=Gn(i.p,i.m),i.sqrt_e1=Ln(Pe(i.sqrt_q,3),4),i.sqrt=function(t){if(this.isZero(t))return this.zero;const e=this.pow(t,this.sqrt_e1),n=this.mul(this.square(e),t);if(this.eq(n,this.negone))return null;const o=this.mul(e,t);return i.geq(o,i.zero)?o:i.neg(o)}}function Y_(i){i.sqrt=function(){throw new Error("Sqrt alg 10 not implemented")}}function K_(i){i.sqrt_q=Gn(i.p,i.m/2),i.sqrt_e34=Ln(Pe(i.sqrt_q,3),4),i.sqrt_e12=Ln(Pe(i.sqrt_q,1),2),i.frobenius=function(t,e){return t%2==1?i.conjugate(e):e},i.sqrt=function(t){const e=this,n=e.pow(t,e.sqrt_e34),o=e.mul(e.square(n),t),a=e.mul(e.frobenius(1,o),o);if(e.eq(a,e.negone))return null;const c=e.mul(n,t);let l;if(e.eq(o,e.negone))l=e.mul(c,[e.F.zero,e.F.one]);else{const d=e.pow(e.add(e.one,o),e.sqrt_e12);l=e.mul(d,c)}return e.geq(l,e.zero)?l:e.neg(l)}}function tp(i){i.sqrt=function(){throw new Error("Sqrt alg 8 not implemented")}}function Re(i,t,e,n,o){i[t]=i[t]+i[e]>>>0,i[o]=(i[o]^i[t])>>>0,i[o]=(i[o]<<16|i[o]>>>16&65535)>>>0,i[n]=i[n]+i[o]>>>0,i[e]=(i[e]^i[n])>>>0,i[e]=(i[e]<<12|i[e]>>>20&4095)>>>0,i[t]=i[t]+i[e]>>>0,i[o]=(i[o]^i[t])>>>0,i[o]=(i[o]<<8|i[o]>>>24&255)>>>0,i[n]=i[n]+i[o]>>>0,i[e]=(i[e]^i[n])>>>0,i[e]=(i[e]<<7|i[e]>>>25&127)>>>0}function ep(i){Re(i,0,4,8,12),Re(i,1,5,9,13),Re(i,2,6,10,14),Re(i,3,7,11,15),Re(i,0,5,10,15),Re(i,1,6,11,12),Re(i,2,7,8,13),Re(i,3,4,9,14)}class np{constructor(t){t=t||[0,0,0,0,0,0,0,0],this.state=[1634760805,857760878,2036477234,1797285236,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],0,0,0,0],this.idx=16,this.buff=new Array(16)}nextU32(){return this.idx==16&&this.update(),this.buff[this.idx++]}nextU64(){return wa(Mc(this.nextU32(),4294967296),this.nextU32())}nextBool(){return(this.nextU32()&1)==1}update(){for(let t=0;t<16;t++)this.buff[t]=this.state[t];for(let t=0;t<10;t++)ep(this.buff);for(let t=0;t<16;t++)this.buff[t]=this.buff[t]+this.state[t]>>>0;this.idx=0,this.state[12]=this.state[12]+1>>>0,this.state[12]==0&&(this.state[13]=this.state[13]+1>>>0,this.state[13]==0&&(this.state[14]=this.state[14]+1>>>0,this.state[14]==0&&(this.state[15]=this.state[15]+1>>>0)))}}function Ea(i){let t=new Uint8Array(i);if(process.browser)if(typeof globalThis.crypto<"u")globalThis.crypto.getRandomValues(t);else for(let e=0;e<i;e++)t[e]=Math.random()*4294967296>>>0;else Go.randomFillSync(t);return t}function ip(){const i=Ea(32),t=new Uint32Array(i.buffer),e=[];for(let n=0;n<8;n++)e.push(t[n]);return e}let Xn=null;function Fa(){return Xn||(Xn=new np(ip()),Xn)}class Nc{constructor(t,e,n){this.F=e,this.G=t,this.opMulGF=n;let o=e.sqrt_t||e.t,a=e.sqrt_s||e.s,c=e.one;for(;e.eq(e.pow(c,e.half),e.one);)c=e.add(c,e.one);this.w=new Array(a+1),this.wi=new Array(a+1),this.w[a]=this.F.pow(c,o),this.wi[a]=this.F.inv(this.w[a]);let l=a-1;for(;l>=0;)this.w[l]=this.F.square(this.w[l+1]),this.wi[l]=this.F.square(this.wi[l+1]),l--;this.roots=[],this._setRoots(Math.min(a,15))}_setRoots(t){for(let e=t;e>=0&&!this.roots[e];e--){let n=this.F.one;const o=1<<e,a=new Array(o);for(let c=0;c<o;c++)a[c]=n,n=this.F.mul(n,this.w[e]);this.roots[e]=a}}fft(t){if(t.length<=1)return t;const e=Vr(t.length-1)+1;this._setRoots(e);const n=1<<e;if(t.length!=n)throw new Error("Size must be multiple of 2");return mi(this,t,e,0,1)}ifft(t){if(t.length<=1)return t;const e=Vr(t.length-1)+1;this._setRoots(e);const n=1<<e;if(t.length!=n)throw new Error("Size must be multiple of 2");const o=mi(this,t,e,0,1),a=this.F.inv(this.F.mulScalar(this.F.one,n)),c=new Array(n);for(let l=0;l<n;l++)c[l]=this.opMulGF(o[(n-l)%n],a);return c}}function Vr(i){return((i&4294901760)!==0?(i&=4294901760,16):0)|((i&4278255360)!==0?(i&=4278255360,8):0)|((i&4042322160)!==0?(i&=4042322160,4):0)|((i&3435973836)!==0?(i&=3435973836,2):0)|(i&2863311530)!==0}function mi(i,t,e,n,o){const a=1<<e;if(a==1)return[t[n]];if(a==2)return[i.G.add(t[n],t[n+o]),i.G.sub(t[n],t[n+o])];const c=a>>1,l=mi(i,t,e-1,n,o*2),d=mi(i,t,e-1,n+o,o*2),s=new Array(a);for(let r=0;r<c;r++)s[r]=i.G.add(l[r],i.opMulGF(d[r],i.roots[e][r])),s[r+c]=i.G.sub(l[r],i.opMulGF(d[r],i.roots[e][r]));return s}const op=Object.freeze(Object.defineProperty({__proto__:null,default:Nc},Symbol.toStringTag,{value:"Module"}));class ap{constructor(t){this.type="F1",this.one=BigInt(1),this.zero=BigInt(0),this.p=BigInt(t),this.m=1,this.negone=this.p-this.one,this.two=BigInt(2),this.half=this.p>>this.one,this.bitLength=Pi(this.p),this.mask=(this.one<<BigInt(this.bitLength))-this.one,this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=this.n64*2,this.n8=this.n64*8,this.R=this.e(this.one<<BigInt(this.n64*64)),this.Ri=this.inv(this.R);const e=this.negone>>this.one;this.nqr=this.two;let n=this.pow(this.nqr,e);for(;!this.eq(n,this.negone);)this.nqr=this.nqr+this.one,n=this.pow(this.nqr,e);for(this.s=0,this.t=this.negone;(this.t&this.one)==this.zero;)this.s=this.s+1,this.t=this.t>>this.one;this.nqr_to_t=this.pow(this.nqr,this.t),Rc(this),this.FFT=new Nc(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(t,e){let n;if(e?e==16&&(n=BigInt("0x"+t)):n=BigInt(t),n<0){let o=-n;return o>=this.p&&(o=o%this.p),this.p-o}else return n>=this.p?n%this.p:n}add(t,e){const n=t+e;return n>=this.p?n-this.p:n}sub(t,e){return t>=e?t-e:this.p-e+t}neg(t){return t&&this.p-t}mul(t,e){return t*e%this.p}mulScalar(t,e){return t*this.e(e)%this.p}square(t){return t*t%this.p}eq(t,e){return t==e}neq(t,e){return t!=e}lt(t,e){const n=t>this.half?t-this.p:t,o=e>this.half?e-this.p:e;return n<o}gt(t,e){const n=t>this.half?t-this.p:t,o=e>this.half?e-this.p:e;return n>o}leq(t,e){const n=t>this.half?t-this.p:t,o=e>this.half?e-this.p:e;return n<=o}geq(t,e){const n=t>this.half?t-this.p:t,o=e>this.half?e-this.p:e;return n>=o}div(t,e){return this.mul(t,this.inv(e))}idiv(t,e){if(!e)throw new Error("Division by zero");return t/e}inv(t){if(!t)throw new Error("Division by zero");let e=this.zero,n=this.p,o=this.one,a=t%this.p;for(;a;){let c=n/a;[e,o]=[o,e-c*o],[n,a]=[a,n-c*a]}return e<this.zero&&(e+=this.p),e}mod(t,e){return t%e}pow(t,e){return $r(this,t,e)}exp(t,e){return $r(this,t,e)}band(t,e){const n=t&e&this.mask;return n>=this.p?n-this.p:n}bor(t,e){const n=(t|e)&this.mask;return n>=this.p?n-this.p:n}bxor(t,e){const n=(t^e)&this.mask;return n>=this.p?n-this.p:n}bnot(t){const e=t^this.mask;return e>=this.p?e-this.p:e}shl(t,e){if(Number(e)<this.bitLength){const n=t<<e&this.mask;return n>=this.p?n-this.p:n}else{const n=this.p-e;return Number(n)<this.bitLength?t>>n:this.zero}}shr(t,e){if(Number(e)<this.bitLength)return t>>e;{const n=this.p-e;if(Number(n)<this.bitLength){const o=t<<n&this.mask;return o>=this.p?o-this.p:o}else return 0}}land(t,e){return t&&e?this.one:this.zero}lor(t,e){return t||e?this.one:this.zero}lnot(t){return t?this.zero:this.one}sqrt_old(t){if(t==this.zero)return this.zero;if(this.pow(t,this.negone>>this.one)!=this.one)return null;let n=this.s,o=this.nqr_to_t,a=this.pow(t,this.t),c=this.pow(t,this.add(this.t,this.one)>>this.one);for(;a!=this.one;){let l=this.square(a),d=1;for(;l!=this.one;)d++,l=this.square(l);let s=o;for(let r=0;r<n-d-1;r++)s=this.square(s);n=d,o=this.square(s),a=this.mul(a,o),c=this.mul(c,s)}return c>this.p>>this.one&&(c=this.neg(c)),c}normalize(t,e){if(t=BigInt(t,e),t<0){let n=-t;return n>=this.p&&(n=n%this.p),this.p-n}else return t>=this.p?t%this.p:t}random(){const t=this.bitLength*2/8;let e=this.zero;for(let n=0;n<t;n++)e=(e<<BigInt(8))+BigInt(Ea(1)[0]);return e%this.p}toString(t,e){e=e||10;let n;if(t>this.half&&e==10){const o=this.p-t;n="-"+o.toString(e)}else n=t.toString(e);return n}isZero(t){return t==this.zero}fromRng(t){let e;do{e=this.zero;for(let n=0;n<this.n64;n++)e+=t.nextU64()<<BigInt(64*n);e&=this.mask}while(e>=this.p);return e=e*this.Ri%this.p,e}fft(t){return this.FFT.fft(t)}ifft(t){return this.FFT.ifft(t)}}class rp{constructor(t){this.type="F1",this.one=lt.one,this.zero=lt.zero,this.p=lt(t),this.m=1,this.negone=this.p.minus(lt.one),this.two=lt(2),this.half=this.p.shiftRight(1),this.bitLength=this.p.bitLength(),this.mask=lt.one.shiftLeft(this.bitLength).minus(lt.one),this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=this.n64*2,this.n8=this.n64*8,this.R=lt.one.shiftLeft(this.n64*64),this.Ri=this.inv(this.R);const e=this.negone.shiftRight(this.one);this.nqr=this.two;let n=this.pow(this.nqr,e);for(;!n.equals(this.negone);)this.nqr=this.nqr.add(this.one),n=this.pow(this.nqr,e);for(this.s=this.zero,this.t=this.negone;!this.t.isOdd();)this.s=this.s.add(this.one),this.t=this.t.shiftRight(this.one);this.nqr_to_t=this.pow(this.nqr,this.t),Rc(this),this.FFT=new op(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(t,e){const n=lt(t,e);return this.normalize(n)}add(t,e){let n=t.add(e);return n.geq(this.p)&&(n=n.minus(this.p)),n}sub(t,e){return t.geq(e)?t.minus(e):this.p.minus(e.minus(t))}neg(t){return t.isZero()?t:this.p.minus(t)}mul(t,e){return t.times(e).mod(this.p)}mulScalar(t,e){return t.times(lt(e)).mod(this.p)}square(t){return t.square().mod(this.p)}eq(t,e){return t.eq(e)}neq(t,e){return t.neq(e)}lt(t,e){const n=t.gt(this.half)?t.minus(this.p):t,o=e.gt(this.half)?e.minus(this.p):e;return n.lt(o)}gt(t,e){const n=t.gt(this.half)?t.minus(this.p):t,o=e.gt(this.half)?e.minus(this.p):e;return n.gt(o)}leq(t,e){const n=t.gt(this.half)?t.minus(this.p):t,o=e.gt(this.half)?e.minus(this.p):e;return n.leq(o)}geq(t,e){const n=t.gt(this.half)?t.minus(this.p):t,o=e.gt(this.half)?e.minus(this.p):e;return n.geq(o)}div(t,e){if(e.isZero())throw new Error("Division by zero");return t.times(e.modInv(this.p)).mod(this.p)}idiv(t,e){if(e.isZero())throw new Error("Division by zero");return t.divide(e)}inv(t){if(t.isZero())throw new Error("Division by zero");return t.modInv(this.p)}mod(t,e){return t.mod(e)}pow(t,e){return t.modPow(e,this.p)}exp(t,e){return t.modPow(e,this.p)}band(t,e){return t.and(e).and(this.mask).mod(this.p)}bor(t,e){return t.or(e).and(this.mask).mod(this.p)}bxor(t,e){return t.xor(e).and(this.mask).mod(this.p)}bnot(t){return t.xor(this.mask).mod(this.p)}shl(t,e){if(e.lt(this.bitLength))return t.shiftLeft(e).and(this.mask).mod(this.p);{const n=this.p.minus(e);return n.lt(this.bitLength)?this.shr(t,n):lt.zero}}shr(t,e){if(e.lt(this.bitLength))return t.shiftRight(e);{const n=this.p.minus(e);return n.lt(this.bitLength)?this.shl(t,n):lt.zero}}land(t,e){return t.isZero()||e.isZero()?lt.zero:lt.one}lor(t,e){return t.isZero()&&e.isZero()?lt.zero:lt.one}lnot(t){return t.isZero()?lt.one:lt.zero}sqrt_old(t){if(t.equals(this.zero))return this.zero;if(!this.pow(t,this.negone.shiftRight(this.one)).equals(this.one))return null;let n=parseInt(this.s),o=this.nqr_to_t,a=this.pow(t,this.t),c=this.pow(t,this.add(this.t,this.one).shiftRight(this.one));for(;!a.equals(this.one);){let l=this.square(a),d=1;for(;!l.equals(this.one);)d++,l=this.square(l);let s=o;for(let r=0;r<n-d-1;r++)s=this.square(s);n=d,o=this.square(s),a=this.mul(a,o),c=this.mul(c,s)}return c.greater(this.p.shiftRight(this.one))&&(c=this.neg(c)),c}normalize(t){return t=lt(t),t.isNegative()?this.p.minus(t.abs().mod(this.p)):t.mod(this.p)}random(){let t=lt(0),e=lt(this.p.square());for(;!e.isZero();)t=t.shiftLeft(8).add(lt(Ea(1)[0])),e=e.shiftRight(8);return t.mod(this.p)}toString(t,e){e=e||10;let n;if(!t.lesserOrEquals(this.p.shiftRight(lt(1)))&&e==10){const o=this.p.minus(t);n="-"+o.toString(e)}else n=t.toString(e);return n}isZero(t){return t.isZero()}fromRng(t){let e;do{e=lt(0);for(let n=0;n<this.n64;n++)e=e.add(e,t.nextU64().shiftLeft(64*n));e=e.and(this.mask)}while(e.geq(this.p));return e=e.times(this.Ri).mod(this.q),e}fft(t){return this.FFT.fft(t)}ifft(t){return this.FFT.ifft(t)}}const sp=typeof BigInt=="function";let Do;sp?Do=ap:Do=rp;class cp extends Do{toRprLE(t,e,n){gi(t,e,n,this.n64*8)}toRprBE(t,e,n){Ac(t,e,n,this.n64*8)}toRprBEM(t,e,n){return this.toRprBE(t,e,this.mul(this.R,n))}toRprLEM(t,e,n){return this.toRprLE(t,e,this.mul(this.R,n))}fromRprLE(t,e){return Un(t,e,this.n8)}fromRprBE(t,e){return Sc(t,e,this.n8)}fromRprLEM(t,e){return this.mul(this.fromRprLE(t,e),this.Ri)}fromRprBEM(t,e){return this.mul(this.fromRprBE(t,e),this.Ri)}toObject(t){return t}}var Me={};const Dc=Qe.exports;Me.bigInt2BytesLE=function(t,e){const n=Array(e);let o=Dc(t);for(let a=0;a<e;a++)n[a]=o.and(255).toJSNumber(),o=o.shiftRight(8);return n};Me.bigInt2U32LE=function(t,e){const n=Array(e);let o=Dc(t);for(let a=0;a<e;a++)n[a]=o.and(4294967295).toJSNumber(),o=o.shiftRight(32);return n};Me.isOcamNum=function(i){return!(!Array.isArray(i)||i.length!=3||typeof i[0]!="number"||typeof i[1]!="number"||!Array.isArray(i[2]))};const lp=Me;var up=function(t,e,n){const o=n||"int";if(t.modules[o])return o;t.modules[o]={};const a=e*2,c=e*8;t.alloc(c,lp.bigInt2BytesLE(1,c));function l(){const E=t.addFunction(o+"_copy");E.addParam("px","i32"),E.addParam("pr","i32");const f=E.getCodeBuilder();for(let y=0;y<e;y++)E.addCode(f.i64_store(f.getLocal("pr"),y*8,f.i64_load(f.getLocal("px"),y*8)))}function d(){const E=t.addFunction(o+"_zero");E.addParam("pr","i32");const f=E.getCodeBuilder();for(let y=0;y<e;y++)E.addCode(f.i64_store(f.getLocal("pr"),y*8,f.i64_const(0)))}function s(){const E=t.addFunction(o+"_one");E.addParam("pr","i32");const f=E.getCodeBuilder();E.addCode(f.i64_store(f.getLocal("pr"),0,f.i64_const(1)));for(let y=1;y<e;y++)E.addCode(f.i64_store(f.getLocal("pr"),y*8,f.i64_const(0)))}function r(){const E=t.addFunction(o+"_isZero");E.addParam("px","i32"),E.setReturnType("i32");const f=E.getCodeBuilder();function y(I){return I==0?f.ret(f.i64_eqz(f.i64_load(f.getLocal("px")))):f.if(f.i64_eqz(f.i64_load(f.getLocal("px"),I*8)),y(I-1),f.ret(f.i32_const(0)))}E.addCode(y(e-1)),E.addCode(f.ret(f.i32_const(0)))}function g(){const E=t.addFunction(o+"_eq");E.addParam("px","i32"),E.addParam("py","i32"),E.setReturnType("i32");const f=E.getCodeBuilder();function y(I){return I==0?f.ret(f.i64_eq(f.i64_load(f.getLocal("px")),f.i64_load(f.getLocal("py")))):f.if(f.i64_eq(f.i64_load(f.getLocal("px"),I*8),f.i64_load(f.getLocal("py"),I*8)),y(I-1),f.ret(f.i32_const(0)))}E.addCode(y(e-1)),E.addCode(f.ret(f.i32_const(0)))}function L(){const E=t.addFunction(o+"_gte");E.addParam("px","i32"),E.addParam("py","i32"),E.setReturnType("i32");const f=E.getCodeBuilder();function y(I){return I==0?f.ret(f.i64_ge_u(f.i64_load(f.getLocal("px")),f.i64_load(f.getLocal("py")))):f.if(f.i64_lt_u(f.i64_load(f.getLocal("px"),I*8),f.i64_load(f.getLocal("py"),I*8)),f.ret(f.i32_const(0)),f.if(f.i64_gt_u(f.i64_load(f.getLocal("px"),I*8),f.i64_load(f.getLocal("py"),I*8)),f.ret(f.i32_const(1)),y(I-1)))}E.addCode(y(e-1)),E.addCode(f.ret(f.i32_const(0)))}function m(){const E=t.addFunction(o+"_add");E.addParam("x","i32"),E.addParam("y","i32"),E.addParam("r","i32"),E.setReturnType("i32"),E.addLocal("c","i64");const f=E.getCodeBuilder();E.addCode(f.setLocal("c",f.i64_add(f.i64_load32_u(f.getLocal("x")),f.i64_load32_u(f.getLocal("y"))))),E.addCode(f.i64_store32(f.getLocal("r"),f.getLocal("c")));for(let y=1;y<a;y++)E.addCode(f.setLocal("c",f.i64_add(f.i64_add(f.i64_load32_u(f.getLocal("x"),4*y),f.i64_load32_u(f.getLocal("y"),4*y)),f.i64_shr_u(f.getLocal("c"),f.i64_const(32))))),E.addCode(f.i64_store32(f.getLocal("r"),y*4,f.getLocal("c")));E.addCode(f.i32_wrap_i64(f.i64_shr_u(f.getLocal("c"),f.i64_const(32))))}function C(){const E=t.addFunction(o+"_sub");E.addParam("x","i32"),E.addParam("y","i32"),E.addParam("r","i32"),E.setReturnType("i32"),E.addLocal("c","i64");const f=E.getCodeBuilder();E.addCode(f.setLocal("c",f.i64_sub(f.i64_load32_u(f.getLocal("x")),f.i64_load32_u(f.getLocal("y"))))),E.addCode(f.i64_store32(f.getLocal("r"),f.i64_and(f.getLocal("c"),f.i64_const("0xFFFFFFFF"))));for(let y=1;y<a;y++)E.addCode(f.setLocal("c",f.i64_add(f.i64_sub(f.i64_load32_u(f.getLocal("x"),4*y),f.i64_load32_u(f.getLocal("y"),4*y)),f.i64_shr_s(f.getLocal("c"),f.i64_const(32))))),E.addCode(f.i64_store32(f.getLocal("r"),y*4,f.i64_and(f.getLocal("c"),f.i64_const("0xFFFFFFFF"))));E.addCode(f.i32_wrap_i64(f.i64_shr_s(f.getLocal("c"),f.i64_const(32))))}function A(){const E=t.addFunction(o+"_mul");E.addParam("x","i32"),E.addParam("y","i32"),E.addParam("r","i32"),E.addLocal("c0","i64"),E.addLocal("c1","i64");for(let v=0;v<a;v++)E.addLocal("x"+v,"i64"),E.addLocal("y"+v,"i64");const f=E.getCodeBuilder(),y=[],I=[];function k(v,P){let V,at;return y[v]?V=f.getLocal("x"+v):(V=f.teeLocal("x"+v,f.i64_load32_u(f.getLocal("x"),v*4)),y[v]=!0),I[P]?at=f.getLocal("y"+P):(at=f.teeLocal("y"+P,f.i64_load32_u(f.getLocal("y"),P*4)),I[P]=!0),f.i64_mul(V,at)}let O="c0",x="c1";for(let v=0;v<a*2-1;v++){for(let P=Math.max(0,v-a+1);P<=v&&P<a;P++){const V=v-P;E.addCode(f.setLocal(O,f.i64_add(f.i64_and(f.getLocal(O),f.i64_const(4294967295)),k(P,V)))),E.addCode(f.setLocal(x,f.i64_add(f.getLocal(x),f.i64_shr_u(f.getLocal(O),f.i64_const(32)))))}E.addCode(f.i64_store32(f.getLocal("r"),v*4,f.getLocal(O))),[O,x]=[x,O],E.addCode(f.setLocal(x,f.i64_shr_u(f.getLocal(O),f.i64_const(32))))}E.addCode(f.i64_store32(f.getLocal("r"),a*4*2-4,f.getLocal(O)))}function w(){const E=t.addFunction(o+"_square");E.addParam("x","i32"),E.addParam("r","i32"),E.addLocal("c0","i64"),E.addLocal("c1","i64"),E.addLocal("c0_old","i64"),E.addLocal("c1_old","i64");for(let P=0;P<a;P++)E.addLocal("x"+P,"i64");const f=E.getCodeBuilder(),y=[];function I(P,V){let at,et;return y[P]?at=f.getLocal("x"+P):(at=f.teeLocal("x"+P,f.i64_load32_u(f.getLocal("x"),P*4)),y[P]=!0),y[V]?et=f.getLocal("x"+V):(et=f.teeLocal("x"+V,f.i64_load32_u(f.getLocal("x"),V*4)),y[V]=!0),f.i64_mul(at,et)}let k="c0",O="c1",x="c0_old",v="c1_old";for(let P=0;P<a*2-1;P++){E.addCode(f.setLocal(k,f.i64_const(0)),f.setLocal(O,f.i64_const(0)));for(let V=Math.max(0,P-a+1);V<P+1>>1&&V<a;V++){const at=P-V;E.addCode(f.setLocal(k,f.i64_add(f.i64_and(f.getLocal(k),f.i64_const(4294967295)),I(V,at)))),E.addCode(f.setLocal(O,f.i64_add(f.getLocal(O),f.i64_shr_u(f.getLocal(k),f.i64_const(32)))))}E.addCode(f.setLocal(k,f.i64_shl(f.i64_and(f.getLocal(k),f.i64_const(4294967295)),f.i64_const(1)))),E.addCode(f.setLocal(O,f.i64_add(f.i64_shl(f.getLocal(O),f.i64_const(1)),f.i64_shr_u(f.getLocal(k),f.i64_const(32))))),P%2==0&&(E.addCode(f.setLocal(k,f.i64_add(f.i64_and(f.getLocal(k),f.i64_const(4294967295)),I(P>>1,P>>1)))),E.addCode(f.setLocal(O,f.i64_add(f.getLocal(O),f.i64_shr_u(f.getLocal(k),f.i64_const(32)))))),P>0&&(E.addCode(f.setLocal(k,f.i64_add(f.i64_and(f.getLocal(k),f.i64_const(4294967295)),f.i64_and(f.getLocal(x),f.i64_const(4294967295))))),E.addCode(f.setLocal(O,f.i64_add(f.i64_add(f.getLocal(O),f.i64_shr_u(f.getLocal(k),f.i64_const(32))),f.getLocal(v))))),E.addCode(f.i64_store32(f.getLocal("r"),P*4,f.getLocal(k))),E.addCode(f.setLocal(x,f.getLocal(O)),f.setLocal(v,f.i64_shr_u(f.getLocal(x),f.i64_const(32))))}E.addCode(f.i64_store32(f.getLocal("r"),a*4*2-4,f.getLocal(x)))}function T(){const E=t.addFunction(o+"_squareOld");E.addParam("x","i32"),E.addParam("r","i32");const f=E.getCodeBuilder();E.addCode(f.call(o+"_mul",f.getLocal("x"),f.getLocal("x"),f.getLocal("r")))}function F(){const E=t.addFunction(o+"__mul1");E.addParam("px","i32"),E.addParam("y","i64"),E.addParam("pr","i32"),E.addLocal("c","i64");const f=E.getCodeBuilder();E.addCode(f.setLocal("c",f.i64_mul(f.i64_load32_u(f.getLocal("px"),0,0),f.getLocal("y")))),E.addCode(f.i64_store32(f.getLocal("pr"),0,0,f.getLocal("c")));for(let y=1;y<a;y++)E.addCode(f.setLocal("c",f.i64_add(f.i64_mul(f.i64_load32_u(f.getLocal("px"),4*y,0),f.getLocal("y")),f.i64_shr_u(f.getLocal("c"),f.i64_const(32))))),E.addCode(f.i64_store32(f.getLocal("pr"),y*4,0,f.getLocal("c")))}function R(){const E=t.addFunction(o+"__add1");E.addParam("x","i32"),E.addParam("y","i64"),E.addLocal("c","i64"),E.addLocal("px","i32");const f=E.getCodeBuilder();E.addCode(f.setLocal("px",f.getLocal("x"))),E.addCode(f.setLocal("c",f.i64_add(f.i64_load32_u(f.getLocal("px"),0,0),f.getLocal("y")))),E.addCode(f.i64_store32(f.getLocal("px"),0,0,f.getLocal("c"))),E.addCode(f.setLocal("c",f.i64_shr_u(f.getLocal("c"),f.i64_const(32)))),E.addCode(f.block(f.loop(f.br_if(1,f.i64_eqz(f.getLocal("c"))),f.setLocal("px",f.i32_add(f.getLocal("px"),f.i32_const(4))),f.setLocal("c",f.i64_add(f.i64_load32_u(f.getLocal("px"),0,0),f.getLocal("c"))),f.i64_store32(f.getLocal("px"),0,0,f.getLocal("c")),f.setLocal("c",f.i64_shr_u(f.getLocal("c"),f.i64_const(32))),f.br(0))))}function q(){F(),R();const E=t.addFunction(o+"_div");E.addParam("x","i32"),E.addParam("y","i32"),E.addParam("c","i32"),E.addParam("r","i32"),E.addLocal("rr","i32"),E.addLocal("cc","i32"),E.addLocal("eX","i32"),E.addLocal("eY","i32"),E.addLocal("sy","i64"),E.addLocal("sx","i64"),E.addLocal("ec","i32");const f=E.getCodeBuilder(),y=f.i32_const(t.alloc(c)),I=f.i32_const(t.alloc(c)),k=f.i32_const(t.alloc(c)),O=f.getLocal("cc"),x=f.getLocal("rr"),v=t.alloc(c*2),P=f.i32_const(v),V=f.i32_const(v+c);E.addCode(f.if(f.getLocal("c"),f.setLocal("cc",f.getLocal("c")),f.setLocal("cc",I))),E.addCode(f.if(f.getLocal("r"),f.setLocal("rr",f.getLocal("r")),f.setLocal("rr",k))),E.addCode(f.call(o+"_copy",f.getLocal("x"),x)),E.addCode(f.call(o+"_copy",f.getLocal("y"),y)),E.addCode(f.call(o+"_zero",O)),E.addCode(f.call(o+"_zero",P)),E.addCode(f.setLocal("eX",f.i32_const(c-1))),E.addCode(f.setLocal("eY",f.i32_const(c-1))),E.addCode(f.block(f.loop(f.br_if(1,f.i32_or(f.i32_load8_u(f.i32_add(y,f.getLocal("eY")),0,0),f.i32_eq(f.getLocal("eY"),f.i32_const(3)))),f.setLocal("eY",f.i32_sub(f.getLocal("eY"),f.i32_const(1))),f.br(0)))),E.addCode(f.setLocal("sy",f.i64_add(f.i64_load32_u(f.i32_sub(f.i32_add(y,f.getLocal("eY")),f.i32_const(3)),0,0),f.i64_const(1)))),E.addCode(f.if(f.i64_eq(f.getLocal("sy"),f.i64_const(1)),f.drop(f.i64_div_u(f.i64_const(0),f.i64_const(0))))),E.addCode(f.block(f.loop(f.block(f.loop(f.br_if(1,f.i32_or(f.i32_load8_u(f.i32_add(x,f.getLocal("eX")),0,0),f.i32_eq(f.getLocal("eX"),f.i32_const(7)))),f.setLocal("eX",f.i32_sub(f.getLocal("eX"),f.i32_const(1))),f.br(0))),f.setLocal("sx",f.i64_load(f.i32_sub(f.i32_add(x,f.getLocal("eX")),f.i32_const(7)),0,0)),f.setLocal("sx",f.i64_div_u(f.getLocal("sx"),f.getLocal("sy"))),f.setLocal("ec",f.i32_sub(f.i32_sub(f.getLocal("eX"),f.getLocal("eY")),f.i32_const(4))),f.block(f.loop(f.br_if(1,f.i32_and(f.i64_eqz(f.i64_and(f.getLocal("sx"),f.i64_const("0xFFFFFFFF00000000"))),f.i32_ge_s(f.getLocal("ec"),f.i32_const(0)))),f.setLocal("sx",f.i64_shr_u(f.getLocal("sx"),f.i64_const(8))),f.setLocal("ec",f.i32_add(f.getLocal("ec"),f.i32_const(1))),f.br(0))),f.if(f.i64_eqz(f.getLocal("sx")),[...f.br_if(2,f.i32_eqz(f.call(o+"_gte",x,y))),...f.setLocal("sx",f.i64_const(1)),...f.setLocal("ec",f.i32_const(0))]),f.call(o+"__mul1",y,f.getLocal("sx"),V),f.drop(f.call(o+"_sub",x,f.i32_sub(V,f.getLocal("ec")),x)),f.call(o+"__add1",f.i32_add(O,f.getLocal("ec")),f.getLocal("sx")),f.br(0))))}function Z(){const E=t.addFunction(o+"_inverseMod");E.addParam("px","i32"),E.addParam("pm","i32"),E.addParam("pr","i32"),E.addLocal("t","i32"),E.addLocal("newt","i32"),E.addLocal("r","i32"),E.addLocal("qq","i32"),E.addLocal("qr","i32"),E.addLocal("newr","i32"),E.addLocal("swp","i32"),E.addLocal("x","i32"),E.addLocal("signt","i32"),E.addLocal("signnewt","i32"),E.addLocal("signx","i32");const f=E.getCodeBuilder(),y=f.i32_const(t.alloc(c)),I=f.i32_const(t.alloc(c)),k=f.i32_const(t.alloc(c)),O=f.i32_const(t.alloc(c)),x=f.i32_const(t.alloc(c)),v=f.i32_const(t.alloc(c)),P=f.i32_const(t.alloc(c*2)),V=f.i32_const(t.alloc(c));E.addCode(f.setLocal("t",y),f.call(o+"_zero",y),f.setLocal("signt",f.i32_const(0))),E.addCode(f.setLocal("r",I),f.call(o+"_copy",f.getLocal("pm"),I)),E.addCode(f.setLocal("newt",k),f.call(o+"_one",k),f.setLocal("signnewt",f.i32_const(0))),E.addCode(f.setLocal("newr",O),f.call(o+"_copy",f.getLocal("px"),O)),E.addCode(f.setLocal("qq",x)),E.addCode(f.setLocal("qr",v)),E.addCode(f.setLocal("x",V)),E.addCode(f.block(f.loop(f.br_if(1,f.call(o+"_isZero",f.getLocal("newr"))),f.call(o+"_div",f.getLocal("r"),f.getLocal("newr"),f.getLocal("qq"),f.getLocal("qr")),f.call(o+"_mul",f.getLocal("qq"),f.getLocal("newt"),P),f.if(f.getLocal("signt"),f.if(f.getLocal("signnewt"),f.if(f.call(o+"_gte",P,f.getLocal("t")),[...f.drop(f.call(o+"_sub",P,f.getLocal("t"),f.getLocal("x"))),...f.setLocal("signx",f.i32_const(0))],[...f.drop(f.call(o+"_sub",f.getLocal("t"),P,f.getLocal("x"))),...f.setLocal("signx",f.i32_const(1))]),[...f.drop(f.call(o+"_add",P,f.getLocal("t"),f.getLocal("x"))),...f.setLocal("signx",f.i32_const(1))]),f.if(f.getLocal("signnewt"),[...f.drop(f.call(o+"_add",P,f.getLocal("t"),f.getLocal("x"))),...f.setLocal("signx",f.i32_const(0))],f.if(f.call(o+"_gte",f.getLocal("t"),P),[...f.drop(f.call(o+"_sub",f.getLocal("t"),P,f.getLocal("x"))),...f.setLocal("signx",f.i32_const(0))],[...f.drop(f.call(o+"_sub",P,f.getLocal("t"),f.getLocal("x"))),...f.setLocal("signx",f.i32_const(1))]))),f.setLocal("swp",f.getLocal("t")),f.setLocal("t",f.getLocal("newt")),f.setLocal("newt",f.getLocal("x")),f.setLocal("x",f.getLocal("swp")),f.setLocal("signt",f.getLocal("signnewt")),f.setLocal("signnewt",f.getLocal("signx")),f.setLocal("swp",f.getLocal("r")),f.setLocal("r",f.getLocal("newr")),f.setLocal("newr",f.getLocal("qr")),f.setLocal("qr",f.getLocal("swp")),f.br(0)))),E.addCode(f.if(f.getLocal("signt"),f.drop(f.call(o+"_sub",f.getLocal("pm"),f.getLocal("t"),f.getLocal("pr"))),f.call(o+"_copy",f.getLocal("t"),f.getLocal("pr"))))}return l(),d(),r(),s(),g(),L(),m(),C(),A(),w(),T(),q(),Z(),t.exportFunction(o+"_copy"),t.exportFunction(o+"_zero"),t.exportFunction(o+"_one"),t.exportFunction(o+"_isZero"),t.exportFunction(o+"_eq"),t.exportFunction(o+"_gte"),t.exportFunction(o+"_add"),t.exportFunction(o+"_sub"),t.exportFunction(o+"_mul"),t.exportFunction(o+"_square"),t.exportFunction(o+"_squareOld"),t.exportFunction(o+"_div"),t.exportFunction(o+"_inverseMod"),o},Ca=function(t,e,n,o,a,c,l){const d=t.addFunction(e);d.addParam("base","i32"),d.addParam("scalar","i32"),d.addParam("scalarLength","i32"),d.addParam("r","i32"),d.addLocal("i","i32"),d.addLocal("b","i32");const s=d.getCodeBuilder(),r=s.i32_const(t.alloc(n));d.addCode(s.if(s.i32_eqz(s.getLocal("scalarLength")),[...s.call(l,s.getLocal("r")),...s.ret([])])),d.addCode(s.call(c,s.getLocal("base"),r)),d.addCode(s.call(l,s.getLocal("r"))),d.addCode(s.setLocal("i",s.getLocal("scalarLength"))),d.addCode(s.block(s.loop(s.setLocal("i",s.i32_sub(s.getLocal("i"),s.i32_const(1))),s.setLocal("b",s.i32_load8_u(s.i32_add(s.getLocal("scalar"),s.getLocal("i")))),...g(),s.br_if(1,s.i32_eqz(s.getLocal("i"))),s.br(0))));function g(){const L=[];for(let m=0;m<8;m++)L.push(...s.call(a,s.getLocal("r"),s.getLocal("r")),...s.if(s.i32_ge_u(s.getLocal("b"),s.i32_const(128>>m)),[...s.setLocal("b",s.i32_sub(s.getLocal("b"),s.i32_const(128>>m))),...s.call(o,s.getLocal("r"),r,s.getLocal("r"))]));return L}},Aa=dp;function dp(i,t){const e=i.modules[t].n64*8,n=i.addFunction(t+"_batchInverse");n.addParam("pIn","i32"),n.addParam("inStep","i32"),n.addParam("n","i32"),n.addParam("pOut","i32"),n.addParam("outStep","i32"),n.addLocal("itAux","i32"),n.addLocal("itIn","i32"),n.addLocal("itOut","i32"),n.addLocal("i","i32");const o=n.getCodeBuilder(),a=o.i32_const(i.alloc(e));n.addCode(o.setLocal("itAux",o.i32_load(o.i32_const(0))),o.i32_store(o.i32_const(0),o.i32_add(o.getLocal("itAux"),o.i32_mul(o.i32_add(o.getLocal("n"),o.i32_const(1)),o.i32_const(e))))),n.addCode(o.call(t+"_one",o.getLocal("itAux")),o.setLocal("itIn",o.getLocal("pIn")),o.setLocal("itAux",o.i32_add(o.getLocal("itAux"),o.i32_const(e))),o.setLocal("i",o.i32_const(0)),o.block(o.loop(o.br_if(1,o.i32_eq(o.getLocal("i"),o.getLocal("n"))),o.if(o.call(t+"_isZero",o.getLocal("itIn")),o.call(t+"_copy",o.i32_sub(o.getLocal("itAux"),o.i32_const(e)),o.getLocal("itAux")),o.call(t+"_mul",o.getLocal("itIn"),o.i32_sub(o.getLocal("itAux"),o.i32_const(e)),o.getLocal("itAux"))),o.setLocal("itIn",o.i32_add(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itAux",o.i32_add(o.getLocal("itAux"),o.i32_const(e))),o.setLocal("i",o.i32_add(o.getLocal("i"),o.i32_const(1))),o.br(0))),o.setLocal("itIn",o.i32_sub(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itAux",o.i32_sub(o.getLocal("itAux"),o.i32_const(e))),o.setLocal("itOut",o.i32_add(o.getLocal("pOut"),o.i32_mul(o.i32_sub(o.getLocal("n"),o.i32_const(1)),o.getLocal("outStep")))),o.call(t+"_inverse",o.getLocal("itAux"),o.getLocal("itAux")),o.block(o.loop(o.br_if(1,o.i32_eqz(o.getLocal("i"))),o.if(o.call(t+"_isZero",o.getLocal("itIn")),[...o.call(t+"_copy",o.getLocal("itAux"),o.i32_sub(o.getLocal("itAux"),o.i32_const(e))),...o.call(t+"_zero",o.getLocal("itOut"))],[...o.call(t+"_copy",o.i32_sub(o.getLocal("itAux"),o.i32_const(e)),a),...o.call(t+"_mul",o.getLocal("itAux"),o.getLocal("itIn"),o.i32_sub(o.getLocal("itAux"),o.i32_const(e))),...o.call(t+"_mul",o.getLocal("itAux"),a,o.getLocal("itOut"))]),o.setLocal("itIn",o.i32_sub(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itOut",o.i32_sub(o.getLocal("itOut"),o.getLocal("outStep"))),o.setLocal("itAux",o.i32_sub(o.getLocal("itAux"),o.i32_const(e))),o.setLocal("i",o.i32_sub(o.getLocal("i"),o.i32_const(1))),o.br(0)))),n.addCode(o.i32_store(o.i32_const(0),o.getLocal("itAux")))}var zc=fp;function fp(i,t,e,n,o,a){typeof a>"u"&&(n<o?a=!0:a=!1);const c=i.addFunction(t);c.addParam("pIn","i32"),c.addParam("n","i32"),c.addParam("pOut","i32"),c.addLocal("i","i32"),c.addLocal("itIn","i32"),c.addLocal("itOut","i32");const l=c.getCodeBuilder();a?c.addCode(l.setLocal("itIn",l.i32_add(l.getLocal("pIn"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.i32_const(1)),l.i32_const(n)))),l.setLocal("itOut",l.i32_add(l.getLocal("pOut"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.i32_const(1)),l.i32_const(o)))),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.call(e,l.getLocal("itIn"),l.getLocal("itOut")),l.setLocal("itIn",l.i32_sub(l.getLocal("itIn"),l.i32_const(n))),l.setLocal("itOut",l.i32_sub(l.getLocal("itOut"),l.i32_const(o))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0)))):c.addCode(l.setLocal("itIn",l.getLocal("pIn")),l.setLocal("itOut",l.getLocal("pOut")),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.call(e,l.getLocal("itIn"),l.getLocal("itOut")),l.setLocal("itIn",l.i32_add(l.getLocal("itIn"),l.i32_const(n))),l.setLocal("itOut",l.i32_add(l.getLocal("itOut"),l.i32_const(o))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))))}var hp=_p;function _p(i,t,e,n,o,a){typeof a>"u"&&(n<o?a=!0:a=!1);const c=i.addFunction(t);c.addParam("pIn1","i32"),c.addParam("pIn2","i32"),c.addParam("n","i32"),c.addParam("pOut","i32"),c.addLocal("i","i32"),c.addLocal("itIn1","i32"),c.addLocal("itIn2","i32"),c.addLocal("itOut","i32");const l=c.getCodeBuilder();a?c.addCode(l.setLocal("itIn1",l.i32_add(l.getLocal("pIn1"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.i32_const(1)),l.i32_const(n)))),l.setLocal("itIn2",l.i32_add(l.getLocal("pIn2"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.i32_const(1)),l.i32_const(n)))),l.setLocal("itOut",l.i32_add(l.getLocal("pOut"),l.i32_mul(l.i32_sub(l.getLocal("n"),l.i32_const(1)),l.i32_const(o)))),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.call(e,l.getLocal("itIn1"),l.getLocal("itIn2"),l.getLocal("itOut")),l.setLocal("itIn1",l.i32_sub(l.getLocal("itIn1"),l.i32_const(n))),l.setLocal("itIn2",l.i32_sub(l.getLocal("itIn2"),l.i32_const(n))),l.setLocal("itOut",l.i32_sub(l.getLocal("itOut"),l.i32_const(o))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0)))):c.addCode(l.setLocal("itIn1",l.getLocal("pIn1")),l.setLocal("itIn2",l.getLocal("pIn2")),l.setLocal("itOut",l.getLocal("pOut")),l.setLocal("i",l.i32_const(0)),l.block(l.loop(l.br_if(1,l.i32_eq(l.getLocal("i"),l.getLocal("n"))),l.call(e,l.getLocal("itIn1"),l.getLocal("itIn2"),l.getLocal("itOut")),l.setLocal("itIn1",l.i32_add(l.getLocal("itIn1"),l.i32_const(n))),l.setLocal("itIn2",l.i32_add(l.getLocal("itIn2"),l.i32_const(n))),l.setLocal("itOut",l.i32_add(l.getLocal("itOut"),l.i32_const(o))),l.setLocal("i",l.i32_add(l.getLocal("i"),l.i32_const(1))),l.br(0))))}const le=Qe.exports,pp=up,be=Me,gp=Ca,mp=Aa,Ki=zc,to=hp;var Sa=function(t,e,n,o){const a=le(e),c=Math.floor((a.minus(1).bitLength()-1)/64)+1,l=c*2,d=c*8,s=n||"f1m";if(t.modules[s])return s;const r=pp(t,c,o),g=t.alloc(d,be.bigInt2BytesLE(a,d));t.alloc(be.bigInt2BytesLE(le.one.shiftLeft(c*64).mod(a),d));const L=t.alloc(be.bigInt2BytesLE(le.one.shiftLeft(c*64).square().mod(a),d)),m=t.alloc(be.bigInt2BytesLE(le.one.shiftLeft(c*64).mod(a),d)),C=t.alloc(be.bigInt2BytesLE(le.zero,d)),A=a.minus(le.one),w=A.shiftRight(1),T=t.alloc(d,be.bigInt2BytesLE(w,d)),F=w.add(le.one),R=t.alloc(d,be.bigInt2BytesLE(F,d));t.modules[s]={pq:g,pR2:L,n64:c,q:a,pOne:m,pZero:C,pePlusOne:R};function q(){const M=t.addFunction(s+"_one");M.addParam("pr","i32");const b=M.getCodeBuilder();M.addCode(b.call(r+"_copy",b.i32_const(m),b.getLocal("pr")))}function Z(){const M=t.addFunction(s+"_add");M.addParam("x","i32"),M.addParam("y","i32"),M.addParam("r","i32");const b=M.getCodeBuilder();M.addCode(b.if(b.call(r+"_add",b.getLocal("x"),b.getLocal("y"),b.getLocal("r")),b.drop(b.call(r+"_sub",b.getLocal("r"),b.i32_const(g),b.getLocal("r"))),b.if(b.call(r+"_gte",b.getLocal("r"),b.i32_const(g)),b.drop(b.call(r+"_sub",b.getLocal("r"),b.i32_const(g),b.getLocal("r"))))))}function E(){const M=t.addFunction(s+"_sub");M.addParam("x","i32"),M.addParam("y","i32"),M.addParam("r","i32");const b=M.getCodeBuilder();M.addCode(b.if(b.call(r+"_sub",b.getLocal("x"),b.getLocal("y"),b.getLocal("r")),b.drop(b.call(r+"_add",b.getLocal("r"),b.i32_const(g),b.getLocal("r")))))}function f(){const M=t.addFunction(s+"_neg");M.addParam("x","i32"),M.addParam("r","i32");const b=M.getCodeBuilder();M.addCode(b.call(s+"_sub",b.i32_const(C),b.getLocal("x"),b.getLocal("r")))}function y(){const M=t.addFunction(s+"_isNegative");M.addParam("x","i32"),M.setReturnType("i32");const b=M.getCodeBuilder(),K=b.i32_const(t.alloc(d));M.addCode(b.call(s+"_fromMontgomery",b.getLocal("x"),K),b.call(r+"_gte",K,b.i32_const(R)))}function I(){const M=t.addFunction(s+"_sign");M.addParam("x","i32"),M.setReturnType("i32");const b=M.getCodeBuilder(),K=b.i32_const(t.alloc(d));M.addCode(b.if(b.call(r+"_isZero",b.getLocal("x")),b.ret(b.i32_const(0))),b.call(s+"_fromMontgomery",b.getLocal("x"),K),b.if(b.call(r+"_gte",K,b.i32_const(R)),b.ret(b.i32_const(-1))),b.ret(b.i32_const(1)))}function k(){const M=t.alloc(l*l*8),b=t.addFunction(s+"_mReduct");b.addParam("t","i32"),b.addParam("r","i32"),b.addLocal("np32","i64"),b.addLocal("c","i64"),b.addLocal("m","i64");const K=b.getCodeBuilder(),gt=le("100000000",16).minus(a.modInv(le("100000000",16))).toJSNumber();b.addCode(K.setLocal("np32",K.i64_const(gt)));for(let dt=0;dt<l;dt++){b.addCode(K.setLocal("c",K.i64_const(0))),b.addCode(K.setLocal("m",K.i64_and(K.i64_mul(K.i64_load32_u(K.getLocal("t"),dt*4),K.getLocal("np32")),K.i64_const("0xFFFFFFFF"))));for(let _t=0;_t<l;_t++)b.addCode(K.setLocal("c",K.i64_add(K.i64_add(K.i64_load32_u(K.getLocal("t"),(dt+_t)*4),K.i64_shr_u(K.getLocal("c"),K.i64_const(32))),K.i64_mul(K.i64_load32_u(K.i32_const(g),_t*4),K.getLocal("m"))))),b.addCode(K.i64_store32(K.getLocal("t"),(dt+_t)*4,K.getLocal("c")));b.addCode(K.i64_store32(K.i32_const(M),dt*4,K.i64_shr_u(K.getLocal("c"),K.i64_const(32))))}b.addCode(K.call(s+"_add",K.i32_const(M),K.i32_add(K.getLocal("t"),K.i32_const(l*4)),K.getLocal("r")))}function O(){const M=t.addFunction(s+"_mul");M.addParam("x","i32"),M.addParam("y","i32"),M.addParam("r","i32"),M.addLocal("c0","i64"),M.addLocal("c1","i64"),M.addLocal("np32","i64");for(let yt=0;yt<l;yt++)M.addLocal("x"+yt,"i64"),M.addLocal("y"+yt,"i64"),M.addLocal("m"+yt,"i64"),M.addLocal("q"+yt,"i64");const b=M.getCodeBuilder(),K=le("100000000",16).minus(a.modInv(le("100000000",16))).toJSNumber();M.addCode(b.setLocal("np32",b.i64_const(K)));const gt=[],dt=[],_t=[];function Ot(yt,ft){let xt,Rt;return gt[yt]?xt=b.getLocal("x"+yt):(xt=b.teeLocal("x"+yt,b.i64_load32_u(b.getLocal("x"),yt*4)),gt[yt]=!0),dt[ft]?Rt=b.getLocal("y"+ft):(Rt=b.teeLocal("y"+ft,b.i64_load32_u(b.getLocal("y"),ft*4)),dt[ft]=!0),b.i64_mul(xt,Rt)}function pt(yt,ft){let xt,Rt;return _t[yt]?xt=b.getLocal("q"+yt):(xt=b.teeLocal("q"+yt,b.i64_load32_u(b.i32_const(0),g+yt*4)),_t[yt]=!0),Rt=b.getLocal("m"+ft),b.i64_mul(xt,Rt)}let Ft="c0",qt="c1";for(let yt=0;yt<l*2-1;yt++){for(let ft=Math.max(0,yt-l+1);ft<=yt&&ft<l;ft++){const xt=yt-ft;M.addCode(b.setLocal(Ft,b.i64_add(b.i64_and(b.getLocal(Ft),b.i64_const(4294967295)),Ot(ft,xt)))),M.addCode(b.setLocal(qt,b.i64_add(b.getLocal(qt),b.i64_shr_u(b.getLocal(Ft),b.i64_const(32)))))}for(let ft=Math.max(1,yt-l+1);ft<=yt&&ft<l;ft++){const xt=yt-ft;M.addCode(b.setLocal(Ft,b.i64_add(b.i64_and(b.getLocal(Ft),b.i64_const(4294967295)),pt(ft,xt)))),M.addCode(b.setLocal(qt,b.i64_add(b.getLocal(qt),b.i64_shr_u(b.getLocal(Ft),b.i64_const(32)))))}yt<l&&(M.addCode(b.setLocal("m"+yt,b.i64_and(b.i64_mul(b.i64_and(b.getLocal(Ft),b.i64_const(4294967295)),b.getLocal("np32")),b.i64_const("0xFFFFFFFF")))),M.addCode(b.setLocal(Ft,b.i64_add(b.i64_and(b.getLocal(Ft),b.i64_const(4294967295)),pt(0,yt)))),M.addCode(b.setLocal(qt,b.i64_add(b.getLocal(qt),b.i64_shr_u(b.getLocal(Ft),b.i64_const(32)))))),yt>=l&&M.addCode(b.i64_store32(b.getLocal("r"),(yt-l)*4,b.getLocal(Ft))),[Ft,qt]=[qt,Ft],M.addCode(b.setLocal(qt,b.i64_shr_u(b.getLocal(Ft),b.i64_const(32))))}M.addCode(b.i64_store32(b.getLocal("r"),l*4-4,b.getLocal(Ft))),M.addCode(b.if(b.i32_wrap_i64(b.getLocal(qt)),b.drop(b.call(r+"_sub",b.getLocal("r"),b.i32_const(g),b.getLocal("r"))),b.if(b.call(r+"_gte",b.getLocal("r"),b.i32_const(g)),b.drop(b.call(r+"_sub",b.getLocal("r"),b.i32_const(g),b.getLocal("r"))))))}function x(){const M=t.addFunction(s+"_square");M.addParam("x","i32"),M.addParam("r","i32"),M.addLocal("c0","i64"),M.addLocal("c1","i64"),M.addLocal("c0_old","i64"),M.addLocal("c1_old","i64"),M.addLocal("np32","i64");for(let ft=0;ft<l;ft++)M.addLocal("x"+ft,"i64"),M.addLocal("m"+ft,"i64"),M.addLocal("q"+ft,"i64");const b=M.getCodeBuilder(),K=le("100000000",16).minus(a.modInv(le("100000000",16))).toJSNumber();M.addCode(b.setLocal("np32",b.i64_const(K)));const gt=[],dt=[];function _t(ft,xt){let Rt,Ht;return gt[ft]?Rt=b.getLocal("x"+ft):(Rt=b.teeLocal("x"+ft,b.i64_load32_u(b.getLocal("x"),ft*4)),gt[ft]=!0),gt[xt]?Ht=b.getLocal("x"+xt):(Ht=b.teeLocal("x"+xt,b.i64_load32_u(b.getLocal("x"),xt*4)),gt[xt]=!0),b.i64_mul(Rt,Ht)}function Ot(ft,xt){let Rt,Ht;return dt[ft]?Rt=b.getLocal("q"+ft):(Rt=b.teeLocal("q"+ft,b.i64_load32_u(b.i32_const(0),g+ft*4)),dt[ft]=!0),Ht=b.getLocal("m"+xt),b.i64_mul(Rt,Ht)}let pt="c0",Ft="c1",qt="c0_old",yt="c1_old";for(let ft=0;ft<l*2-1;ft++){M.addCode(b.setLocal(pt,b.i64_const(0)),b.setLocal(Ft,b.i64_const(0)));for(let xt=Math.max(0,ft-l+1);xt<ft+1>>1&&xt<l;xt++){const Rt=ft-xt;M.addCode(b.setLocal(pt,b.i64_add(b.i64_and(b.getLocal(pt),b.i64_const(4294967295)),_t(xt,Rt)))),M.addCode(b.setLocal(Ft,b.i64_add(b.getLocal(Ft),b.i64_shr_u(b.getLocal(pt),b.i64_const(32)))))}M.addCode(b.setLocal(pt,b.i64_shl(b.i64_and(b.getLocal(pt),b.i64_const(4294967295)),b.i64_const(1)))),M.addCode(b.setLocal(Ft,b.i64_add(b.i64_shl(b.getLocal(Ft),b.i64_const(1)),b.i64_shr_u(b.getLocal(pt),b.i64_const(32))))),ft%2==0&&(M.addCode(b.setLocal(pt,b.i64_add(b.i64_and(b.getLocal(pt),b.i64_const(4294967295)),_t(ft>>1,ft>>1)))),M.addCode(b.setLocal(Ft,b.i64_add(b.getLocal(Ft),b.i64_shr_u(b.getLocal(pt),b.i64_const(32)))))),ft>0&&(M.addCode(b.setLocal(pt,b.i64_add(b.i64_and(b.getLocal(pt),b.i64_const(4294967295)),b.i64_and(b.getLocal(qt),b.i64_const(4294967295))))),M.addCode(b.setLocal(Ft,b.i64_add(b.i64_add(b.getLocal(Ft),b.i64_shr_u(b.getLocal(pt),b.i64_const(32))),b.getLocal(yt)))));for(let xt=Math.max(1,ft-l+1);xt<=ft&&xt<l;xt++){const Rt=ft-xt;M.addCode(b.setLocal(pt,b.i64_add(b.i64_and(b.getLocal(pt),b.i64_const(4294967295)),Ot(xt,Rt)))),M.addCode(b.setLocal(Ft,b.i64_add(b.getLocal(Ft),b.i64_shr_u(b.getLocal(pt),b.i64_const(32)))))}ft<l&&(M.addCode(b.setLocal("m"+ft,b.i64_and(b.i64_mul(b.i64_and(b.getLocal(pt),b.i64_const(4294967295)),b.getLocal("np32")),b.i64_const("0xFFFFFFFF")))),M.addCode(b.setLocal(pt,b.i64_add(b.i64_and(b.getLocal(pt),b.i64_const(4294967295)),Ot(0,ft)))),M.addCode(b.setLocal(Ft,b.i64_add(b.getLocal(Ft),b.i64_shr_u(b.getLocal(pt),b.i64_const(32)))))),ft>=l&&M.addCode(b.i64_store32(b.getLocal("r"),(ft-l)*4,b.getLocal(pt))),M.addCode(b.setLocal(qt,b.getLocal(Ft)),b.setLocal(yt,b.i64_shr_u(b.getLocal(qt),b.i64_const(32))))}M.addCode(b.i64_store32(b.getLocal("r"),l*4-4,b.getLocal(qt))),M.addCode(b.if(b.i32_wrap_i64(b.getLocal(yt)),b.drop(b.call(r+"_sub",b.getLocal("r"),b.i32_const(g),b.getLocal("r"))),b.if(b.call(r+"_gte",b.getLocal("r"),b.i32_const(g)),b.drop(b.call(r+"_sub",b.getLocal("r"),b.i32_const(g),b.getLocal("r"))))))}function v(){const M=t.addFunction(s+"_squareOld");M.addParam("x","i32"),M.addParam("r","i32");const b=M.getCodeBuilder();M.addCode(b.call(s+"_mul",b.getLocal("x"),b.getLocal("x"),b.getLocal("r")))}function P(){const M=t.addFunction(s+"_toMontgomery");M.addParam("x","i32"),M.addParam("r","i32");const b=M.getCodeBuilder();M.addCode(b.call(s+"_mul",b.getLocal("x"),b.i32_const(L),b.getLocal("r")))}function V(){const M=t.alloc(d*2),b=t.addFunction(s+"_fromMontgomery");b.addParam("x","i32"),b.addParam("r","i32");const K=b.getCodeBuilder();b.addCode(K.call(r+"_copy",K.getLocal("x"),K.i32_const(M))),b.addCode(K.call(r+"_zero",K.i32_const(M+d))),b.addCode(K.call(s+"_mReduct",K.i32_const(M),K.getLocal("r")))}function at(){const M=t.addFunction(s+"_inverse");M.addParam("x","i32"),M.addParam("r","i32");const b=M.getCodeBuilder();M.addCode(b.call(s+"_fromMontgomery",b.getLocal("x"),b.getLocal("r"))),M.addCode(b.call(r+"_inverseMod",b.getLocal("r"),b.i32_const(g),b.getLocal("r"))),M.addCode(b.call(s+"_toMontgomery",b.getLocal("r"),b.getLocal("r")))}let et=le(2);if(a.isPrime())for(;!et.modPow(w,a).equals(A);)et=et.add(le.one);t.alloc(be.bigInt2BytesLE(et.shiftLeft(c*64).mod(a),d));let U=0,ct=A;for(;!ct.isOdd()&&!ct.isZero();)U++,ct=ct.shiftRight(1);const H=t.alloc(d,be.bigInt2BytesLE(ct,d)),st=et.modPow(ct,a),Mt=t.alloc(be.bigInt2BytesLE(st.shiftLeft(c*64).mod(a),d)),vt=ct.add(1).shiftRight(1),Et=t.alloc(d,be.bigInt2BytesLE(vt,d));function B(){const M=t.addFunction(s+"_sqrt");M.addParam("n","i32"),M.addParam("r","i32"),M.addLocal("m","i32"),M.addLocal("i","i32"),M.addLocal("j","i32");const b=M.getCodeBuilder(),K=b.i32_const(m),gt=b.i32_const(t.alloc(d)),dt=b.i32_const(t.alloc(d)),_t=b.i32_const(t.alloc(d)),Ot=b.i32_const(t.alloc(d)),pt=b.i32_const(t.alloc(d));M.addCode(b.if(b.call(s+"_isZero",b.getLocal("n")),b.ret(b.call(s+"_zero",b.getLocal("r")))),b.setLocal("m",b.i32_const(U)),b.call(s+"_copy",b.i32_const(Mt),gt),b.call(s+"_exp",b.getLocal("n"),b.i32_const(H),b.i32_const(d),dt),b.call(s+"_exp",b.getLocal("n"),b.i32_const(Et),b.i32_const(d),_t),b.block(b.loop(b.br_if(1,b.call(s+"_eq",dt,K)),b.call(s+"_square",dt,Ot),b.setLocal("i",b.i32_const(1)),b.block(b.loop(b.br_if(1,b.call(s+"_eq",Ot,K)),b.call(s+"_square",Ot,Ot),b.setLocal("i",b.i32_add(b.getLocal("i"),b.i32_const(1))),b.br(0))),b.call(s+"_copy",gt,pt),b.setLocal("j",b.i32_sub(b.i32_sub(b.getLocal("m"),b.getLocal("i")),b.i32_const(1))),b.block(b.loop(b.br_if(1,b.i32_eqz(b.getLocal("j"))),b.call(s+"_square",pt,pt),b.setLocal("j",b.i32_sub(b.getLocal("j"),b.i32_const(1))),b.br(0))),b.setLocal("m",b.getLocal("i")),b.call(s+"_square",pt,gt),b.call(s+"_mul",dt,gt,dt),b.call(s+"_mul",_t,pt,_t),b.br(0))),b.if(b.call(s+"_isNegative",_t),b.call(s+"_neg",_t,b.getLocal("r")),b.call(s+"_copy",_t,b.getLocal("r"))))}function u(){const M=t.addFunction(s+"_isSquare");M.addParam("n","i32"),M.setReturnType("i32");const b=M.getCodeBuilder(),K=b.i32_const(m),gt=b.i32_const(t.alloc(d));M.addCode(b.if(b.call(s+"_isZero",b.getLocal("n")),b.ret(b.i32_const(1))),b.call(s+"_exp",b.getLocal("n"),b.i32_const(T),b.i32_const(d),gt),b.call(s+"_eq",gt,K))}function S(){const M=t.addFunction(s+"_load");M.addParam("scalar","i32"),M.addParam("scalarLen","i32"),M.addParam("r","i32"),M.addLocal("p","i32"),M.addLocal("l","i32"),M.addLocal("i","i32"),M.addLocal("j","i32");const b=M.getCodeBuilder(),K=b.i32_const(t.alloc(d)),gt=t.alloc(d),dt=b.i32_const(gt);M.addCode(b.call(r+"_zero",b.getLocal("r")),b.setLocal("i",b.i32_const(d)),b.setLocal("p",b.getLocal("scalar")),b.block(b.loop(b.br_if(1,b.i32_gt_u(b.getLocal("i"),b.getLocal("scalarLen"))),b.if(b.i32_eq(b.getLocal("i"),b.i32_const(d)),b.call(s+"_one",K),b.call(s+"_mul",K,b.i32_const(L),K)),b.call(s+"_mul",b.getLocal("p"),K,dt),b.call(s+"_add",b.getLocal("r"),dt,b.getLocal("r")),b.setLocal("p",b.i32_add(b.getLocal("p"),b.i32_const(d))),b.setLocal("i",b.i32_add(b.getLocal("i"),b.i32_const(d))),b.br(0))),b.setLocal("l",b.i32_rem_u(b.getLocal("scalarLen"),b.i32_const(d))),b.if(b.i32_eqz(b.getLocal("l")),b.ret([])),b.call(r+"_zero",dt),b.setLocal("j",b.i32_const(0)),b.block(b.loop(b.br_if(1,b.i32_eq(b.getLocal("j"),b.getLocal("l"))),b.i32_store8(b.getLocal("j"),gt,b.i32_load8_u(b.getLocal("p"))),b.setLocal("p",b.i32_add(b.getLocal("p"),b.i32_const(1))),b.setLocal("j",b.i32_add(b.getLocal("j"),b.i32_const(1))),b.br(0))),b.if(b.i32_eq(b.getLocal("i"),b.i32_const(d)),b.call(s+"_one",K),b.call(s+"_mul",K,b.i32_const(L),K)),b.call(s+"_mul",dt,K,dt),b.call(s+"_add",b.getLocal("r"),dt,b.getLocal("r")))}function h(){const M=t.addFunction(s+"_timesScalar");M.addParam("x","i32"),M.addParam("scalar","i32"),M.addParam("scalarLen","i32"),M.addParam("r","i32");const b=M.getCodeBuilder(),K=b.i32_const(t.alloc(d));M.addCode(b.call(s+"_load",b.getLocal("scalar"),b.getLocal("scalarLen"),K),b.call(s+"_toMontgomery",K,K),b.call(s+"_mul",b.getLocal("x"),K,b.getLocal("r")))}function $(){const M=t.addFunction(s+"_isOne");M.addParam("x","i32"),M.setReturnType("i32");const b=M.getCodeBuilder();M.addCode(b.ret(b.call(r+"_eq",b.getLocal("x"),b.i32_const(m))))}return t.exportFunction(r+"_copy",s+"_copy"),t.exportFunction(r+"_zero",s+"_zero"),t.exportFunction(r+"_isZero",s+"_isZero"),t.exportFunction(r+"_eq",s+"_eq"),$(),Z(),E(),f(),k(),O(),x(),v(),P(),V(),y(),I(),at(),q(),S(),h(),mp(t,s),Ki(t,s+"_batchToMontgomery",s+"_toMontgomery",d,d),Ki(t,s+"_batchFromMontgomery",s+"_fromMontgomery",d,d),Ki(t,s+"_batchNeg",s+"_neg",d,d),to(t,s+"_batchAdd",s+"_add",d,d),to(t,s+"_batchSub",s+"_sub",d,d),to(t,s+"_batchMul",s+"_mul",d,d),t.exportFunction(s+"_add"),t.exportFunction(s+"_sub"),t.exportFunction(s+"_neg"),t.exportFunction(s+"_isNegative"),t.exportFunction(s+"_isOne"),t.exportFunction(s+"_sign"),t.exportFunction(s+"_mReduct"),t.exportFunction(s+"_mul"),t.exportFunction(s+"_square"),t.exportFunction(s+"_squareOld"),t.exportFunction(s+"_fromMontgomery"),t.exportFunction(s+"_toMontgomery"),t.exportFunction(s+"_inverse"),t.exportFunction(s+"_one"),t.exportFunction(s+"_load"),t.exportFunction(s+"_timesScalar"),gp(t,s+"_exp",d,s+"_mul",s+"_square",r+"_copy",s+"_one"),t.exportFunction(s+"_exp"),t.exportFunction(s+"_batchInverse"),a.isPrime()&&(B(),u(),t.exportFunction(s+"_sqrt"),t.exportFunction(s+"_isSquare")),t.exportFunction(s+"_batchToMontgomery"),t.exportFunction(s+"_batchFromMontgomery"),s};const yp=Qe.exports,Lp=Sa;var jc=function(t,e,n,o,a){const c=yp(e),l=Math.floor((c.minus(1).bitLength()-1)/64)+1,d=l*8,s=n||"f1";if(t.modules[s])return s;t.modules[s]={n64:l};const r=a||"int",g=Lp(t,c,o,r),L=t.modules[g].pR2,m=t.modules[g].pq,C=t.modules[g].pePlusOne;function A(){const R=t.alloc(d),q=t.addFunction(s+"_mul");q.addParam("x","i32"),q.addParam("y","i32"),q.addParam("r","i32");const Z=q.getCodeBuilder();q.addCode(Z.call(g+"_mul",Z.getLocal("x"),Z.getLocal("y"),Z.i32_const(R))),q.addCode(Z.call(g+"_mul",Z.i32_const(R),Z.i32_const(L),Z.getLocal("r")))}function w(){const R=t.addFunction(s+"_square");R.addParam("x","i32"),R.addParam("r","i32");const q=R.getCodeBuilder();R.addCode(q.call(s+"_mul",q.getLocal("x"),q.getLocal("x"),q.getLocal("r")))}function T(){const R=t.addFunction(s+"_inverse");R.addParam("x","i32"),R.addParam("r","i32");const q=R.getCodeBuilder();R.addCode(q.call(r+"_inverseMod",q.getLocal("x"),q.i32_const(m),q.getLocal("r")))}function F(){const R=t.addFunction(s+"_isNegative");R.addParam("x","i32"),R.setReturnType("i32");const q=R.getCodeBuilder();R.addCode(q.call(r+"_gte",q.getLocal("x"),q.i32_const(C)))}return A(),w(),T(),F(),t.exportFunction(g+"_add",s+"_add"),t.exportFunction(g+"_sub",s+"_sub"),t.exportFunction(g+"_neg",s+"_neg"),t.exportFunction(s+"_mul"),t.exportFunction(s+"_square"),t.exportFunction(s+"_inverse"),t.exportFunction(s+"_isNegative"),t.exportFunction(g+"_copy",s+"_copy"),t.exportFunction(g+"_zero",s+"_zero"),t.exportFunction(g+"_one",s+"_one"),t.exportFunction(g+"_isZero",s+"_isZero"),t.exportFunction(g+"_eq",s+"_eq"),s};const bp=Ca,vp=Aa,an=Qe.exports,eo=Me;var Uc=function(t,e,n,o){if(t.modules[n])return n;const a=t.modules[o].n64*8,c=t.modules[o].q;t.modules[n]={n64:t.modules[o].n64*2};function l(){const x=t.addFunction(n+"_add");x.addParam("x","i32"),x.addParam("y","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("y"),et=v.i32_add(v.getLocal("y"),v.i32_const(a)),U=v.getLocal("r"),ct=v.i32_add(v.getLocal("r"),v.i32_const(a));x.addCode(v.call(o+"_add",P,at,U),v.call(o+"_add",V,et,ct))}function d(){const x=t.addFunction(n+"_timesScalar");x.addParam("x","i32"),x.addParam("scalar","i32"),x.addParam("scalarLen","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("r"),et=v.i32_add(v.getLocal("r"),v.i32_const(a));x.addCode(v.call(o+"_timesScalar",P,v.getLocal("scalar"),v.getLocal("scalarLen"),at),v.call(o+"_timesScalar",V,v.getLocal("scalar"),v.getLocal("scalarLen"),et))}function s(){const x=t.addFunction(n+"_sub");x.addParam("x","i32"),x.addParam("y","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("y"),et=v.i32_add(v.getLocal("y"),v.i32_const(a)),U=v.getLocal("r"),ct=v.i32_add(v.getLocal("r"),v.i32_const(a));x.addCode(v.call(o+"_sub",P,at,U),v.call(o+"_sub",V,et,ct))}function r(){const x=t.addFunction(n+"_neg");x.addParam("x","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("r"),et=v.i32_add(v.getLocal("r"),v.i32_const(a));x.addCode(v.call(o+"_neg",P,at),v.call(o+"_neg",V,et))}function g(){const x=t.addFunction(n+"_conjugate");x.addParam("x","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("r"),et=v.i32_add(v.getLocal("r"),v.i32_const(a));x.addCode(v.call(o+"_copy",P,at),v.call(o+"_neg",V,et))}function L(){const x=t.addFunction(n+"_isNegative");x.addParam("x","i32"),x.setReturnType("i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a));x.addCode(v.if(v.call(o+"_isZero",V),v.ret(v.call(o+"_isNegative",P))),v.ret(v.call(o+"_isNegative",V)))}function m(){const x=t.addFunction(n+"_mul");x.addParam("x","i32"),x.addParam("y","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("y"),et=v.i32_add(v.getLocal("y"),v.i32_const(a)),U=v.getLocal("r"),ct=v.i32_add(v.getLocal("r"),v.i32_const(a)),H=v.i32_const(t.alloc(a)),st=v.i32_const(t.alloc(a)),Mt=v.i32_const(t.alloc(a)),vt=v.i32_const(t.alloc(a));x.addCode(v.call(o+"_mul",P,at,H),v.call(o+"_mul",V,et,st),v.call(o+"_add",P,V,Mt),v.call(o+"_add",at,et,vt),v.call(o+"_mul",Mt,vt,Mt),v.call(e,st,U),v.call(o+"_add",H,U,U),v.call(o+"_add",H,st,ct),v.call(o+"_sub",Mt,ct,ct))}function C(){const x=t.addFunction(n+"_mul1");x.addParam("x","i32"),x.addParam("y","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("y"),et=v.getLocal("r"),U=v.i32_add(v.getLocal("r"),v.i32_const(a));x.addCode(v.call(o+"_mul",P,at,et),v.call(o+"_mul",V,at,U))}function A(){const x=t.addFunction(n+"_square");x.addParam("x","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("r"),et=v.i32_add(v.getLocal("r"),v.i32_const(a)),U=v.i32_const(t.alloc(a)),ct=v.i32_const(t.alloc(a)),H=v.i32_const(t.alloc(a)),st=v.i32_const(t.alloc(a));x.addCode(v.call(o+"_mul",P,V,U),v.call(o+"_add",P,V,ct),v.call(e,V,H),v.call(o+"_add",P,H,H),v.call(e,U,st),v.call(o+"_add",st,U,st),v.call(o+"_mul",ct,H,at),v.call(o+"_sub",at,st,at),v.call(o+"_add",U,U,et))}function w(){const x=t.addFunction(n+"_toMontgomery");x.addParam("x","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("r"),et=v.i32_add(v.getLocal("r"),v.i32_const(a));x.addCode(v.call(o+"_toMontgomery",P,at),v.call(o+"_toMontgomery",V,et))}function T(){const x=t.addFunction(n+"_fromMontgomery");x.addParam("x","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("r"),et=v.i32_add(v.getLocal("r"),v.i32_const(a));x.addCode(v.call(o+"_fromMontgomery",P,at),v.call(o+"_fromMontgomery",V,et))}function F(){const x=t.addFunction(n+"_copy");x.addParam("x","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("r"),et=v.i32_add(v.getLocal("r"),v.i32_const(a));x.addCode(v.call(o+"_copy",P,at),v.call(o+"_copy",V,et))}function R(){const x=t.addFunction(n+"_zero");x.addParam("x","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a));x.addCode(v.call(o+"_zero",P),v.call(o+"_zero",V))}function q(){const x=t.addFunction(n+"_one");x.addParam("x","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a));x.addCode(v.call(o+"_one",P),v.call(o+"_zero",V))}function Z(){const x=t.addFunction(n+"_eq");x.addParam("x","i32"),x.addParam("y","i32"),x.setReturnType("i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("y"),et=v.i32_add(v.getLocal("y"),v.i32_const(a));x.addCode(v.i32_and(v.call(o+"_eq",P,at),v.call(o+"_eq",V,et)))}function E(){const x=t.addFunction(n+"_isZero");x.addParam("x","i32"),x.setReturnType("i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a));x.addCode(v.i32_and(v.call(o+"_isZero",P),v.call(o+"_isZero",V)))}function f(){const x=t.addFunction(n+"_inverse");x.addParam("x","i32"),x.addParam("r","i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a)),at=v.getLocal("r"),et=v.i32_add(v.getLocal("r"),v.i32_const(a)),U=v.i32_const(t.alloc(a)),ct=v.i32_const(t.alloc(a)),H=v.i32_const(t.alloc(a)),st=v.i32_const(t.alloc(a));x.addCode(v.call(o+"_square",P,U),v.call(o+"_square",V,ct),v.call(e,ct,H),v.call(o+"_sub",U,H,H),v.call(o+"_inverse",H,st),v.call(o+"_mul",P,st,at),v.call(o+"_mul",V,st,et),v.call(o+"_neg",et,et))}function y(){const x=t.addFunction(n+"_sign");x.addParam("x","i32"),x.addLocal("s","i32"),x.setReturnType("i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a));x.addCode(v.setLocal("s",v.call(o+"_sign",V)),v.if(v.getLocal("s"),v.ret(v.getLocal("s"))),v.ret(v.call(o+"_sign",P)))}function I(){const x=t.addFunction(n+"_isOne");x.addParam("x","i32"),x.setReturnType("i32");const v=x.getCodeBuilder(),P=v.getLocal("x"),V=v.i32_add(v.getLocal("x"),v.i32_const(a));x.addCode(v.ret(v.i32_and(v.call(o+"_isOne",P),v.call(o+"_isZero",V))))}function k(){const x=t.addFunction(n+"_sqrt");x.addParam("a","i32"),x.addParam("pr","i32");const v=x.getCodeBuilder(),P=v.i32_const(t.alloc(eo.bigInt2BytesLE(an(c).minus(an(3)).divide(4),a))),V=v.i32_const(t.alloc(eo.bigInt2BytesLE(an(c).minus(an(1)).divide(2),a))),at=v.getLocal("a"),et=v.i32_const(t.alloc(a*2)),U=v.i32_const(t.alloc(a*2)),ct=v.i32_const(t.alloc(a*2)),H=t.alloc(a*2),st=v.i32_const(H),Mt=v.i32_const(H),vt=v.i32_const(H+a),Et=v.i32_const(t.alloc(a*2)),B=v.i32_const(t.alloc(a*2));x.addCode(v.call(n+"_one",st),v.call(n+"_neg",st,st),v.call(n+"_exp",at,P,v.i32_const(a),et),v.call(n+"_square",et,U),v.call(n+"_mul",at,U,U),v.call(n+"_conjugate",U,ct),v.call(n+"_mul",ct,U,ct),v.if(v.call(n+"_eq",ct,st),v.unreachable()),v.call(n+"_mul",et,at,Et),v.if(v.call(n+"_eq",U,st),[...v.call(o+"_zero",Mt),...v.call(o+"_one",vt),...v.call(n+"_mul",st,Et,v.getLocal("pr"))],[...v.call(n+"_one",B),...v.call(n+"_add",B,U,B),...v.call(n+"_exp",B,V,v.i32_const(a),B),...v.call(n+"_mul",B,Et,v.getLocal("pr"))]))}function O(){const x=t.addFunction(n+"_isSquare");x.addParam("a","i32"),x.setReturnType("i32");const v=x.getCodeBuilder(),P=v.i32_const(t.alloc(eo.bigInt2BytesLE(an(c).minus(an(3)).divide(4),a))),V=v.getLocal("a"),at=v.i32_const(t.alloc(a*2)),et=v.i32_const(t.alloc(a*2)),U=v.i32_const(t.alloc(a*2)),ct=t.alloc(a*2),H=v.i32_const(ct);x.addCode(v.call(n+"_one",H),v.call(n+"_neg",H,H),v.call(n+"_exp",V,P,v.i32_const(a),at),v.call(n+"_square",at,et),v.call(n+"_mul",V,et,et),v.call(n+"_conjugate",et,U),v.call(n+"_mul",U,et,U),v.if(v.call(n+"_eq",U,H),v.ret(v.i32_const(0))),v.ret(v.i32_const(1)))}return E(),I(),R(),q(),F(),m(),C(),A(),l(),s(),r(),g(),w(),T(),Z(),f(),d(),y(),L(),t.exportFunction(n+"_isZero"),t.exportFunction(n+"_isOne"),t.exportFunction(n+"_zero"),t.exportFunction(n+"_one"),t.exportFunction(n+"_copy"),t.exportFunction(n+"_mul"),t.exportFunction(n+"_mul1"),t.exportFunction(n+"_square"),t.exportFunction(n+"_add"),t.exportFunction(n+"_sub"),t.exportFunction(n+"_neg"),t.exportFunction(n+"_sign"),t.exportFunction(n+"_conjugate"),t.exportFunction(n+"_fromMontgomery"),t.exportFunction(n+"_toMontgomery"),t.exportFunction(n+"_eq"),t.exportFunction(n+"_inverse"),vp(t,n),bp(t,n+"_exp",a*2,n+"_mul",n+"_square",n+"_copy",n+"_one"),k(),O(),t.exportFunction(n+"_exp"),t.exportFunction(n+"_timesScalar"),t.exportFunction(n+"_batchInverse"),t.exportFunction(n+"_sqrt"),t.exportFunction(n+"_isSquare"),t.exportFunction(n+"_isNegative"),n};const wp=Ca,Ep=Aa;var $c=function(t,e,n,o){if(t.modules[n])return n;const a=t.modules[o].n64*8;t.modules[n]={n64:t.modules[o].n64*3};function c(){const f=t.addFunction(n+"_add");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("y"),v=y.i32_add(y.getLocal("y"),y.i32_const(a)),P=y.i32_add(y.getLocal("y"),y.i32_const(2*a)),V=y.getLocal("r"),at=y.i32_add(y.getLocal("r"),y.i32_const(a)),et=y.i32_add(y.getLocal("r"),y.i32_const(2*a));f.addCode(y.call(o+"_add",I,x,V),y.call(o+"_add",k,v,at),y.call(o+"_add",O,P,et))}function l(){const f=t.addFunction(n+"_timesScalar");f.addParam("x","i32"),f.addParam("scalar","i32"),f.addParam("scalarLen","i32"),f.addParam("r","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("r"),v=y.i32_add(y.getLocal("r"),y.i32_const(a)),P=y.i32_add(y.getLocal("r"),y.i32_const(2*a));f.addCode(y.call(o+"_timesScalar",I,y.getLocal("scalar"),y.getLocal("scalarLen"),x),y.call(o+"_timesScalar",k,y.getLocal("scalar"),y.getLocal("scalarLen"),v),y.call(o+"_timesScalar",O,y.getLocal("scalar"),y.getLocal("scalarLen"),P))}function d(){const f=t.addFunction(n+"_sub");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("y"),v=y.i32_add(y.getLocal("y"),y.i32_const(a)),P=y.i32_add(y.getLocal("y"),y.i32_const(2*a)),V=y.getLocal("r"),at=y.i32_add(y.getLocal("r"),y.i32_const(a)),et=y.i32_add(y.getLocal("r"),y.i32_const(2*a));f.addCode(y.call(o+"_sub",I,x,V),y.call(o+"_sub",k,v,at),y.call(o+"_sub",O,P,et))}function s(){const f=t.addFunction(n+"_neg");f.addParam("x","i32"),f.addParam("r","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("r"),v=y.i32_add(y.getLocal("r"),y.i32_const(a)),P=y.i32_add(y.getLocal("r"),y.i32_const(2*a));f.addCode(y.call(o+"_neg",I,x),y.call(o+"_neg",k,v),y.call(o+"_neg",O,P))}function r(){const f=t.addFunction(n+"_isNegative");f.addParam("x","i32"),f.setReturnType("i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a));f.addCode(y.if(y.call(o+"_isZero",O),y.if(y.call(o+"_isZero",k),y.ret(y.call(o+"_isNegative",I)),y.ret(y.call(o+"_isNegative",k)))),y.ret(y.call(o+"_isNegative",O)))}function g(){const f=t.addFunction(n+"_mul");f.addParam("x","i32"),f.addParam("y","i32"),f.addParam("r","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("y"),v=y.i32_add(y.getLocal("y"),y.i32_const(a)),P=y.i32_add(y.getLocal("y"),y.i32_const(2*a)),V=y.getLocal("r"),at=y.i32_add(y.getLocal("r"),y.i32_const(a)),et=y.i32_add(y.getLocal("r"),y.i32_const(2*a)),U=y.i32_const(t.alloc(a)),ct=y.i32_const(t.alloc(a)),H=y.i32_const(t.alloc(a)),st=y.i32_const(t.alloc(a)),Mt=y.i32_const(t.alloc(a)),vt=y.i32_const(t.alloc(a)),Et=y.i32_const(t.alloc(a)),B=y.i32_const(t.alloc(a)),u=y.i32_const(t.alloc(a)),S=y.i32_const(t.alloc(a)),h=y.i32_const(t.alloc(a)),$=y.i32_const(t.alloc(a)),M=y.i32_const(t.alloc(a));f.addCode(y.call(o+"_mul",I,x,U),y.call(o+"_mul",k,v,ct),y.call(o+"_mul",O,P,H),y.call(o+"_add",I,k,st),y.call(o+"_add",x,v,Mt),y.call(o+"_add",I,O,vt),y.call(o+"_add",x,P,Et),y.call(o+"_add",k,O,B),y.call(o+"_add",v,P,u),y.call(o+"_add",U,ct,S),y.call(o+"_add",U,H,h),y.call(o+"_add",ct,H,$),y.call(o+"_mul",B,u,V),y.call(o+"_sub",V,$,V),y.call(e,V,V),y.call(o+"_add",U,V,V),y.call(o+"_mul",st,Mt,at),y.call(o+"_sub",at,S,at),y.call(e,H,M),y.call(o+"_add",at,M,at),y.call(o+"_mul",vt,Et,et),y.call(o+"_sub",et,h,et),y.call(o+"_add",et,ct,et))}function L(){const f=t.addFunction(n+"_square");f.addParam("x","i32"),f.addParam("r","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("r"),v=y.i32_add(y.getLocal("r"),y.i32_const(a)),P=y.i32_add(y.getLocal("r"),y.i32_const(2*a)),V=y.i32_const(t.alloc(a)),at=y.i32_const(t.alloc(a)),et=y.i32_const(t.alloc(a)),U=y.i32_const(t.alloc(a)),ct=y.i32_const(t.alloc(a)),H=y.i32_const(t.alloc(a)),st=y.i32_const(t.alloc(a));f.addCode(y.call(o+"_square",I,V),y.call(o+"_mul",I,k,at),y.call(o+"_add",at,at,et),y.call(o+"_sub",I,k,U),y.call(o+"_add",U,O,U),y.call(o+"_square",U,U),y.call(o+"_mul",k,O,ct),y.call(o+"_add",ct,ct,H),y.call(o+"_square",O,st),y.call(e,H,x),y.call(o+"_add",V,x,x),y.call(e,st,v),y.call(o+"_add",et,v,v),y.call(o+"_add",V,st,P),y.call(o+"_sub",H,P,P),y.call(o+"_add",U,P,P),y.call(o+"_add",et,P,P))}function m(){const f=t.addFunction(n+"_toMontgomery");f.addParam("x","i32"),f.addParam("r","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("r"),v=y.i32_add(y.getLocal("r"),y.i32_const(a)),P=y.i32_add(y.getLocal("r"),y.i32_const(2*a));f.addCode(y.call(o+"_toMontgomery",I,x),y.call(o+"_toMontgomery",k,v),y.call(o+"_toMontgomery",O,P))}function C(){const f=t.addFunction(n+"_fromMontgomery");f.addParam("x","i32"),f.addParam("r","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("r"),v=y.i32_add(y.getLocal("r"),y.i32_const(a)),P=y.i32_add(y.getLocal("r"),y.i32_const(2*a));f.addCode(y.call(o+"_fromMontgomery",I,x),y.call(o+"_fromMontgomery",k,v),y.call(o+"_fromMontgomery",O,P))}function A(){const f=t.addFunction(n+"_copy");f.addParam("x","i32"),f.addParam("r","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("r"),v=y.i32_add(y.getLocal("r"),y.i32_const(a)),P=y.i32_add(y.getLocal("r"),y.i32_const(2*a));f.addCode(y.call(o+"_copy",I,x),y.call(o+"_copy",k,v),y.call(o+"_copy",O,P))}function w(){const f=t.addFunction(n+"_zero");f.addParam("x","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a));f.addCode(y.call(o+"_zero",I),y.call(o+"_zero",k),y.call(o+"_zero",O))}function T(){const f=t.addFunction(n+"_one");f.addParam("x","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a));f.addCode(y.call(o+"_one",I),y.call(o+"_zero",k),y.call(o+"_zero",O))}function F(){const f=t.addFunction(n+"_eq");f.addParam("x","i32"),f.addParam("y","i32"),f.setReturnType("i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("y"),v=y.i32_add(y.getLocal("y"),y.i32_const(a)),P=y.i32_add(y.getLocal("y"),y.i32_const(2*a));f.addCode(y.i32_and(y.i32_and(y.call(o+"_eq",I,x),y.call(o+"_eq",k,v)),y.call(o+"_eq",O,P)))}function R(){const f=t.addFunction(n+"_isZero");f.addParam("x","i32"),f.setReturnType("i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a));f.addCode(y.i32_and(y.i32_and(y.call(o+"_isZero",I),y.call(o+"_isZero",k)),y.call(o+"_isZero",O)))}function q(){const f=t.addFunction(n+"_inverse");f.addParam("x","i32"),f.addParam("r","i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a)),x=y.getLocal("r"),v=y.i32_add(y.getLocal("r"),y.i32_const(a)),P=y.i32_add(y.getLocal("r"),y.i32_const(2*a)),V=y.i32_const(t.alloc(a)),at=y.i32_const(t.alloc(a)),et=y.i32_const(t.alloc(a)),U=y.i32_const(t.alloc(a)),ct=y.i32_const(t.alloc(a)),H=y.i32_const(t.alloc(a)),st=y.i32_const(t.alloc(a)),Mt=y.i32_const(t.alloc(a)),vt=y.i32_const(t.alloc(a)),Et=y.i32_const(t.alloc(a)),B=y.i32_const(t.alloc(a));f.addCode(y.call(o+"_square",I,V),y.call(o+"_square",k,at),y.call(o+"_square",O,et),y.call(o+"_mul",I,k,U),y.call(o+"_mul",I,O,ct),y.call(o+"_mul",k,O,H),y.call(e,H,st),y.call(o+"_sub",V,st,st),y.call(e,et,Mt),y.call(o+"_sub",Mt,U,Mt),y.call(o+"_sub",at,ct,vt),y.call(o+"_mul",O,Mt,Et),y.call(o+"_mul",k,vt,B),y.call(o+"_add",Et,B,Et),y.call(e,Et,Et),y.call(o+"_mul",I,st,B),y.call(o+"_add",B,Et,Et),y.call(o+"_inverse",Et,Et),y.call(o+"_mul",Et,st,x),y.call(o+"_mul",Et,Mt,v),y.call(o+"_mul",Et,vt,P))}function Z(){const f=t.addFunction(n+"_sign");f.addParam("x","i32"),f.addLocal("s","i32"),f.setReturnType("i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(2*a));f.addCode(y.setLocal("s",y.call(o+"_sign",O)),y.if(y.getLocal("s"),y.ret(y.getLocal("s"))),y.setLocal("s",y.call(o+"_sign",k)),y.if(y.getLocal("s"),y.ret(y.getLocal("s"))),y.ret(y.call(o+"_sign",I)))}function E(){const f=t.addFunction(n+"_isOne");f.addParam("x","i32"),f.setReturnType("i32");const y=f.getCodeBuilder(),I=y.getLocal("x"),k=y.i32_add(y.getLocal("x"),y.i32_const(a)),O=y.i32_add(y.getLocal("x"),y.i32_const(a*2));f.addCode(y.ret(y.i32_and(y.i32_and(y.call(o+"_isOne",I),y.call(o+"_isZero",k)),y.call(o+"_isZero",O))))}return R(),E(),w(),T(),A(),g(),L(),c(),d(),s(),Z(),m(),C(),F(),q(),l(),r(),t.exportFunction(n+"_isZero"),t.exportFunction(n+"_isOne"),t.exportFunction(n+"_zero"),t.exportFunction(n+"_one"),t.exportFunction(n+"_copy"),t.exportFunction(n+"_mul"),t.exportFunction(n+"_square"),t.exportFunction(n+"_add"),t.exportFunction(n+"_sub"),t.exportFunction(n+"_neg"),t.exportFunction(n+"_sign"),t.exportFunction(n+"_fromMontgomery"),t.exportFunction(n+"_toMontgomery"),t.exportFunction(n+"_eq"),t.exportFunction(n+"_inverse"),Ep(t,n),wp(t,n+"_exp",a*3,n+"_mul",n+"_square",n+"_copy",n+"_one"),t.exportFunction(n+"_exp"),t.exportFunction(n+"_timesScalar"),t.exportFunction(n+"_batchInverse"),t.exportFunction(n+"_isNegative"),n},Fp=function(t,e,n,o,a,c,l,d){const s=t.addFunction(e);s.addParam("base","i32"),s.addParam("scalar","i32"),s.addParam("scalarLength","i32"),s.addParam("r","i32"),s.addLocal("old0","i32"),s.addLocal("nbits","i32"),s.addLocal("i","i32"),s.addLocal("last","i32"),s.addLocal("cur","i32"),s.addLocal("carry","i32"),s.addLocal("p","i32");const r=s.getCodeBuilder(),g=r.i32_const(t.alloc(n));function L(C){return r.i32_and(r.i32_shr_u(r.i32_load(r.i32_add(r.getLocal("scalar"),r.i32_and(r.i32_shr_u(C,r.i32_const(3)),r.i32_const(4294967292)))),r.i32_and(C,r.i32_const(31))),r.i32_const(1))}function m(C){return[...r.i32_store8(r.getLocal("p"),r.i32_const(C)),...r.setLocal("p",r.i32_add(r.getLocal("p"),r.i32_const(1)))]}s.addCode(r.if(r.i32_eqz(r.getLocal("scalarLength")),[...r.call(d,r.getLocal("r")),...r.ret([])]),r.setLocal("nbits",r.i32_shl(r.getLocal("scalarLength"),r.i32_const(3))),r.setLocal("old0",r.i32_load(r.i32_const(0))),r.setLocal("p",r.getLocal("old0")),r.i32_store(r.i32_const(0),r.i32_and(r.i32_add(r.i32_add(r.getLocal("old0"),r.i32_const(32)),r.getLocal("nbits")),r.i32_const(4294967288))),r.setLocal("i",r.i32_const(1)),r.setLocal("last",L(r.i32_const(0))),r.setLocal("carry",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("i"),r.getLocal("nbits"))),r.setLocal("cur",L(r.getLocal("i"))),r.if(r.getLocal("last"),r.if(r.getLocal("cur"),r.if(r.getLocal("carry"),[...r.setLocal("last",r.i32_const(0)),...r.setLocal("carry",r.i32_const(1)),...m(1)],[...r.setLocal("last",r.i32_const(0)),...r.setLocal("carry",r.i32_const(1)),...m(255)]),r.if(r.getLocal("carry"),[...r.setLocal("last",r.i32_const(0)),...r.setLocal("carry",r.i32_const(1)),...m(255)],[...r.setLocal("last",r.i32_const(0)),...r.setLocal("carry",r.i32_const(0)),...m(1)])),r.if(r.getLocal("cur"),r.if(r.getLocal("carry"),[...r.setLocal("last",r.i32_const(0)),...r.setLocal("carry",r.i32_const(1)),...m(0)],[...r.setLocal("last",r.i32_const(1)),...r.setLocal("carry",r.i32_const(0)),...m(0)]),r.if(r.getLocal("carry"),[...r.setLocal("last",r.i32_const(1)),...r.setLocal("carry",r.i32_const(0)),...m(0)],[...r.setLocal("last",r.i32_const(0)),...r.setLocal("carry",r.i32_const(0)),...m(0)]))),r.setLocal("i",r.i32_add(r.getLocal("i"),r.i32_const(1))),r.br(0))),r.if(r.getLocal("last"),r.if(r.getLocal("carry"),[...m(255),...m(0),...m(1)],[...m(1)]),r.if(r.getLocal("carry"),[...m(0),...m(1)])),r.setLocal("p",r.i32_sub(r.getLocal("p"),r.i32_const(1))),r.call(l,r.getLocal("base"),g),r.call(d,r.getLocal("r")),r.block(r.loop(r.call(a,r.getLocal("r"),r.getLocal("r")),r.setLocal("cur",r.i32_load8_u(r.getLocal("p"))),r.if(r.getLocal("cur"),r.if(r.i32_eq(r.getLocal("cur"),r.i32_const(1)),r.call(o,r.getLocal("r"),g,r.getLocal("r")),r.call(c,r.getLocal("r"),g,r.getLocal("r")))),r.br_if(1,r.i32_eq(r.getLocal("old0"),r.getLocal("p"))),r.setLocal("p",r.i32_sub(r.getLocal("p"),r.i32_const(1))),r.br(0))),r.i32_store(r.i32_const(0),r.getLocal("old0")))},Cp=function(t,e,n,o,a){const l=t.modules[e].n64*8;function d(){const L=t.addFunction(n+"_getChunk");L.addParam("pScalar","i32"),L.addParam("scalarSize","i32"),L.addParam("startBit","i32"),L.addParam("chunkSize","i32"),L.addLocal("bitsToEnd","i32"),L.addLocal("mask","i32"),L.setReturnType("i32");const m=L.getCodeBuilder();L.addCode(m.setLocal("bitsToEnd",m.i32_sub(m.i32_mul(m.getLocal("scalarSize"),m.i32_const(8)),m.getLocal("startBit"))),m.if(m.i32_gt_s(m.getLocal("chunkSize"),m.getLocal("bitsToEnd")),m.setLocal("mask",m.i32_sub(m.i32_shl(m.i32_const(1),m.getLocal("bitsToEnd")),m.i32_const(1))),m.setLocal("mask",m.i32_sub(m.i32_shl(m.i32_const(1),m.getLocal("chunkSize")),m.i32_const(1)))),m.i32_and(m.i32_shr_u(m.i32_load(m.i32_add(m.getLocal("pScalar"),m.i32_shr_u(m.getLocal("startBit"),m.i32_const(3))),0,0),m.i32_and(m.getLocal("startBit"),m.i32_const(7))),m.getLocal("mask")))}function s(){const L=t.addFunction(n+"_chunk");L.addParam("pBases","i32"),L.addParam("pScalars","i32"),L.addParam("scalarSize","i32"),L.addParam("n","i32"),L.addParam("startBit","i32"),L.addParam("chunkSize","i32"),L.addParam("pr","i32"),L.addLocal("nChunks","i32"),L.addLocal("itScalar","i32"),L.addLocal("endScalar","i32"),L.addLocal("itBase","i32"),L.addLocal("i","i32"),L.addLocal("j","i32"),L.addLocal("nTable","i32"),L.addLocal("pTable","i32"),L.addLocal("idx","i32"),L.addLocal("pIdxTable","i32");const m=L.getCodeBuilder();L.addCode(m.if(m.i32_eqz(m.getLocal("n")),[...m.call(e+"_zero",m.getLocal("pr")),...m.ret([])]),m.setLocal("nTable",m.i32_shl(m.i32_const(1),m.getLocal("chunkSize"))),m.setLocal("pTable",m.i32_load(m.i32_const(0))),m.i32_store(m.i32_const(0),m.i32_add(m.getLocal("pTable"),m.i32_mul(m.getLocal("nTable"),m.i32_const(l)))),m.setLocal("j",m.i32_const(0)),m.block(m.loop(m.br_if(1,m.i32_eq(m.getLocal("j"),m.getLocal("nTable"))),m.call(e+"_zero",m.i32_add(m.getLocal("pTable"),m.i32_mul(m.getLocal("j"),m.i32_const(l)))),m.setLocal("j",m.i32_add(m.getLocal("j"),m.i32_const(1))),m.br(0))),m.setLocal("itBase",m.getLocal("pBases")),m.setLocal("itScalar",m.getLocal("pScalars")),m.setLocal("endScalar",m.i32_add(m.getLocal("pScalars"),m.i32_mul(m.getLocal("n"),m.getLocal("scalarSize")))),m.block(m.loop(m.br_if(1,m.i32_eq(m.getLocal("itScalar"),m.getLocal("endScalar"))),m.setLocal("idx",m.call(n+"_getChunk",m.getLocal("itScalar"),m.getLocal("scalarSize"),m.getLocal("startBit"),m.getLocal("chunkSize"))),m.if(m.getLocal("idx"),[...m.setLocal("pIdxTable",m.i32_add(m.getLocal("pTable"),m.i32_mul(m.i32_sub(m.getLocal("idx"),m.i32_const(1)),m.i32_const(l)))),...m.call(o,m.getLocal("pIdxTable"),m.getLocal("itBase"),m.getLocal("pIdxTable"))]),m.setLocal("itScalar",m.i32_add(m.getLocal("itScalar"),m.getLocal("scalarSize"))),m.setLocal("itBase",m.i32_add(m.getLocal("itBase"),m.i32_const(a))),m.br(0))),m.call(n+"_reduceTable",m.getLocal("pTable"),m.getLocal("chunkSize")),m.call(e+"_copy",m.getLocal("pTable"),m.getLocal("pr")),m.i32_store(m.i32_const(0),m.getLocal("pTable")))}function r(){const L=t.addFunction(n);L.addParam("pBases","i32"),L.addParam("pScalars","i32"),L.addParam("scalarSize","i32"),L.addParam("n","i32"),L.addParam("pr","i32"),L.addLocal("chunkSize","i32"),L.addLocal("nChunks","i32"),L.addLocal("itScalar","i32"),L.addLocal("endScalar","i32"),L.addLocal("itBase","i32"),L.addLocal("itBit","i32"),L.addLocal("i","i32"),L.addLocal("j","i32"),L.addLocal("nTable","i32"),L.addLocal("pTable","i32"),L.addLocal("idx","i32"),L.addLocal("pIdxTable","i32");const m=L.getCodeBuilder(),C=m.i32_const(t.alloc(l)),A=t.alloc([17,17,17,17,17,17,17,17,17,17,16,16,15,14,13,13,12,11,10,9,8,7,7,6,5,4,3,2,1,1,1,1]);L.addCode(m.call(e+"_zero",m.getLocal("pr")),m.if(m.i32_eqz(m.getLocal("n")),m.ret([])),m.setLocal("chunkSize",m.i32_load8_u(m.i32_clz(m.getLocal("n")),A)),m.setLocal("nChunks",m.i32_add(m.i32_div_u(m.i32_sub(m.i32_shl(m.getLocal("scalarSize"),m.i32_const(3)),m.i32_const(1)),m.getLocal("chunkSize")),m.i32_const(1))),m.setLocal("itBit",m.i32_mul(m.i32_sub(m.getLocal("nChunks"),m.i32_const(1)),m.getLocal("chunkSize"))),m.block(m.loop(m.br_if(1,m.i32_lt_s(m.getLocal("itBit"),m.i32_const(0))),m.if(m.i32_eqz(m.call(e+"_isZero",m.getLocal("pr"))),[...m.setLocal("j",m.i32_const(0)),...m.block(m.loop(m.br_if(1,m.i32_eq(m.getLocal("j"),m.getLocal("chunkSize"))),m.call(e+"_double",m.getLocal("pr"),m.getLocal("pr")),m.setLocal("j",m.i32_add(m.getLocal("j"),m.i32_const(1))),m.br(0)))]),m.call(n+"_chunk",m.getLocal("pBases"),m.getLocal("pScalars"),m.getLocal("scalarSize"),m.getLocal("n"),m.getLocal("itBit"),m.getLocal("chunkSize"),C),m.call(e+"_add",m.getLocal("pr"),C,m.getLocal("pr")),m.setLocal("itBit",m.i32_sub(m.getLocal("itBit"),m.getLocal("chunkSize"))),m.br(0))))}function g(){const L=t.addFunction(n+"_reduceTable");L.addParam("pTable","i32"),L.addParam("p","i32"),L.addLocal("half","i32"),L.addLocal("it1","i32"),L.addLocal("it2","i32"),L.addLocal("pAcc","i32");const m=L.getCodeBuilder();L.addCode(m.if(m.i32_eq(m.getLocal("p"),m.i32_const(1)),m.ret([])),m.setLocal("half",m.i32_shl(m.i32_const(1),m.i32_sub(m.getLocal("p"),m.i32_const(1)))),m.setLocal("it1",m.getLocal("pTable")),m.setLocal("it2",m.i32_add(m.getLocal("pTable"),m.i32_mul(m.getLocal("half"),m.i32_const(l)))),m.setLocal("pAcc",m.i32_sub(m.getLocal("it2"),m.i32_const(l))),m.block(m.loop(m.br_if(1,m.i32_eq(m.getLocal("it1"),m.getLocal("pAcc"))),m.call(e+"_add",m.getLocal("it1"),m.getLocal("it2"),m.getLocal("it1")),m.call(e+"_add",m.getLocal("pAcc"),m.getLocal("it2"),m.getLocal("pAcc")),m.setLocal("it1",m.i32_add(m.getLocal("it1"),m.i32_const(l))),m.setLocal("it2",m.i32_add(m.getLocal("it2"),m.i32_const(l))),m.br(0))),m.call(n+"_reduceTable",m.getLocal("pTable"),m.i32_sub(m.getLocal("p"),m.i32_const(1))),m.setLocal("p",m.i32_sub(m.getLocal("p"),m.i32_const(1))),m.block(m.loop(m.br_if(1,m.i32_eqz(m.getLocal("p"))),m.call(e+"_double",m.getLocal("pAcc"),m.getLocal("pAcc")),m.setLocal("p",m.i32_sub(m.getLocal("p"),m.i32_const(1))),m.br(0))),m.call(e+"_add",m.getLocal("pTable"),m.getLocal("pAcc"),m.getLocal("pTable")))}d(),g(),s(),r(),t.exportFunction(n),t.exportFunction(n+"_chunk")};const Qr=Fp,Sn=zc,Gr=Cp;var Vc=function(t,e,n,o){const a=t.modules[n].n64,c=a*8;if(t.modules[e])return e;t.modules[e]={n64:a*3};function l(){const B=t.addFunction(e+"_isZero");B.addParam("p1","i32"),B.setReturnType("i32");const u=B.getCodeBuilder();B.addCode(u.call(n+"_isZero",u.i32_add(u.getLocal("p1"),u.i32_const(c*2))))}function d(){const B=t.addFunction(e+"_isZeroAffine");B.addParam("p1","i32"),B.setReturnType("i32");const u=B.getCodeBuilder();B.addCode(u.i32_and(u.call(n+"_isZero",u.getLocal("p1")),u.call(n+"_isZero",u.i32_add(u.getLocal("p1"),u.i32_const(c)))))}function s(){const B=t.addFunction(e+"_copy");B.addParam("ps","i32"),B.addParam("pd","i32");const u=B.getCodeBuilder();for(let S=0;S<a*3;S++)B.addCode(u.i64_store(u.getLocal("pd"),S*8,u.i64_load(u.getLocal("ps"),S*8)))}function r(){const B=t.addFunction(e+"_copyAffine");B.addParam("ps","i32"),B.addParam("pd","i32");const u=B.getCodeBuilder();for(let S=0;S<a*2;S++)B.addCode(u.i64_store(u.getLocal("pd"),S*8,u.i64_load(u.getLocal("ps"),S*8)))}function g(){const B=t.addFunction(e+"_zero");B.addParam("pr","i32");const u=B.getCodeBuilder();B.addCode(u.call(n+"_zero",u.getLocal("pr"))),B.addCode(u.call(n+"_one",u.i32_add(u.getLocal("pr"),u.i32_const(c)))),B.addCode(u.call(n+"_zero",u.i32_add(u.getLocal("pr"),u.i32_const(c*2))))}function L(){const B=t.addFunction(e+"_zeroAffine");B.addParam("pr","i32");const u=B.getCodeBuilder();B.addCode(u.call(n+"_zero",u.getLocal("pr"))),B.addCode(u.call(n+"_zero",u.i32_add(u.getLocal("pr"),u.i32_const(c))))}function m(){const B=t.addFunction(e+"_eq");B.addParam("p1","i32"),B.addParam("p2","i32"),B.setReturnType("i32"),B.addLocal("z1","i32"),B.addLocal("z2","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c));B.addCode(u.setLocal("z1",u.i32_add(u.getLocal("p1"),u.i32_const(c*2))));const $=u.getLocal("z1"),M=u.getLocal("p2"),b=u.i32_add(u.getLocal("p2"),u.i32_const(c));B.addCode(u.setLocal("z2",u.i32_add(u.getLocal("p2"),u.i32_const(c*2))));const K=u.getLocal("z2"),gt=u.i32_const(t.alloc(c)),dt=u.i32_const(t.alloc(c)),_t=u.i32_const(t.alloc(c)),Ot=u.i32_const(t.alloc(c)),pt=u.i32_const(t.alloc(c)),Ft=u.i32_const(t.alloc(c)),qt=u.i32_const(t.alloc(c)),yt=u.i32_const(t.alloc(c));B.addCode(u.if(u.call(e+"_isZero",u.getLocal("p1")),u.ret(u.call(e+"_isZero",u.getLocal("p2")))),u.if(u.call(e+"_isZero",u.getLocal("p2")),u.ret(u.i32_const(0))),u.if(u.call(n+"_isOne",$),u.ret(u.call(e+"_eqMixed",u.getLocal("p2"),u.getLocal("p1")))),u.if(u.call(n+"_isOne",K),u.ret(u.call(e+"_eqMixed",u.getLocal("p1"),u.getLocal("p2")))),u.call(n+"_square",$,gt),u.call(n+"_square",K,dt),u.call(n+"_mul",S,dt,_t),u.call(n+"_mul",M,gt,Ot),u.call(n+"_mul",$,gt,pt),u.call(n+"_mul",K,dt,Ft),u.call(n+"_mul",h,Ft,qt),u.call(n+"_mul",b,pt,yt),u.if(u.call(n+"_eq",_t,Ot),u.if(u.call(n+"_eq",qt,yt),u.ret(u.i32_const(1)))),u.ret(u.i32_const(0)))}function C(){const B=t.addFunction(e+"_eqMixed");B.addParam("p1","i32"),B.addParam("p2","i32"),B.setReturnType("i32"),B.addLocal("z1","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c));B.addCode(u.setLocal("z1",u.i32_add(u.getLocal("p1"),u.i32_const(c*2))));const $=u.getLocal("z1"),M=u.getLocal("p2"),b=u.i32_add(u.getLocal("p2"),u.i32_const(c)),K=u.i32_const(t.alloc(c)),gt=u.i32_const(t.alloc(c)),dt=u.i32_const(t.alloc(c)),_t=u.i32_const(t.alloc(c));B.addCode(u.if(u.call(e+"_isZero",u.getLocal("p1")),u.ret(u.call(e+"_isZeroAffine",u.getLocal("p2")))),u.if(u.call(e+"_isZeroAffine",u.getLocal("p2")),u.ret(u.i32_const(0))),u.if(u.call(n+"_isOne",$),u.ret(u.call(e+"_eqAffine",u.getLocal("p1"),u.getLocal("p2")))),u.call(n+"_square",$,K),u.call(n+"_mul",M,K,gt),u.call(n+"_mul",$,K,dt),u.call(n+"_mul",b,dt,_t),u.if(u.call(n+"_eq",S,gt),u.if(u.call(n+"_eq",h,_t),u.ret(u.i32_const(1)))),u.ret(u.i32_const(0)))}function A(){const B=t.addFunction(e+"_double");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c)),$=u.i32_add(u.getLocal("p1"),u.i32_const(c*2)),M=u.getLocal("pr"),b=u.i32_add(u.getLocal("pr"),u.i32_const(c)),K=u.i32_add(u.getLocal("pr"),u.i32_const(c*2)),gt=u.i32_const(t.alloc(c)),dt=u.i32_const(t.alloc(c)),_t=u.i32_const(t.alloc(c)),Ot=u.i32_const(t.alloc(c)),pt=u.i32_const(t.alloc(c)),Ft=u.i32_const(t.alloc(c)),qt=u.i32_const(t.alloc(c)),yt=u.i32_const(t.alloc(c));B.addCode(u.if(u.call(e+"_isZero",u.getLocal("p1")),[...u.call(e+"_copy",u.getLocal("p1"),u.getLocal("pr")),...u.ret([])]),u.if(u.call(n+"_isOne",$),[...u.ret(u.call(e+"_doubleAffine",u.getLocal("p1"),u.getLocal("pr"))),...u.ret([])]),u.call(n+"_square",S,gt),u.call(n+"_square",h,dt),u.call(n+"_square",dt,_t),u.call(n+"_add",S,dt,Ot),u.call(n+"_square",Ot,Ot),u.call(n+"_sub",Ot,gt,Ot),u.call(n+"_sub",Ot,_t,Ot),u.call(n+"_add",Ot,Ot,Ot),u.call(n+"_add",gt,gt,pt),u.call(n+"_add",pt,gt,pt),u.call(n+"_square",pt,Ft),u.call(n+"_mul",h,$,qt),u.call(n+"_add",Ot,Ot,M),u.call(n+"_sub",Ft,M,M),u.call(n+"_add",_t,_t,yt),u.call(n+"_add",yt,yt,yt),u.call(n+"_add",yt,yt,yt),u.call(n+"_sub",Ot,M,b),u.call(n+"_mul",b,pt,b),u.call(n+"_sub",b,yt,b),u.call(n+"_add",qt,qt,K))}function w(){const B=t.addFunction(e+"_doubleAffine");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c)),$=u.getLocal("pr"),M=u.i32_add(u.getLocal("pr"),u.i32_const(c)),b=u.i32_add(u.getLocal("pr"),u.i32_const(c*2)),K=u.i32_const(t.alloc(c)),gt=u.i32_const(t.alloc(c)),dt=u.i32_const(t.alloc(c)),_t=u.i32_const(t.alloc(c)),Ot=u.i32_const(t.alloc(c)),pt=u.i32_const(t.alloc(c));B.addCode(u.if(u.call(e+"_isZeroAffine",u.getLocal("p1")),[...u.call(e+"_toJacobian",u.getLocal("p1"),u.getLocal("pr")),...u.ret([])]),u.call(n+"_square",S,K),u.call(n+"_square",h,gt),u.call(n+"_square",gt,dt),u.call(n+"_add",S,gt,_t),u.call(n+"_square",_t,_t),u.call(n+"_sub",_t,K,_t),u.call(n+"_sub",_t,dt,_t),u.call(n+"_add",_t,_t,_t),u.call(n+"_add",K,K,Ot),u.call(n+"_add",Ot,K,Ot),u.call(n+"_add",h,h,b),u.call(n+"_square",Ot,$),u.call(n+"_sub",$,_t,$),u.call(n+"_sub",$,_t,$),u.call(n+"_add",dt,dt,pt),u.call(n+"_add",pt,pt,pt),u.call(n+"_add",pt,pt,pt),u.call(n+"_sub",_t,$,M),u.call(n+"_mul",M,Ot,M),u.call(n+"_sub",M,pt,M))}function T(){const B=t.addFunction(e+"_eqAffine");B.addParam("p1","i32"),B.addParam("p2","i32"),B.setReturnType("i32"),B.addLocal("z1","i32");const u=B.getCodeBuilder();B.addCode(u.ret(u.i32_and(u.call(n+"_eq",u.getLocal("p1"),u.getLocal("p2")),u.call(n+"_eq",u.i32_add(u.getLocal("p1"),u.i32_const(c)),u.i32_add(u.getLocal("p2"),u.i32_const(c))))))}function F(){const B=t.addFunction(e+"_toMontgomery");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder();B.addCode(u.call(n+"_toMontgomery",u.getLocal("p1"),u.getLocal("pr")));for(let S=1;S<3;S++)B.addCode(u.call(n+"_toMontgomery",u.i32_add(u.getLocal("p1"),u.i32_const(S*c)),u.i32_add(u.getLocal("pr"),u.i32_const(S*c))))}function R(){const B=t.addFunction(e+"_toMontgomeryAffine");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder();B.addCode(u.call(n+"_toMontgomery",u.getLocal("p1"),u.getLocal("pr")));for(let S=1;S<2;S++)B.addCode(u.call(n+"_toMontgomery",u.i32_add(u.getLocal("p1"),u.i32_const(S*c)),u.i32_add(u.getLocal("pr"),u.i32_const(S*c))))}function q(){const B=t.addFunction(e+"_fromMontgomery");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder();B.addCode(u.call(n+"_fromMontgomery",u.getLocal("p1"),u.getLocal("pr")));for(let S=1;S<3;S++)B.addCode(u.call(n+"_fromMontgomery",u.i32_add(u.getLocal("p1"),u.i32_const(S*c)),u.i32_add(u.getLocal("pr"),u.i32_const(S*c))))}function Z(){const B=t.addFunction(e+"_fromMontgomeryAffine");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder();B.addCode(u.call(n+"_fromMontgomery",u.getLocal("p1"),u.getLocal("pr")));for(let S=1;S<2;S++)B.addCode(u.call(n+"_fromMontgomery",u.i32_add(u.getLocal("p1"),u.i32_const(S*c)),u.i32_add(u.getLocal("pr"),u.i32_const(S*c))))}function E(){const B=t.addFunction(e+"_add");B.addParam("p1","i32"),B.addParam("p2","i32"),B.addParam("pr","i32"),B.addLocal("z1","i32"),B.addLocal("z2","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c));B.addCode(u.setLocal("z1",u.i32_add(u.getLocal("p1"),u.i32_const(c*2))));const $=u.getLocal("z1"),M=u.getLocal("p2"),b=u.i32_add(u.getLocal("p2"),u.i32_const(c));B.addCode(u.setLocal("z2",u.i32_add(u.getLocal("p2"),u.i32_const(c*2))));const K=u.getLocal("z2"),gt=u.getLocal("pr"),dt=u.i32_add(u.getLocal("pr"),u.i32_const(c)),_t=u.i32_add(u.getLocal("pr"),u.i32_const(c*2)),Ot=u.i32_const(t.alloc(c)),pt=u.i32_const(t.alloc(c)),Ft=u.i32_const(t.alloc(c)),qt=u.i32_const(t.alloc(c)),yt=u.i32_const(t.alloc(c)),ft=u.i32_const(t.alloc(c)),xt=u.i32_const(t.alloc(c)),Rt=u.i32_const(t.alloc(c)),Ht=u.i32_const(t.alloc(c)),Fe=u.i32_const(t.alloc(c)),de=u.i32_const(t.alloc(c)),Ce=u.i32_const(t.alloc(c)),oe=u.i32_const(t.alloc(c)),fe=u.i32_const(t.alloc(c)),me=u.i32_const(t.alloc(c)),nn=u.i32_const(t.alloc(c)),Ie=u.i32_const(t.alloc(c));B.addCode(u.if(u.call(e+"_isZero",u.getLocal("p1")),[...u.call(e+"_copy",u.getLocal("p2"),u.getLocal("pr")),...u.ret([])]),u.if(u.call(e+"_isZero",u.getLocal("p2")),[...u.call(e+"_copy",u.getLocal("p1"),u.getLocal("pr")),...u.ret([])]),u.if(u.call(n+"_isOne",$),[...u.call(e+"_addMixed",M,S,gt),...u.ret([])]),u.if(u.call(n+"_isOne",K),[...u.call(e+"_addMixed",S,M,gt),...u.ret([])]),u.call(n+"_square",$,Ot),u.call(n+"_square",K,pt),u.call(n+"_mul",S,pt,Ft),u.call(n+"_mul",M,Ot,qt),u.call(n+"_mul",$,Ot,yt),u.call(n+"_mul",K,pt,ft),u.call(n+"_mul",h,ft,xt),u.call(n+"_mul",b,yt,Rt),u.if(u.call(n+"_eq",Ft,qt),u.if(u.call(n+"_eq",xt,Rt),[...u.call(e+"_double",u.getLocal("p1"),u.getLocal("pr")),...u.ret([])])),u.call(n+"_sub",qt,Ft,Ht),u.call(n+"_sub",Rt,xt,Fe),u.call(n+"_add",Ht,Ht,de),u.call(n+"_square",de,de),u.call(n+"_mul",Ht,de,Ce),u.call(n+"_add",Fe,Fe,oe),u.call(n+"_mul",Ft,de,me),u.call(n+"_square",oe,fe),u.call(n+"_add",me,me,nn),u.call(n+"_sub",fe,Ce,gt),u.call(n+"_sub",gt,nn,gt),u.call(n+"_mul",xt,Ce,Ie),u.call(n+"_add",Ie,Ie,Ie),u.call(n+"_sub",me,gt,dt),u.call(n+"_mul",dt,oe,dt),u.call(n+"_sub",dt,Ie,dt),u.call(n+"_add",$,K,_t),u.call(n+"_square",_t,_t),u.call(n+"_sub",_t,Ot,_t),u.call(n+"_sub",_t,pt,_t),u.call(n+"_mul",_t,Ht,_t))}function f(){const B=t.addFunction(e+"_addMixed");B.addParam("p1","i32"),B.addParam("p2","i32"),B.addParam("pr","i32"),B.addLocal("z1","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c));B.addCode(u.setLocal("z1",u.i32_add(u.getLocal("p1"),u.i32_const(c*2))));const $=u.getLocal("z1"),M=u.getLocal("p2"),b=u.i32_add(u.getLocal("p2"),u.i32_const(c)),K=u.getLocal("pr"),gt=u.i32_add(u.getLocal("pr"),u.i32_const(c)),dt=u.i32_add(u.getLocal("pr"),u.i32_const(c*2)),_t=u.i32_const(t.alloc(c)),Ot=u.i32_const(t.alloc(c)),pt=u.i32_const(t.alloc(c)),Ft=u.i32_const(t.alloc(c)),qt=u.i32_const(t.alloc(c)),yt=u.i32_const(t.alloc(c)),ft=u.i32_const(t.alloc(c)),xt=u.i32_const(t.alloc(c)),Rt=u.i32_const(t.alloc(c)),Ht=u.i32_const(t.alloc(c)),Fe=u.i32_const(t.alloc(c)),de=u.i32_const(t.alloc(c)),Ce=u.i32_const(t.alloc(c)),oe=u.i32_const(t.alloc(c));B.addCode(u.if(u.call(e+"_isZero",u.getLocal("p1")),[...u.call(e+"_copyAffine",u.getLocal("p2"),u.getLocal("pr")),...u.call(n+"_one",u.i32_add(u.getLocal("pr"),u.i32_const(c*2))),...u.ret([])]),u.if(u.call(e+"_isZeroAffine",u.getLocal("p2")),[...u.call(e+"_copy",u.getLocal("p1"),u.getLocal("pr")),...u.ret([])]),u.if(u.call(n+"_isOne",$),[...u.call(e+"_addAffine",S,M,K),...u.ret([])]),u.call(n+"_square",$,_t),u.call(n+"_mul",M,_t,Ot),u.call(n+"_mul",$,_t,pt),u.call(n+"_mul",b,pt,Ft),u.if(u.call(n+"_eq",S,Ot),u.if(u.call(n+"_eq",h,Ft),[...u.call(e+"_doubleAffine",u.getLocal("p2"),u.getLocal("pr")),...u.ret([])])),u.call(n+"_sub",Ot,S,qt),u.call(n+"_sub",Ft,h,ft),u.call(n+"_square",qt,yt),u.call(n+"_add",yt,yt,xt),u.call(n+"_add",xt,xt,xt),u.call(n+"_mul",qt,xt,Rt),u.call(n+"_add",ft,ft,Ht),u.call(n+"_mul",S,xt,de),u.call(n+"_square",Ht,Fe),u.call(n+"_add",de,de,Ce),u.call(n+"_sub",Fe,Rt,K),u.call(n+"_sub",K,Ce,K),u.call(n+"_mul",h,Rt,oe),u.call(n+"_add",oe,oe,oe),u.call(n+"_sub",de,K,gt),u.call(n+"_mul",gt,Ht,gt),u.call(n+"_sub",gt,oe,gt),u.call(n+"_add",$,qt,dt),u.call(n+"_square",dt,dt),u.call(n+"_sub",dt,_t,dt),u.call(n+"_sub",dt,yt,dt))}function y(){const B=t.addFunction(e+"_addAffine");B.addParam("p1","i32"),B.addParam("p2","i32"),B.addParam("pr","i32"),B.addLocal("z1","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c));B.addCode(u.setLocal("z1",u.i32_add(u.getLocal("p1"),u.i32_const(c*2))));const $=u.getLocal("p2"),M=u.i32_add(u.getLocal("p2"),u.i32_const(c)),b=u.getLocal("pr"),K=u.i32_add(u.getLocal("pr"),u.i32_const(c)),gt=u.i32_add(u.getLocal("pr"),u.i32_const(c*2)),dt=u.i32_const(t.alloc(c)),_t=u.i32_const(t.alloc(c)),Ot=u.i32_const(t.alloc(c)),pt=u.i32_const(t.alloc(c)),Ft=u.i32_const(t.alloc(c)),qt=u.i32_const(t.alloc(c)),yt=u.i32_const(t.alloc(c)),ft=u.i32_const(t.alloc(c)),xt=u.i32_const(t.alloc(c)),Rt=u.i32_const(t.alloc(c));B.addCode(u.if(u.call(e+"_isZeroAffine",u.getLocal("p1")),[...u.call(e+"_copyAffine",u.getLocal("p2"),u.getLocal("pr")),...u.call(n+"_one",u.i32_add(u.getLocal("pr"),u.i32_const(c*2))),...u.ret([])]),u.if(u.call(e+"_isZeroAffine",u.getLocal("p2")),[...u.call(e+"_copyAffine",u.getLocal("p1"),u.getLocal("pr")),...u.call(n+"_one",u.i32_add(u.getLocal("pr"),u.i32_const(c*2))),...u.ret([])]),u.if(u.call(n+"_eq",S,$),u.if(u.call(n+"_eq",h,M),[...u.call(e+"_doubleAffine",u.getLocal("p2"),u.getLocal("pr")),...u.ret([])])),u.call(n+"_sub",$,S,dt),u.call(n+"_sub",M,h,Ot),u.call(n+"_square",dt,_t),u.call(n+"_add",_t,_t,pt),u.call(n+"_add",pt,pt,pt),u.call(n+"_mul",dt,pt,Ft),u.call(n+"_add",Ot,Ot,qt),u.call(n+"_mul",S,pt,ft),u.call(n+"_square",qt,yt),u.call(n+"_add",ft,ft,xt),u.call(n+"_sub",yt,Ft,b),u.call(n+"_sub",b,xt,b),u.call(n+"_mul",h,Ft,Rt),u.call(n+"_add",Rt,Rt,Rt),u.call(n+"_sub",ft,b,K),u.call(n+"_mul",K,qt,K),u.call(n+"_sub",K,Rt,K),u.call(n+"_add",dt,dt,gt))}function I(){const B=t.addFunction(e+"_neg");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c)),$=u.i32_add(u.getLocal("p1"),u.i32_const(c*2)),M=u.getLocal("pr"),b=u.i32_add(u.getLocal("pr"),u.i32_const(c)),K=u.i32_add(u.getLocal("pr"),u.i32_const(c*2));B.addCode(u.call(n+"_copy",S,M),u.call(n+"_neg",h,b),u.call(n+"_copy",$,K))}function k(){const B=t.addFunction(e+"_negAffine");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c)),$=u.getLocal("pr"),M=u.i32_add(u.getLocal("pr"),u.i32_const(c));B.addCode(u.call(n+"_copy",S,$),u.call(n+"_neg",h,M))}function O(){const B=t.addFunction(e+"_sub");B.addParam("p1","i32"),B.addParam("p2","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder(),S=u.i32_const(t.alloc(c*3));B.addCode(u.call(e+"_neg",u.getLocal("p2"),S),u.call(e+"_add",u.getLocal("p1"),S,u.getLocal("pr")))}function x(){const B=t.addFunction(e+"_subMixed");B.addParam("p1","i32"),B.addParam("p2","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder(),S=u.i32_const(t.alloc(c*3));B.addCode(u.call(e+"_negAffine",u.getLocal("p2"),S),u.call(e+"_addMixed",u.getLocal("p1"),S,u.getLocal("pr")))}function v(){const B=t.addFunction(e+"_subAffine");B.addParam("p1","i32"),B.addParam("p2","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder(),S=u.i32_const(t.alloc(c*3));B.addCode(u.call(e+"_negAffine",u.getLocal("p2"),S),u.call(e+"_addAffine",u.getLocal("p1"),S,u.getLocal("pr")))}function P(){const B=t.addFunction(e+"_normalize");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c)),$=u.i32_add(u.getLocal("p1"),u.i32_const(c*2)),M=u.getLocal("pr"),b=u.i32_add(u.getLocal("pr"),u.i32_const(c)),K=u.i32_add(u.getLocal("pr"),u.i32_const(c*2)),gt=u.i32_const(t.alloc(c)),dt=u.i32_const(t.alloc(c)),_t=u.i32_const(t.alloc(c));B.addCode(u.if(u.call(e+"_isZero",u.getLocal("p1")),u.call(e+"_zero",u.getLocal("pr")),[...u.call(n+"_inverse",$,gt),...u.call(n+"_square",gt,dt),...u.call(n+"_mul",gt,dt,_t),...u.call(n+"_mul",S,dt,M),...u.call(n+"_mul",h,_t,b),...u.call(n+"_one",K)]))}function V(){const B=t.addFunction(e+"_toAffine");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c)),$=u.i32_add(u.getLocal("p1"),u.i32_const(c*2)),M=u.getLocal("pr"),b=u.i32_add(u.getLocal("pr"),u.i32_const(c)),K=u.i32_const(t.alloc(c)),gt=u.i32_const(t.alloc(c)),dt=u.i32_const(t.alloc(c));B.addCode(u.if(u.call(e+"_isZero",u.getLocal("p1")),[...u.call(n+"_zero",M),...u.call(n+"_zero",b)],[...u.call(n+"_inverse",$,K),...u.call(n+"_square",K,gt),...u.call(n+"_mul",K,gt,dt),...u.call(n+"_mul",S,gt,M),...u.call(n+"_mul",h,dt,b)]))}function at(){const B=t.addFunction(e+"_toJacobian");B.addParam("p1","i32"),B.addParam("pr","i32");const u=B.getCodeBuilder(),S=u.getLocal("p1"),h=u.i32_add(u.getLocal("p1"),u.i32_const(c)),$=u.getLocal("pr"),M=u.i32_add(u.getLocal("pr"),u.i32_const(c)),b=u.i32_add(u.getLocal("pr"),u.i32_const(c*2));B.addCode(u.if(u.call(e+"_isZeroAffine",u.getLocal("p1")),u.call(e+"_zero",u.getLocal("pr")),[...u.call(n+"_one",b),...u.call(n+"_copy",h,M),...u.call(n+"_copy",S,$)]))}function et(){const B=t.addFunction(e+"_batchToAffine");B.addParam("pIn","i32"),B.addParam("n","i32"),B.addParam("pOut","i32"),B.addLocal("pAux","i32"),B.addLocal("itIn","i32"),B.addLocal("itAux","i32"),B.addLocal("itOut","i32"),B.addLocal("i","i32");const u=B.getCodeBuilder(),S=u.i32_const(t.alloc(c));B.addCode(u.setLocal("pAux",u.i32_load(u.i32_const(0))),u.i32_store(u.i32_const(0),u.i32_add(u.getLocal("pAux"),u.i32_mul(u.getLocal("n"),u.i32_const(c)))),u.call(n+"_batchInverse",u.i32_add(u.getLocal("pIn"),u.i32_const(c*2)),u.i32_const(c*3),u.getLocal("n"),u.getLocal("pAux"),u.i32_const(c)),u.setLocal("itIn",u.getLocal("pIn")),u.setLocal("itAux",u.getLocal("pAux")),u.setLocal("itOut",u.getLocal("pOut")),u.setLocal("i",u.i32_const(0)),u.block(u.loop(u.br_if(1,u.i32_eq(u.getLocal("i"),u.getLocal("n"))),u.if(u.call(n+"_isZero",u.getLocal("itAux")),[...u.call(n+"_zero",u.getLocal("itOut")),...u.call(n+"_zero",u.i32_add(u.getLocal("itOut"),u.i32_const(c)))],[...u.call(n+"_mul",u.getLocal("itAux"),u.i32_add(u.getLocal("itIn"),u.i32_const(c)),S),...u.call(n+"_square",u.getLocal("itAux"),u.getLocal("itAux")),...u.call(n+"_mul",u.getLocal("itAux"),u.getLocal("itIn"),u.getLocal("itOut")),...u.call(n+"_mul",u.getLocal("itAux"),S,u.i32_add(u.getLocal("itOut"),u.i32_const(c)))]),u.setLocal("itIn",u.i32_add(u.getLocal("itIn"),u.i32_const(c*3))),u.setLocal("itOut",u.i32_add(u.getLocal("itOut"),u.i32_const(c*2))),u.setLocal("itAux",u.i32_add(u.getLocal("itAux"),u.i32_const(c))),u.setLocal("i",u.i32_add(u.getLocal("i"),u.i32_const(1))),u.br(0))),u.i32_store(u.i32_const(0),u.getLocal("pAux")))}function U(){const B=t.addFunction(e+"__reverseBytes");B.addParam("pIn","i32"),B.addParam("n","i32"),B.addParam("pOut","i32"),B.addLocal("itOut","i32"),B.addLocal("itIn","i32");const u=B.getCodeBuilder();B.addCode(u.setLocal("itOut",u.i32_sub(u.i32_add(u.getLocal("pOut"),u.getLocal("n")),u.i32_const(1))),u.setLocal("itIn",u.getLocal("pIn")),u.block(u.loop(u.br_if(1,u.i32_lt_s(u.getLocal("itOut"),u.getLocal("pOut"))),u.i32_store8(u.getLocal("itOut"),u.i32_load8_u(u.getLocal("itIn"))),u.setLocal("itOut",u.i32_sub(u.getLocal("itOut"),u.i32_const(1))),u.setLocal("itIn",u.i32_add(u.getLocal("itIn"),u.i32_const(1))),u.br(0))))}function ct(){const B=t.addFunction(e+"_LEMtoC");B.addParam("pIn","i32"),B.addParam("pOut","i32");const u=B.getCodeBuilder(),S=u.i32_const(t.alloc(c));B.addCode(u.if(u.call(e+"_isZero",u.getLocal("pIn")),[...u.call(n+"_zero",u.getLocal("pOut")),...u.i32_store8(u.getLocal("pOut"),u.i32_const(64)),...u.ret([])]),u.call(n+"_fromMontgomery",u.getLocal("pIn"),S),u.call(e+"__reverseBytes",S,u.i32_const(c),u.getLocal("pOut")),u.if(u.i32_eq(u.call(n+"_sign",u.i32_add(u.getLocal("pIn"),u.i32_const(c))),u.i32_const(-1)),u.i32_store8(u.getLocal("pOut"),u.i32_or(u.i32_load8_u(u.getLocal("pOut")),u.i32_const(128)))))}function H(){const B=t.addFunction(e+"_LEMtoU");B.addParam("pIn","i32"),B.addParam("pOut","i32");const u=B.getCodeBuilder(),S=t.alloc(c*2),h=u.i32_const(S),$=u.i32_const(S),M=u.i32_const(S+c);B.addCode(u.if(u.call(e+"_isZeroAffine",u.getLocal("pIn")),[...u.call(e+"_zeroAffine",u.getLocal("pOut")),...u.i32_store8(u.getLocal("pOut"),u.i32_const(64)),...u.ret([])]),u.call(e+"_fromMontgomeryAffine",u.getLocal("pIn"),h),u.call(e+"__reverseBytes",$,u.i32_const(c),u.getLocal("pOut")),u.call(e+"__reverseBytes",M,u.i32_const(c),u.i32_add(u.getLocal("pOut"),u.i32_const(c))))}function st(){const B=t.addFunction(e+"_UtoLEM");B.addParam("pIn","i32"),B.addParam("pOut","i32");const u=B.getCodeBuilder(),S=t.alloc(c*2),h=u.i32_const(S),$=u.i32_const(S),M=u.i32_const(S+c);B.addCode(u.if(u.i32_and(u.i32_load8_u(u.getLocal("pIn")),u.i32_const(64)),[...u.call(e+"_zeroAffine",u.getLocal("pOut")),...u.ret([])]),u.call(e+"__reverseBytes",u.getLocal("pIn"),u.i32_const(c),$),u.call(e+"__reverseBytes",u.i32_add(u.getLocal("pIn"),u.i32_const(c)),u.i32_const(c),M),u.call(e+"_toMontgomeryAffine",h,u.getLocal("pOut")))}function Mt(){const B=t.addFunction(e+"_CtoLEM");B.addParam("pIn","i32"),B.addParam("pOut","i32"),B.addLocal("firstByte","i32"),B.addLocal("greatest","i32");const u=B.getCodeBuilder(),S=t.alloc(c*2),h=u.i32_const(S),$=u.i32_const(S+c);B.addCode(u.setLocal("firstByte",u.i32_load8_u(u.getLocal("pIn"))),u.if(u.i32_and(u.getLocal("firstByte"),u.i32_const(64)),[...u.call(e+"_zeroAffine",u.getLocal("pOut")),...u.ret([])]),u.setLocal("greatest",u.i32_and(u.getLocal("firstByte"),u.i32_const(128))),u.call(n+"_copy",u.getLocal("pIn"),$),u.i32_store8($,u.i32_and(u.getLocal("firstByte"),u.i32_const(63))),u.call(e+"__reverseBytes",$,u.i32_const(c),h),u.call(n+"_toMontgomery",h,u.getLocal("pOut")),u.call(n+"_square",u.getLocal("pOut"),$),u.call(n+"_mul",u.getLocal("pOut"),$,$),u.call(n+"_add",$,u.i32_const(o),$),u.call(n+"_sqrt",$,$),u.call(n+"_neg",$,h),u.if(u.i32_eq(u.call(n+"_sign",$),u.i32_const(-1)),u.if(u.getLocal("greatest"),u.call(n+"_copy",$,u.i32_add(u.getLocal("pOut"),u.i32_const(c))),u.call(n+"_neg",$,u.i32_add(u.getLocal("pOut"),u.i32_const(c)))),u.if(u.getLocal("greatest"),u.call(n+"_neg",$,u.i32_add(u.getLocal("pOut"),u.i32_const(c))),u.call(n+"_copy",$,u.i32_add(u.getLocal("pOut"),u.i32_const(c))))))}function vt(){const B=t.addFunction(e+"_inCurveAffine");B.addParam("pIn","i32"),B.setReturnType("i32");const u=B.getCodeBuilder(),S=u.getLocal("pIn"),h=u.i32_add(u.getLocal("pIn"),u.i32_const(c)),$=u.i32_const(t.alloc(c)),M=u.i32_const(t.alloc(c));B.addCode(u.call(n+"_square",h,$),u.call(n+"_square",S,M),u.call(n+"_mul",S,M,M),u.call(n+"_add",M,u.i32_const(o),M),u.ret(u.call(n+"_eq",$,M)))}function Et(){const B=t.addFunction(e+"_inCurve");B.addParam("pIn","i32"),B.setReturnType("i32");const u=B.getCodeBuilder(),S=u.i32_const(t.alloc(c*2));B.addCode(u.call(e+"_toAffine",u.getLocal("pIn"),S),u.ret(u.call(e+"_inCurveAffine",S)))}return d(),l(),L(),g(),r(),s(),at(),T(),C(),m(),w(),A(),y(),f(),E(),k(),I(),v(),x(),O(),Z(),q(),R(),F(),V(),vt(),Et(),et(),P(),U(),H(),ct(),st(),Mt(),Sn(t,e+"_batchLEMtoU",e+"_LEMtoU",c*2,c*2),Sn(t,e+"_batchLEMtoC",e+"_LEMtoC",c*2,c),Sn(t,e+"_batchUtoLEM",e+"_UtoLEM",c*2,c*2),Sn(t,e+"_batchCtoLEM",e+"_CtoLEM",c,c*2,!0),Sn(t,e+"_batchToJacobian",e+"_toJacobian",c*2,c*3,!0),Gr(t,e,e+"_multiexp",e+"_add",c*3),Gr(t,e,e+"_multiexpAffine",e+"_addMixed",c*2),Qr(t,e+"_timesScalar",c*3,e+"_add",e+"_double",e+"_sub",e+"_copy",e+"_zero"),Qr(t,e+"_timesScalarAffine",c*2,e+"_addMixed",e+"_double",e+"_subMixed",e+"_copyAffine",e+"_zero"),t.exportFunction(e+"_isZero"),t.exportFunction(e+"_isZeroAffine"),t.exportFunction(e+"_eq"),t.exportFunction(e+"_eqMixed"),t.exportFunction(e+"_eqAffine"),t.exportFunction(e+"_copy"),t.exportFunction(e+"_copyAffine"),t.exportFunction(e+"_zero"),t.exportFunction(e+"_zeroAffine"),t.exportFunction(e+"_double"),t.exportFunction(e+"_doubleAffine"),t.exportFunction(e+"_add"),t.exportFunction(e+"_addMixed"),t.exportFunction(e+"_addAffine"),t.exportFunction(e+"_neg"),t.exportFunction(e+"_negAffine"),t.exportFunction(e+"_sub"),t.exportFunction(e+"_subMixed"),t.exportFunction(e+"_subAffine"),t.exportFunction(e+"_fromMontgomery"),t.exportFunction(e+"_fromMontgomeryAffine"),t.exportFunction(e+"_toMontgomery"),t.exportFunction(e+"_toMontgomeryAffine"),t.exportFunction(e+"_timesScalar"),t.exportFunction(e+"_timesScalarAffine"),t.exportFunction(e+"_normalize"),t.exportFunction(e+"_LEMtoU"),t.exportFunction(e+"_LEMtoC"),t.exportFunction(e+"_UtoLEM"),t.exportFunction(e+"_CtoLEM"),t.exportFunction(e+"_batchLEMtoU"),t.exportFunction(e+"_batchLEMtoC"),t.exportFunction(e+"_batchUtoLEM"),t.exportFunction(e+"_batchCtoLEM"),t.exportFunction(e+"_toAffine"),t.exportFunction(e+"_toJacobian"),t.exportFunction(e+"_batchToAffine"),t.exportFunction(e+"_batchToJacobian"),t.exportFunction(e+"_inCurve"),t.exportFunction(e+"_inCurveAffine"),e};const rn=Qe.exports,Yn=Me;var Qc=function(t,e,n,o,a){const l=t.modules[o].n64*8,s=t.modules[n].n64*8,r=t.modules[o].q;let g=r.minus(rn(1)),L=0;for(;!g.isOdd();)L++,g=g.shiftRight(1);let m=rn(2);for(;m.modPow(r.shiftRight(1),r).equals(1);)m=m.add(1);const C=new Array(L+1);C[L]=m.modPow(g,r);let A=L-1;for(;A>=0;)C[A]=C[A+1].modPow(2,r),A--;const w=[],T=rn(1).shiftLeft(l*8).mod(r);for(let S=0;S<C.length;S++){const h=C[S].times(T).mod(r);w.push(...Yn.bigInt2BytesLE(h,l))}const F=t.alloc(w),R=new Array(L+1);R[0]=rn(1);for(let S=1;S<=L;S++)R[S]=R[S-1].times(2);const q=[];for(let S=0;S<=L;S++){const h=R[S].modInv(r).times(T).mod(r);q.push(...Yn.bigInt2BytesLE(h,l))}const Z=t.alloc(q),E=m.modPow(2,r),f=[],y=[];for(let S=0;S<=L;S++){const h=E.modPow(rn(2).pow(S),r),$=r.add(rn.one).minus(h).modInv(r);f.push(...Yn.bigInt2BytesLE(h.times(T).mod(r),l)),y.push(...Yn.bigInt2BytesLE($.times(T).mod(r),l))}const I=t.alloc(f),k=t.alloc(y);function O(S){let h=0;for(let $=0;$<8;$++)S&1<<$&&(h=h|128>>$);return h}const x=Array(256);for(let S=0;S<256;S++)x[S]=O(S);const v=t.alloc(x);function P(){const S=t.addFunction(e+"__log2");S.addParam("n","i32"),S.setReturnType("i32"),S.addLocal("bits","i32"),S.addLocal("aux","i32");const h=S.getCodeBuilder();S.addCode(h.setLocal("aux",h.i32_shr_u(h.getLocal("n"),h.i32_const(1)))),S.addCode(h.setLocal("bits",h.i32_const(0))),S.addCode(h.block(h.loop(h.br_if(1,h.i32_eqz(h.getLocal("aux"))),h.setLocal("aux",h.i32_shr_u(h.getLocal("aux"),h.i32_const(1))),h.setLocal("bits",h.i32_add(h.getLocal("bits"),h.i32_const(1))),h.br(0)))),S.addCode(h.if(h.i32_ne(h.getLocal("n"),h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.unreachable())),S.addCode(h.if(h.i32_gt_u(h.getLocal("bits"),h.i32_const(L)),h.unreachable())),S.addCode(h.getLocal("bits"))}function V(){const S=t.addFunction(e+"_fft");S.addParam("px","i32"),S.addParam("n","i32"),S.addLocal("bits","i32");const h=S.getCodeBuilder(),$=h.i32_const(t.alloc(l));S.addCode(h.setLocal("bits",h.call(e+"__log2",h.getLocal("n"))),h.call(o+"_one",$),h.call(e+"_rawfft",h.getLocal("px"),h.getLocal("bits"),h.i32_const(0),$))}function at(){const S=t.addFunction(e+"_ifft");S.addParam("px","i32"),S.addParam("n","i32"),S.addLocal("bits","i32"),S.addLocal("pInv2","i32");const h=S.getCodeBuilder();S.addCode(h.setLocal("bits",h.call(e+"__log2",h.getLocal("n"))),h.setLocal("pInv2",h.i32_add(h.i32_const(Z),h.i32_mul(h.getLocal("bits"),h.i32_const(l)))),h.call(e+"_rawfft",h.getLocal("px"),h.getLocal("bits"),h.i32_const(1),h.getLocal("pInv2")))}function et(){const S=t.addFunction(e+"_rawfft");S.addParam("px","i32"),S.addParam("bits","i32"),S.addParam("reverse","i32"),S.addParam("mulFactor","i32"),S.addLocal("s","i32"),S.addLocal("k","i32"),S.addLocal("j","i32"),S.addLocal("m","i32"),S.addLocal("mdiv2","i32"),S.addLocal("n","i32"),S.addLocal("pwm","i32"),S.addLocal("idx1","i32"),S.addLocal("idx2","i32");const h=S.getCodeBuilder(),$=h.i32_const(t.alloc(l)),M=h.i32_const(t.alloc(s)),b=h.i32_const(t.alloc(s));S.addCode(h.call(e+"__reversePermutation",h.getLocal("px"),h.getLocal("bits")),h.setLocal("n",h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.setLocal("s",h.i32_const(1)),h.block(h.loop(h.br_if(1,h.i32_gt_u(h.getLocal("s"),h.getLocal("bits"))),h.setLocal("m",h.i32_shl(h.i32_const(1),h.getLocal("s"))),h.setLocal("pwm",h.i32_add(h.i32_const(F),h.i32_mul(h.getLocal("s"),h.i32_const(l)))),h.setLocal("k",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("k"),h.getLocal("n"))),h.call(o+"_one",$),h.setLocal("mdiv2",h.i32_shr_u(h.getLocal("m"),h.i32_const(1))),h.setLocal("j",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("j"),h.getLocal("mdiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("px"),h.i32_mul(h.i32_add(h.getLocal("k"),h.getLocal("j")),h.i32_const(s)))),h.setLocal("idx2",h.i32_add(h.getLocal("idx1"),h.i32_mul(h.getLocal("mdiv2"),h.i32_const(s)))),h.call(a,h.getLocal("idx2"),$,M),h.call(n+"_copy",h.getLocal("idx1"),b),h.call(n+"_add",b,M,h.getLocal("idx1")),h.call(n+"_sub",b,M,h.getLocal("idx2")),h.call(o+"_mul",$,h.getLocal("pwm"),$),h.setLocal("j",h.i32_add(h.getLocal("j"),h.i32_const(1))),h.br(0))),h.setLocal("k",h.i32_add(h.getLocal("k"),h.getLocal("m"))),h.br(0))),h.setLocal("s",h.i32_add(h.getLocal("s"),h.i32_const(1))),h.br(0))),h.call(e+"__fftFinal",h.getLocal("px"),h.getLocal("bits"),h.getLocal("reverse"),h.getLocal("mulFactor")))}function U(){const S=t.addFunction(e+"__fftFinal");S.addParam("px","i32"),S.addParam("bits","i32"),S.addParam("reverse","i32"),S.addParam("mulFactor","i32"),S.addLocal("n","i32"),S.addLocal("ndiv2","i32"),S.addLocal("pInv2","i32"),S.addLocal("i","i32"),S.addLocal("mask","i32"),S.addLocal("idx1","i32"),S.addLocal("idx2","i32");const h=S.getCodeBuilder(),$=h.i32_const(t.alloc(s));S.addCode(h.if(h.i32_and(h.i32_eqz(h.getLocal("reverse")),h.call(o+"_isOne",h.getLocal("mulFactor"))),h.ret([])),h.setLocal("n",h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.setLocal("mask",h.i32_sub(h.getLocal("n"),h.i32_const(1))),h.setLocal("i",h.i32_const(1)),h.setLocal("ndiv2",h.i32_shr_u(h.getLocal("n"),h.i32_const(1))),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("i"),h.getLocal("ndiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.setLocal("idx2",h.i32_add(h.getLocal("px"),h.i32_mul(h.i32_sub(h.getLocal("n"),h.getLocal("i")),h.i32_const(s)))),h.if(h.getLocal("reverse"),h.if(h.call(o+"_isOne",h.getLocal("mulFactor")),[...h.call(n+"_copy",h.getLocal("idx1"),$),...h.call(n+"_copy",h.getLocal("idx2"),h.getLocal("idx1")),...h.call(n+"_copy",$,h.getLocal("idx2"))],[...h.call(n+"_copy",h.getLocal("idx1"),$),...h.call(a,h.getLocal("idx2"),h.getLocal("mulFactor"),h.getLocal("idx1")),...h.call(a,$,h.getLocal("mulFactor"),h.getLocal("idx2"))]),h.if(h.call(o+"_isOne",h.getLocal("mulFactor")),[],[...h.call(a,h.getLocal("idx1"),h.getLocal("mulFactor"),h.getLocal("idx1")),...h.call(a,h.getLocal("idx2"),h.getLocal("mulFactor"),h.getLocal("idx2"))])),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))),h.if(h.call(o+"_isOne",h.getLocal("mulFactor")),[],[...h.call(a,h.getLocal("px"),h.getLocal("mulFactor"),h.getLocal("px")),...h.setLocal("idx2",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("ndiv2"),h.i32_const(s)))),...h.call(a,h.getLocal("idx2"),h.getLocal("mulFactor"),h.getLocal("idx2"))]))}function ct(){const S=t.addFunction(e+"__reversePermutation");S.addParam("px","i32"),S.addParam("bits","i32"),S.addLocal("n","i32"),S.addLocal("i","i32"),S.addLocal("ri","i32"),S.addLocal("idx1","i32"),S.addLocal("idx2","i32");const h=S.getCodeBuilder(),$=h.i32_const(t.alloc(s));S.addCode(h.setLocal("n",h.i32_shl(h.i32_const(1),h.getLocal("bits"))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.setLocal("ri",h.call(e+"__rev",h.getLocal("i"),h.getLocal("bits"))),h.setLocal("idx2",h.i32_add(h.getLocal("px"),h.i32_mul(h.getLocal("ri"),h.i32_const(s)))),h.if(h.i32_lt_u(h.getLocal("i"),h.getLocal("ri")),[...h.call(n+"_copy",h.getLocal("idx1"),$),...h.call(n+"_copy",h.getLocal("idx2"),h.getLocal("idx1")),...h.call(n+"_copy",$,h.getLocal("idx2"))]),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function H(){const S=t.addFunction(e+"__rev");S.addParam("x","i32"),S.addParam("bits","i32"),S.setReturnType("i32");const h=S.getCodeBuilder();S.addCode(h.i32_rotl(h.i32_add(h.i32_add(h.i32_shl(h.i32_load8_u(h.i32_and(h.getLocal("x"),h.i32_const(255)),v,0),h.i32_const(24)),h.i32_shl(h.i32_load8_u(h.i32_and(h.i32_shr_u(h.getLocal("x"),h.i32_const(8)),h.i32_const(255)),v,0),h.i32_const(16))),h.i32_add(h.i32_shl(h.i32_load8_u(h.i32_and(h.i32_shr_u(h.getLocal("x"),h.i32_const(16)),h.i32_const(255)),v,0),h.i32_const(8)),h.i32_load8_u(h.i32_and(h.i32_shr_u(h.getLocal("x"),h.i32_const(24)),h.i32_const(255)),v,0))),h.getLocal("bits")))}function st(){const S=t.addFunction(e+"_fftJoin");S.addParam("pBuff1","i32"),S.addParam("pBuff2","i32"),S.addParam("n","i32"),S.addParam("first","i32"),S.addParam("inc","i32"),S.addLocal("idx1","i32"),S.addLocal("idx2","i32"),S.addLocal("i","i32");const h=S.getCodeBuilder(),$=h.i32_const(t.alloc(l)),M=h.i32_const(t.alloc(s)),b=h.i32_const(t.alloc(s));S.addCode(h.call(o+"_copy",h.getLocal("first"),$),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.call(a,h.getLocal("idx2"),$,M),h.call(n+"_copy",h.getLocal("idx1"),b),h.call(n+"_add",b,M,h.getLocal("idx1")),h.call(n+"_sub",b,M,h.getLocal("idx2")),h.call(o+"_mul",$,h.getLocal("inc"),$),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function Mt(){const S=t.addFunction(e+"_fftJoinExt");S.addParam("pBuff1","i32"),S.addParam("pBuff2","i32"),S.addParam("n","i32"),S.addParam("first","i32"),S.addParam("inc","i32"),S.addParam("totalBits","i32"),S.addLocal("idx1","i32"),S.addLocal("idx2","i32"),S.addLocal("i","i32"),S.addLocal("pShiftToM","i32");const h=S.getCodeBuilder(),$=h.i32_const(t.alloc(l)),M=h.i32_const(t.alloc(s));S.addCode(h.setLocal("pShiftToM",h.i32_add(h.i32_const(I),h.i32_mul(h.getLocal("totalBits"),h.i32_const(l)))),h.call(o+"_copy",h.getLocal("first"),$),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.call(n+"_add",h.getLocal("idx1"),h.getLocal("idx2"),M),h.call(a,h.getLocal("idx2"),h.getLocal("pShiftToM"),h.getLocal("idx2")),h.call(n+"_add",h.getLocal("idx1"),h.getLocal("idx2"),h.getLocal("idx2")),h.call(a,h.getLocal("idx2"),$,h.getLocal("idx2")),h.call(n+"_copy",M,h.getLocal("idx1")),h.call(o+"_mul",$,h.getLocal("inc"),$),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function vt(){const S=t.addFunction(e+"_fftJoinExtInv");S.addParam("pBuff1","i32"),S.addParam("pBuff2","i32"),S.addParam("n","i32"),S.addParam("first","i32"),S.addParam("inc","i32"),S.addParam("totalBits","i32"),S.addLocal("idx1","i32"),S.addLocal("idx2","i32"),S.addLocal("i","i32"),S.addLocal("pShiftToM","i32"),S.addLocal("pSConst","i32");const h=S.getCodeBuilder(),$=h.i32_const(t.alloc(l)),M=h.i32_const(t.alloc(s));S.addCode(h.setLocal("pShiftToM",h.i32_add(h.i32_const(I),h.i32_mul(h.getLocal("totalBits"),h.i32_const(l)))),h.setLocal("pSConst",h.i32_add(h.i32_const(k),h.i32_mul(h.getLocal("totalBits"),h.i32_const(l)))),h.call(o+"_copy",h.getLocal("first"),$),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.call(a,h.getLocal("idx2"),$,M),h.call(n+"_sub",h.getLocal("idx1"),M,h.getLocal("idx2")),h.call(a,h.getLocal("idx2"),h.getLocal("pSConst"),h.getLocal("idx2")),h.call(a,h.getLocal("idx1"),h.getLocal("pShiftToM"),h.getLocal("idx1")),h.call(n+"_sub",M,h.getLocal("idx1"),h.getLocal("idx1")),h.call(a,h.getLocal("idx1"),h.getLocal("pSConst"),h.getLocal("idx1")),h.call(o+"_mul",$,h.getLocal("inc"),$),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function Et(){const S=t.addFunction(e+"_prepareLagrangeEvaluation");S.addParam("pBuff1","i32"),S.addParam("pBuff2","i32"),S.addParam("n","i32"),S.addParam("first","i32"),S.addParam("inc","i32"),S.addParam("totalBits","i32"),S.addLocal("idx1","i32"),S.addLocal("idx2","i32"),S.addLocal("i","i32"),S.addLocal("pShiftToM","i32"),S.addLocal("pSConst","i32");const h=S.getCodeBuilder(),$=h.i32_const(t.alloc(l)),M=h.i32_const(t.alloc(s));S.addCode(h.setLocal("pShiftToM",h.i32_add(h.i32_const(I),h.i32_mul(h.getLocal("totalBits"),h.i32_const(l)))),h.setLocal("pSConst",h.i32_add(h.i32_const(k),h.i32_mul(h.getLocal("totalBits"),h.i32_const(l)))),h.call(o+"_copy",h.getLocal("first"),$),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("n"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff1"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff2"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.call(a,h.getLocal("idx1"),h.getLocal("pShiftToM"),M),h.call(n+"_sub",h.getLocal("idx2"),M,M),h.call(n+"_sub",h.getLocal("idx1"),h.getLocal("idx2"),h.getLocal("idx2")),h.call(a,M,h.getLocal("pSConst"),h.getLocal("idx1")),h.call(a,h.getLocal("idx2"),$,h.getLocal("idx2")),h.call(o+"_mul",$,h.getLocal("inc"),$),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function B(){const S=t.addFunction(e+"_fftMix");S.addParam("pBuff","i32"),S.addParam("n","i32"),S.addParam("exp","i32"),S.addLocal("nGroups","i32"),S.addLocal("nPerGroup","i32"),S.addLocal("nPerGroupDiv2","i32"),S.addLocal("pairOffset","i32"),S.addLocal("idx1","i32"),S.addLocal("idx2","i32"),S.addLocal("i","i32"),S.addLocal("j","i32"),S.addLocal("pwm","i32");const h=S.getCodeBuilder(),$=h.i32_const(t.alloc(l)),M=h.i32_const(t.alloc(s)),b=h.i32_const(t.alloc(s));S.addCode(h.setLocal("nPerGroup",h.i32_shl(h.i32_const(1),h.getLocal("exp"))),h.setLocal("nPerGroupDiv2",h.i32_shr_u(h.getLocal("nPerGroup"),h.i32_const(1))),h.setLocal("nGroups",h.i32_shr_u(h.getLocal("n"),h.getLocal("exp"))),h.setLocal("pairOffset",h.i32_mul(h.getLocal("nPerGroupDiv2"),h.i32_const(s))),h.setLocal("pwm",h.i32_add(h.i32_const(F),h.i32_mul(h.getLocal("exp"),h.i32_const(l)))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("i"),h.getLocal("nGroups"))),h.call(o+"_one",$),h.setLocal("j",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_eq(h.getLocal("j"),h.getLocal("nPerGroupDiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.i32_add(h.i32_mul(h.getLocal("i"),h.getLocal("nPerGroup")),h.getLocal("j")),h.i32_const(s)))),h.setLocal("idx2",h.i32_add(h.getLocal("idx1"),h.getLocal("pairOffset"))),h.call(a,h.getLocal("idx2"),$,M),h.call(n+"_copy",h.getLocal("idx1"),b),h.call(n+"_add",b,M,h.getLocal("idx1")),h.call(n+"_sub",b,M,h.getLocal("idx2")),h.call(o+"_mul",$,h.getLocal("pwm"),$),h.setLocal("j",h.i32_add(h.getLocal("j"),h.i32_const(1))),h.br(0))),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}function u(){const S=t.addFunction(e+"_fftFinal");S.addParam("pBuff","i32"),S.addParam("n","i32"),S.addParam("factor","i32"),S.addLocal("idx1","i32"),S.addLocal("idx2","i32"),S.addLocal("i","i32"),S.addLocal("ndiv2","i32");const h=S.getCodeBuilder(),$=h.i32_const(t.alloc(s));S.addCode(h.setLocal("ndiv2",h.i32_shr_u(h.getLocal("n"),h.i32_const(1))),h.if(h.i32_and(h.getLocal("n"),h.i32_const(1)),h.call(a,h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.getLocal("ndiv2"),h.i32_const(s))),h.getLocal("factor"),h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.getLocal("ndiv2"),h.i32_const(s))))),h.setLocal("i",h.i32_const(0)),h.block(h.loop(h.br_if(1,h.i32_ge_u(h.getLocal("i"),h.getLocal("ndiv2"))),h.setLocal("idx1",h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.getLocal("i"),h.i32_const(s)))),h.setLocal("idx2",h.i32_add(h.getLocal("pBuff"),h.i32_mul(h.i32_sub(h.i32_sub(h.getLocal("n"),h.i32_const(1)),h.getLocal("i")),h.i32_const(s)))),h.call(a,h.getLocal("idx2"),h.getLocal("factor"),$),h.call(a,h.getLocal("idx1"),h.getLocal("factor"),h.getLocal("idx2")),h.call(n+"_copy",$,h.getLocal("idx1")),h.setLocal("i",h.i32_add(h.getLocal("i"),h.i32_const(1))),h.br(0))))}H(),ct(),U(),et(),P(),V(),at(),st(),Mt(),vt(),B(),u(),Et(),t.exportFunction(e+"_fft"),t.exportFunction(e+"_ifft"),t.exportFunction(e+"_rawfft"),t.exportFunction(e+"_fftJoin"),t.exportFunction(e+"_fftJoinExt"),t.exportFunction(e+"_fftJoinExtInv"),t.exportFunction(e+"_fftMix"),t.exportFunction(e+"_fftFinal"),t.exportFunction(e+"_prepareLagrangeEvaluation")},Gc=function(t,e,n){const a=t.modules[n].n64*8;function c(){const d=t.addFunction(e+"_zero");d.addParam("px","i32"),d.addParam("n","i32"),d.addLocal("lastp","i32"),d.addLocal("p","i32");const s=d.getCodeBuilder();d.addCode(s.setLocal("p",s.getLocal("px")),s.setLocal("lastp",s.i32_add(s.getLocal("px"),s.i32_mul(s.getLocal("n"),s.i32_const(a)))),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("p"),s.getLocal("lastp"))),s.call(n+"_zero",s.getLocal("p")),s.setLocal("p",s.i32_add(s.getLocal("p"),s.i32_const(a))),s.br(0))))}function l(){const d=t.addFunction(e+"_constructLC");d.addParam("ppolynomials","i32"),d.addParam("psignals","i32"),d.addParam("nSignals","i32"),d.addParam("pres","i32"),d.addLocal("i","i32"),d.addLocal("j","i32"),d.addLocal("pp","i32"),d.addLocal("ps","i32"),d.addLocal("pd","i32"),d.addLocal("ncoefs","i32");const s=d.getCodeBuilder(),r=s.i32_const(t.alloc(a));d.addCode(s.setLocal("i",s.i32_const(0)),s.setLocal("pp",s.getLocal("ppolynomials")),s.setLocal("ps",s.getLocal("psignals")),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("i"),s.getLocal("nSignals"))),s.setLocal("ncoefs",s.i32_load(s.getLocal("pp"))),s.setLocal("pp",s.i32_add(s.getLocal("pp"),s.i32_const(4))),s.setLocal("j",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("j"),s.getLocal("ncoefs"))),s.setLocal("pd",s.i32_add(s.getLocal("pres"),s.i32_mul(s.i32_load(s.getLocal("pp")),s.i32_const(a)))),s.setLocal("pp",s.i32_add(s.getLocal("pp"),s.i32_const(4))),s.call(n+"_mul",s.getLocal("ps"),s.getLocal("pp"),r),s.call(n+"_add",r,s.getLocal("pd"),s.getLocal("pd")),s.setLocal("pp",s.i32_add(s.getLocal("pp"),s.i32_const(a))),s.setLocal("j",s.i32_add(s.getLocal("j"),s.i32_const(1))),s.br(0))),s.setLocal("ps",s.i32_add(s.getLocal("ps"),s.i32_const(a))),s.setLocal("i",s.i32_add(s.getLocal("i"),s.i32_const(1))),s.br(0))))}return c(),l(),t.exportFunction(e+"_zero"),t.exportFunction(e+"_constructLC"),e},Wc=function(t,e,n){const a=t.modules[n].n64*8;function c(){const s=t.addFunction(e+"_buildABC");s.addParam("pCoefs","i32"),s.addParam("nCoefs","i32"),s.addParam("pWitness","i32"),s.addParam("pA","i32"),s.addParam("pB","i32"),s.addParam("pC","i32"),s.addParam("offsetOut","i32"),s.addParam("nOut","i32"),s.addParam("offsetWitness","i32"),s.addParam("nWitness","i32"),s.addLocal("it","i32"),s.addLocal("ita","i32"),s.addLocal("itb","i32"),s.addLocal("last","i32"),s.addLocal("m","i32"),s.addLocal("c","i32"),s.addLocal("s","i32"),s.addLocal("pOut","i32");const r=s.getCodeBuilder(),g=r.i32_const(t.alloc(a));s.addCode(r.setLocal("ita",r.getLocal("pA")),r.setLocal("itb",r.getLocal("pB")),r.setLocal("last",r.i32_add(r.getLocal("pA"),r.i32_mul(r.getLocal("nOut"),r.i32_const(a)))),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("ita"),r.getLocal("last"))),r.call(n+"_zero",r.getLocal("ita")),r.call(n+"_zero",r.getLocal("itb")),r.setLocal("ita",r.i32_add(r.getLocal("ita"),r.i32_const(a))),r.setLocal("itb",r.i32_add(r.getLocal("itb"),r.i32_const(a))),r.br(0))),r.setLocal("it",r.getLocal("pCoefs")),r.setLocal("last",r.i32_add(r.getLocal("pCoefs"),r.i32_mul(r.getLocal("nCoefs"),r.i32_const(a+12)))),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("it"),r.getLocal("last"))),r.setLocal("s",r.i32_load(r.getLocal("it"),8)),r.if(r.i32_or(r.i32_lt_u(r.getLocal("s"),r.getLocal("offsetWitness")),r.i32_ge_u(r.getLocal("s"),r.i32_add(r.getLocal("offsetWitness"),r.getLocal("nWitness")))),[...r.setLocal("it",r.i32_add(r.getLocal("it"),r.i32_const(a+12))),...r.br(1)]),r.setLocal("m",r.i32_load(r.getLocal("it"))),r.if(r.i32_eq(r.getLocal("m"),r.i32_const(0)),r.setLocal("pOut",r.getLocal("pA")),r.if(r.i32_eq(r.getLocal("m"),r.i32_const(1)),r.setLocal("pOut",r.getLocal("pB")),[...r.setLocal("it",r.i32_add(r.getLocal("it"),r.i32_const(a+12))),...r.br(1)])),r.setLocal("c",r.i32_load(r.getLocal("it"),4)),r.if(r.i32_or(r.i32_lt_u(r.getLocal("c"),r.getLocal("offsetOut")),r.i32_ge_u(r.getLocal("c"),r.i32_add(r.getLocal("offsetOut"),r.getLocal("nOut")))),[...r.setLocal("it",r.i32_add(r.getLocal("it"),r.i32_const(a+12))),...r.br(1)]),r.setLocal("pOut",r.i32_add(r.getLocal("pOut"),r.i32_mul(r.i32_sub(r.getLocal("c"),r.getLocal("offsetOut")),r.i32_const(a)))),r.call(n+"_mul",r.i32_add(r.getLocal("pWitness"),r.i32_mul(r.i32_sub(r.getLocal("s"),r.getLocal("offsetWitness")),r.i32_const(a))),r.i32_add(r.getLocal("it"),r.i32_const(12)),g),r.call(n+"_add",r.getLocal("pOut"),g,r.getLocal("pOut")),r.setLocal("it",r.i32_add(r.getLocal("it"),r.i32_const(a+12))),r.br(0))),r.setLocal("ita",r.getLocal("pA")),r.setLocal("itb",r.getLocal("pB")),r.setLocal("it",r.getLocal("pC")),r.setLocal("last",r.i32_add(r.getLocal("pA"),r.i32_mul(r.getLocal("nOut"),r.i32_const(a)))),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("ita"),r.getLocal("last"))),r.call(n+"_mul",r.getLocal("ita"),r.getLocal("itb"),r.getLocal("it")),r.setLocal("ita",r.i32_add(r.getLocal("ita"),r.i32_const(a))),r.setLocal("itb",r.i32_add(r.getLocal("itb"),r.i32_const(a))),r.setLocal("it",r.i32_add(r.getLocal("it"),r.i32_const(a))),r.br(0))))}function l(){const s=t.addFunction(e+"_joinABC");s.addParam("pA","i32"),s.addParam("pB","i32"),s.addParam("pC","i32"),s.addParam("n","i32"),s.addParam("pP","i32"),s.addLocal("ita","i32"),s.addLocal("itb","i32"),s.addLocal("itc","i32"),s.addLocal("itp","i32"),s.addLocal("last","i32");const r=s.getCodeBuilder(),g=r.i32_const(t.alloc(a));s.addCode(r.setLocal("ita",r.getLocal("pA")),r.setLocal("itb",r.getLocal("pB")),r.setLocal("itc",r.getLocal("pC")),r.setLocal("itp",r.getLocal("pP")),r.setLocal("last",r.i32_add(r.getLocal("pA"),r.i32_mul(r.getLocal("n"),r.i32_const(a)))),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("ita"),r.getLocal("last"))),r.call(n+"_mul",r.getLocal("ita"),r.getLocal("itb"),g),r.call(n+"_sub",g,r.getLocal("itc"),r.getLocal("itp")),r.setLocal("ita",r.i32_add(r.getLocal("ita"),r.i32_const(a))),r.setLocal("itb",r.i32_add(r.getLocal("itb"),r.i32_const(a))),r.setLocal("itc",r.i32_add(r.getLocal("itc"),r.i32_const(a))),r.setLocal("itp",r.i32_add(r.getLocal("itp"),r.i32_const(a))),r.br(0))))}function d(){const s=t.addFunction(e+"_batchAdd");s.addParam("pa","i32"),s.addParam("pb","i32"),s.addParam("n","i32"),s.addParam("pr","i32"),s.addLocal("ita","i32"),s.addLocal("itb","i32"),s.addLocal("itr","i32"),s.addLocal("last","i32");const r=s.getCodeBuilder();s.addCode(r.setLocal("ita",r.getLocal("pa")),r.setLocal("itb",r.getLocal("pb")),r.setLocal("itr",r.getLocal("pr")),r.setLocal("last",r.i32_add(r.getLocal("pa"),r.i32_mul(r.getLocal("n"),r.i32_const(a)))),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("ita"),r.getLocal("last"))),r.call(n+"_add",r.getLocal("ita"),r.getLocal("itb"),r.getLocal("itr")),r.setLocal("ita",r.i32_add(r.getLocal("ita"),r.i32_const(a))),r.setLocal("itb",r.i32_add(r.getLocal("itb"),r.i32_const(a))),r.setLocal("itr",r.i32_add(r.getLocal("itr"),r.i32_const(a))),r.br(0))))}return c(),l(),d(),t.exportFunction(e+"_buildABC"),t.exportFunction(e+"_joinABC"),t.exportFunction(e+"_batchAdd"),e},Zc=function(t,e,n,o,a,c,l,d){const s=t.addFunction(e);s.addParam("pIn","i32"),s.addParam("n","i32"),s.addParam("pFirst","i32"),s.addParam("pInc","i32"),s.addParam("pOut","i32"),s.addLocal("pOldFree","i32"),s.addLocal("i","i32"),s.addLocal("pFrom","i32"),s.addLocal("pTo","i32");const r=s.getCodeBuilder(),g=r.i32_const(t.alloc(l));s.addCode(r.setLocal("pFrom",r.getLocal("pIn")),r.setLocal("pTo",r.getLocal("pOut"))),s.addCode(r.call(o+"_copy",r.getLocal("pFirst"),g)),s.addCode(r.setLocal("i",r.i32_const(0)),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("i"),r.getLocal("n"))),r.call(d,r.getLocal("pFrom"),g,r.getLocal("pTo")),r.setLocal("pFrom",r.i32_add(r.getLocal("pFrom"),r.i32_const(a))),r.setLocal("pTo",r.i32_add(r.getLocal("pTo"),r.i32_const(c))),r.call(o+"_mul",g,r.getLocal("pInc"),g),r.setLocal("i",r.i32_add(r.getLocal("i"),r.i32_const(1))),r.br(0)))),t.exportFunction(e)};const tt=Qe.exports,Tt=Me,Ap=Sa,Sp=jc,Wr=Uc,xp=$c,Zr=Vc,no=Qc,Op=Gc,Ip=Wc,xn=Zc;var Bp=function(t,e){const n=e||"bn128";if(t.modules[n])return n;const o=tt("21888242871839275222246405745257275088696311157297823662689037894645226208583"),a=tt("21888242871839275222246405745257275088548364400416034343698204186575808495617"),c=Math.floor((o.minus(1).bitLength()-1)/64)+1,l=c*8,d=l,s=l,r=s*2,g=s*12,L=t.alloc(Tt.bigInt2BytesLE(a,d)),m=Ap(t,o,"f1m");Sp(t,a,"fr","frm");const C=t.alloc(Tt.bigInt2BytesLE(q(tt(3)),s)),A=Zr(t,"g1m","f1m",C);no(t,"frm","frm","frm","frm_mul"),Op(t,"pol","frm"),Ip(t,"qap","frm");const w=Wr(t,"f1m_neg","f2m","f1m"),T=t.alloc([...Tt.bigInt2BytesLE(q(tt("19485874751759354771024239261021720505790618469301721065564631296452457478373")),s),...Tt.bigInt2BytesLE(q(tt("266929791119991161246907387137283842545076965332900288569378510910307636690")),s)]),F=Zr(t,"g2m","f2m",T);function R(W,_){const p=t.addFunction(W);p.addParam("pG","i32"),p.addParam("pFr","i32"),p.addParam("pr","i32");const D=p.getCodeBuilder(),j=D.i32_const(t.alloc(l));p.addCode(D.call("frm_fromMontgomery",D.getLocal("pFr"),j),D.call(_,D.getLocal("pG"),j,D.i32_const(l),D.getLocal("pr"))),t.exportFunction(W)}R("g1m_timesFr","g1m_timesScalar"),no(t,"g1m","g1m","frm","g1m_timesFr"),R("g2m_timesFr","g2m_timesScalar"),no(t,"g2m","g2m","frm","g2m_timesFr"),R("g1m_timesFrAffine","g1m_timesScalarAffine"),R("g2m_timesFrAffine","g2m_timesScalarAffine"),xn(t,"frm_batchApplyKey","fmr","frm",l,l,l,"frm_mul"),xn(t,"g1m_batchApplyKey","g1m","frm",l*3,l*3,l,"g1m_timesFr"),xn(t,"g1m_batchApplyKeyMixed","g1m","frm",l*2,l*3,l,"g1m_timesFrAffine"),xn(t,"g2m_batchApplyKey","g2m","frm",l*2*3,l*3*2,l,"g2m_timesFr"),xn(t,"g2m_batchApplyKeyMixed","g2m","frm",l*2*2,l*3*2,l,"g2m_timesFrAffine");function q(W){return tt(W).times(tt.one.shiftLeft(s*8)).mod(o)}const Z=[tt("1"),tt("2"),tt.one],E=t.alloc([...Tt.bigInt2BytesLE(q(Z[0]),s),...Tt.bigInt2BytesLE(q(Z[1]),s),...Tt.bigInt2BytesLE(q(Z[2]),s)]),f=[tt.zero,tt.one,tt.zero],y=t.alloc([...Tt.bigInt2BytesLE(q(f[0]),s),...Tt.bigInt2BytesLE(q(f[1]),s),...Tt.bigInt2BytesLE(q(f[2]),s)]),I=[[tt("10857046999023057135944570762232829481370756359578518086990519993285655852781"),tt("11559732032986387107991004021392285783925812861821192530917403151452391805634")],[tt("8495653923123431417604973247489272438418190587263600148770280649306958101930"),tt("4082367875863433681332203403145435568316851327593401208105741076214120093531")],[tt.one,tt.zero]],k=t.alloc([...Tt.bigInt2BytesLE(q(I[0][0]),s),...Tt.bigInt2BytesLE(q(I[0][1]),s),...Tt.bigInt2BytesLE(q(I[1][0]),s),...Tt.bigInt2BytesLE(q(I[1][1]),s),...Tt.bigInt2BytesLE(q(I[2][0]),s),...Tt.bigInt2BytesLE(q(I[2][1]),s)]),O=[[tt.zero,tt.zero],[tt.one,tt.zero],[tt.zero,tt.zero]],x=t.alloc([...Tt.bigInt2BytesLE(q(O[0][0]),s),...Tt.bigInt2BytesLE(q(O[0][1]),s),...Tt.bigInt2BytesLE(q(O[1][0]),s),...Tt.bigInt2BytesLE(q(O[1][1]),s),...Tt.bigInt2BytesLE(q(O[2][0]),s),...Tt.bigInt2BytesLE(q(O[2][1]),s)]),v=t.alloc([...Tt.bigInt2BytesLE(q(1),s),...Tt.bigInt2BytesLE(q(0),s),...Tt.bigInt2BytesLE(q(0),s),...Tt.bigInt2BytesLE(q(0),s),...Tt.bigInt2BytesLE(q(0),s),...Tt.bigInt2BytesLE(q(0),s),...Tt.bigInt2BytesLE(q(0),s),...Tt.bigInt2BytesLE(q(0),s),...Tt.bigInt2BytesLE(q(0),s),...Tt.bigInt2BytesLE(q(0),s),...Tt.bigInt2BytesLE(q(0),s),...Tt.bigInt2BytesLE(q(0),s)]),P=t.alloc([...Tt.bigInt2BytesLE(q(9),s),...Tt.bigInt2BytesLE(q(1),s)]),V=t.alloc([...Tt.bigInt2BytesLE(q(tt(2).modInv(o)),s),...Tt.bigInt2BytesLE(tt(0),s)]),at=P,et=t.alloc([...Tt.bigInt2BytesLE(q("19485874751759354771024239261021720505790618469301721065564631296452457478373"),s),...Tt.bigInt2BytesLE(q("266929791119991161246907387137283842545076965332900288569378510910307636690"),s)]);function U(){const W=t.addFunction(n+"_mulNR6");W.addParam("x","i32"),W.addParam("pr","i32");const _=W.getCodeBuilder();W.addCode(_.call(w+"_mul",_.i32_const(P),_.getLocal("x"),_.getLocal("pr")))}U();const ct=xp(t,n+"_mulNR6","f6m","f2m");function H(){const W=t.addFunction(n+"_mulNR12");W.addParam("x","i32"),W.addParam("pr","i32");const _=W.getCodeBuilder();W.addCode(_.call(w+"_mul",_.i32_const(P),_.i32_add(_.getLocal("x"),_.i32_const(l*4)),_.getLocal("pr")),_.call(w+"_copy",_.getLocal("x"),_.i32_add(_.getLocal("pr"),_.i32_const(l*2))),_.call(w+"_copy",_.i32_add(_.getLocal("x"),_.i32_const(l*2)),_.i32_add(_.getLocal("pr"),_.i32_const(l*4))))}H();const st=Wr(t,n+"_mulNR12","ftm",ct),Mt=tt("29793968203157093288"),vt=gt(Mt),Et=t.alloc(vt),B=3*r,u=vt.length-1,h=vt.reduce((W,_)=>W+(_!=0?1:0),0)+u+1,$=3*2*l,M=3*l*2+h*B;t.modules[n]={n64:c,pG1gen:E,pG1zero:y,pG1b:C,pG2gen:k,pG2zero:x,pG2b:T,pq:t.modules.f1m.pq,pr:L,pOneT:v,prePSize:$,preQSize:M,r:a.toString(),q:o.toString()};const b=tt("4965661367192848881");function K(W){let _=W;const p=[];for(;_.gt(tt.zero);){if(_.isOdd()){const D=2-_.mod(4).toJSNumber();p.push(D),_=_.minus(D)}else p.push(0);_=_.shiftRight(1)}return p}function gt(W){let _=W;const p=[];for(;_.gt(tt.zero);)_.isOdd()?p.push(1):p.push(0),_=_.shiftRight(1);return p}function dt(){const W=t.addFunction(n+"_prepareG1");W.addParam("pP","i32"),W.addParam("ppreP","i32");const _=W.getCodeBuilder();W.addCode(_.call(A+"_normalize",_.getLocal("pP"),_.getLocal("ppreP")))}function _t(){const W=t.addFunction(n+"_prepAddStep");W.addParam("pQ","i32"),W.addParam("pR","i32"),W.addParam("pCoef","i32");const _=W.getCodeBuilder(),p=_.getLocal("pQ"),D=_.i32_add(_.getLocal("pQ"),_.i32_const(r)),j=_.getLocal("pR"),N=_.i32_add(_.getLocal("pR"),_.i32_const(r)),Q=_.i32_add(_.getLocal("pR"),_.i32_const(2*r)),z=_.getLocal("pCoef"),Y=_.i32_add(_.getLocal("pCoef"),_.i32_const(r)),nt=_.i32_add(_.getLocal("pCoef"),_.i32_const(2*r)),it=Y,X=_.i32_const(t.alloc(r)),rt=_.i32_const(t.alloc(r)),bt=_.i32_const(t.alloc(r)),mt=_.i32_const(t.alloc(r)),ut=_.i32_const(t.alloc(r)),At=_.i32_const(t.alloc(r)),Bt=_.i32_const(t.alloc(r));W.addCode(_.call(w+"_mul",p,Q,it),_.call(w+"_sub",j,it,it),_.call(w+"_mul",D,Q,X),_.call(w+"_sub",N,X,X),_.call(w+"_square",it,rt),_.call(w+"_square",X,bt),_.call(w+"_mul",it,rt,mt),_.call(w+"_mul",j,rt,ut),_.call(w+"_add",ut,ut,Bt),_.call(w+"_mul",Q,bt,At),_.call(w+"_add",mt,At,At),_.call(w+"_sub",At,Bt,At),_.call(w+"_mul",it,At,j),_.call(w+"_mul",mt,N,N),_.call(w+"_sub",ut,At,Bt),_.call(w+"_mul",X,Bt,Bt),_.call(w+"_sub",Bt,N,N),_.call(w+"_mul",Q,mt,Q),_.call(w+"_mul",it,D,Bt),_.call(w+"_mul",X,p,z),_.call(w+"_sub",z,Bt,z),_.call(w+"_mul",z,_.i32_const(at),z),_.call(w+"_neg",X,nt))}function Ot(){const W=t.addFunction(n+"_prepDblStep");W.addParam("pR","i32"),W.addParam("pCoef","i32");const _=W.getCodeBuilder(),p=_.getLocal("pR"),D=_.i32_add(_.getLocal("pR"),_.i32_const(r)),j=_.i32_add(_.getLocal("pR"),_.i32_const(2*r)),N=_.getLocal("pCoef"),Q=_.i32_add(_.getLocal("pCoef"),_.i32_const(r)),z=_.i32_add(_.getLocal("pCoef"),_.i32_const(2*r)),Y=_.i32_const(t.alloc(r)),nt=_.i32_const(t.alloc(r)),it=_.i32_const(t.alloc(r)),X=_.i32_const(t.alloc(r)),rt=_.i32_const(t.alloc(r)),bt=_.i32_const(t.alloc(r)),mt=_.i32_const(t.alloc(r)),ut=_.i32_const(t.alloc(r)),At=_.i32_const(t.alloc(r)),Bt=_.i32_const(t.alloc(r)),kt=_.i32_const(t.alloc(r)),It=_.i32_const(t.alloc(r));W.addCode(_.call(w+"_mul",D,_.i32_const(V),Y),_.call(w+"_mul",p,Y,Y),_.call(w+"_square",D,nt),_.call(w+"_square",j,it),_.call(w+"_add",it,it,X),_.call(w+"_add",X,it,X),_.call(w+"_mul",_.i32_const(et),X,rt),_.call(w+"_add",rt,rt,bt),_.call(w+"_add",rt,bt,bt),_.call(w+"_add",nt,bt,mt),_.call(w+"_mul",mt,_.i32_const(V),mt),_.call(w+"_add",nt,it,It),_.call(w+"_add",D,j,ut),_.call(w+"_square",ut,ut),_.call(w+"_sub",ut,It,ut),_.call(w+"_sub",rt,nt,At),_.call(w+"_square",p,Bt),_.call(w+"_square",rt,kt),_.call(w+"_sub",nt,bt,It),_.call(w+"_mul",Y,It,p),_.call(w+"_add",kt,kt,It),_.call(w+"_add",kt,It,It),_.call(w+"_square",mt,D),_.call(w+"_sub",D,It,D),_.call(w+"_mul",nt,ut,j),_.call(w+"_mul",_.i32_const(at),At,N),_.call(w+"_neg",ut,Q),_.call(w+"_add",Bt,Bt,z),_.call(w+"_add",Bt,z,z))}function pt(){const W=t.addFunction(n+"_mulByQ");W.addParam("p1","i32"),W.addParam("pr","i32");const _=W.getCodeBuilder(),p=_.getLocal("p1"),D=_.i32_add(_.getLocal("p1"),_.i32_const(r)),j=_.i32_add(_.getLocal("p1"),_.i32_const(r*2)),N=_.getLocal("pr"),Q=_.i32_add(_.getLocal("pr"),_.i32_const(r)),z=_.i32_add(_.getLocal("pr"),_.i32_const(r*2)),Y=_.i32_const(t.alloc([...Tt.bigInt2BytesLE(q("21575463638280843010398324269430826099269044274347216827212613867836435027261"),s),...Tt.bigInt2BytesLE(q("10307601595873709700152284273816112264069230130616436755625194854815875713954"),s)])),nt=_.i32_const(t.alloc([...Tt.bigInt2BytesLE(q("2821565182194536844548159561693502659359617185244120367078079554186484126554"),s),...Tt.bigInt2BytesLE(q("3505843767911556378687030309984248845540243509899259641013678093033130930403"),s)]));W.addCode(_.call(w+"_conjugate",p,N),_.call(w+"_mul",Y,N,N),_.call(w+"_conjugate",D,Q),_.call(w+"_mul",nt,Q,Q),_.call(w+"_conjugate",j,z))}function Ft(){pt();const W=t.addFunction(n+"_prepareG2");W.addParam("pQ","i32"),W.addParam("ppreQ","i32"),W.addLocal("pCoef","i32"),W.addLocal("i","i32");const _=W.getCodeBuilder(),p=_.getLocal("pQ");_.i32_add(_.getLocal("pQ"),_.i32_const(r)),_.i32_add(_.getLocal("pQ"),_.i32_const(r*2));const D=t.alloc(r*3),j=_.i32_const(D),N=_.i32_const(D),Q=_.i32_const(D+r),z=_.i32_const(D+2*r),Y=_.i32_add(_.getLocal("ppreQ"),_.i32_const(0)),nt=_.i32_add(_.getLocal("ppreQ"),_.i32_const(r));_.i32_add(_.getLocal("ppreQ"),_.i32_const(r*2));const it=t.alloc(r*3),X=_.i32_const(it),rt=t.alloc(r*3),bt=_.i32_const(rt);_.i32_const(rt);const mt=_.i32_const(rt+r);_.i32_const(rt+r*2),W.addCode(_.call(F+"_normalize",p,Y),_.call(w+"_copy",Y,N),_.call(w+"_copy",nt,Q),_.call(w+"_one",z)),W.addCode(_.setLocal("pCoef",_.i32_add(_.getLocal("ppreQ"),_.i32_const(r*3))),_.setLocal("i",_.i32_const(vt.length-2)),_.block(_.loop(_.call(n+"_prepDblStep",j,_.getLocal("pCoef")),_.setLocal("pCoef",_.i32_add(_.getLocal("pCoef"),_.i32_const(B))),_.if(_.i32_load8_s(_.getLocal("i"),Et),[..._.call(n+"_prepAddStep",Y,j,_.getLocal("pCoef")),..._.setLocal("pCoef",_.i32_add(_.getLocal("pCoef"),_.i32_const(B)))]),_.br_if(1,_.i32_eqz(_.getLocal("i"))),_.setLocal("i",_.i32_sub(_.getLocal("i"),_.i32_const(1))),_.br(0)))),W.addCode(_.call(n+"_mulByQ",Y,X),_.call(n+"_mulByQ",X,bt)),W.addCode(_.call(w+"_neg",mt,mt),_.call(n+"_prepAddStep",X,j,_.getLocal("pCoef")),_.setLocal("pCoef",_.i32_add(_.getLocal("pCoef"),_.i32_const(B))),_.call(n+"_prepAddStep",bt,j,_.getLocal("pCoef")),_.setLocal("pCoef",_.i32_add(_.getLocal("pCoef"),_.i32_const(B))))}function qt(){const W=t.addFunction(n+"__mulBy024Old");W.addParam("pEll0","i32"),W.addParam("pEllVW","i32"),W.addParam("pEllVV","i32"),W.addParam("pR","i32");const _=W.getCodeBuilder(),p=_.getLocal("pEll0"),D=_.getLocal("pEllVV"),j=_.getLocal("pEllVW"),N=_.getLocal("pR"),Q=t.alloc(g),z=_.i32_const(Q),Y=_.i32_const(Q),nt=_.i32_const(Q+r),it=_.i32_const(Q+r*2),X=_.i32_const(Q+r*3),rt=_.i32_const(Q+r*4),bt=_.i32_const(Q+r*5);W.addCode(_.call(w+"_copy",p,Y),_.call(w+"_zero",nt),_.call(w+"_copy",D,it),_.call(w+"_zero",X),_.call(w+"_copy",j,rt),_.call(w+"_zero",bt),_.call(st+"_mul",z,N,N))}function yt(){const W=t.addFunction(n+"__mulBy024");W.addParam("pEll0","i32"),W.addParam("pEllVW","i32"),W.addParam("pEllVV","i32"),W.addParam("pR","i32");const _=W.getCodeBuilder(),p=_.getLocal("pEll0"),D=_.getLocal("pEllVV"),j=_.getLocal("pEllVW"),N=_.getLocal("pR"),Q=_.i32_add(_.getLocal("pR"),_.i32_const(2*l)),z=_.i32_add(_.getLocal("pR"),_.i32_const(4*l)),Y=_.i32_add(_.getLocal("pR"),_.i32_const(6*l)),nt=_.i32_add(_.getLocal("pR"),_.i32_const(8*l)),it=_.i32_add(_.getLocal("pR"),_.i32_const(10*l)),X=_.i32_const(t.alloc(r)),rt=_.i32_const(t.alloc(r)),bt=_.i32_const(t.alloc(r)),mt=_.i32_const(t.alloc(r)),ut=_.i32_const(t.alloc(r)),At=_.i32_const(t.alloc(r)),Bt=_.i32_const(t.alloc(r)),kt=_.i32_const(t.alloc(r)),It=_.i32_const(t.alloc(r)),Pt=_.i32_const(t.alloc(r)),wt=_.i32_const(t.alloc(r));W.addCode(_.call(w+"_mul",N,p,Bt),_.call(w+"_mul",z,D,kt),_.call(w+"_mul",nt,j,It),_.call(w+"_add",N,nt,bt),_.call(w+"_add",N,z,rt),_.call(w+"_add",Q,Y,mt),_.call(w+"_add",mt,it,mt),_.call(w+"_mul",Q,D,Pt),_.call(w+"_add",Pt,It,ut),_.call(w+"_mul",_.i32_const(P),ut,At),_.call(w+"_add",At,Bt,N),_.call(w+"_mul",it,j,ut),_.call(w+"_add",Pt,ut,Pt),_.call(w+"_add",ut,kt,ut),_.call(w+"_mul",_.i32_const(P),ut,At),_.call(w+"_mul",Q,p,ut),_.call(w+"_add",Pt,ut,Pt),_.call(w+"_add",At,ut,Q),_.call(w+"_add",p,D,X),_.call(w+"_mul",rt,X,ut),_.call(w+"_add",Bt,kt,wt),_.call(w+"_sub",ut,wt,ut),_.call(w+"_mul",Y,j,At),_.call(w+"_add",Pt,At,Pt),_.call(w+"_add",z,nt,X),_.call(w+"_add",ut,At,z),_.call(w+"_add",D,j,rt),_.call(w+"_mul",rt,X,ut),_.call(w+"_add",kt,It,wt),_.call(w+"_sub",ut,wt,ut),_.call(w+"_mul",_.i32_const(P),ut,At),_.call(w+"_mul",Y,p,ut),_.call(w+"_add",Pt,ut,Pt),_.call(w+"_add",At,ut,Y),_.call(w+"_mul",it,D,ut),_.call(w+"_add",Pt,ut,Pt),_.call(w+"_mul",_.i32_const(P),ut,At),_.call(w+"_add",p,j,X),_.call(w+"_mul",bt,X,ut),_.call(w+"_add",Bt,It,wt),_.call(w+"_sub",ut,wt,ut),_.call(w+"_add",At,ut,nt),_.call(w+"_add",p,D,X),_.call(w+"_add",X,j,X),_.call(w+"_mul",mt,X,ut),_.call(w+"_sub",ut,Pt,it))}function ft(){const W=t.addFunction(n+"_millerLoop");W.addParam("ppreP","i32"),W.addParam("ppreQ","i32"),W.addParam("r","i32"),W.addLocal("pCoef","i32"),W.addLocal("i","i32");const _=W.getCodeBuilder(),p=_.getLocal("ppreP"),D=_.i32_add(_.getLocal("ppreP"),_.i32_const(s)),j=_.getLocal("pCoef"),N=_.i32_add(_.getLocal("pCoef"),_.i32_const(r)),Q=_.i32_add(_.getLocal("pCoef"),_.i32_const(2*r)),z=t.alloc(r),Y=_.i32_const(z),nt=t.alloc(r),it=_.i32_const(nt),X=_.getLocal("r");W.addCode(_.call(st+"_one",X),_.setLocal("pCoef",_.i32_add(_.getLocal("ppreQ"),_.i32_const(r*3))),_.setLocal("i",_.i32_const(vt.length-2)),_.block(_.loop(_.call(st+"_square",X,X),_.call(w+"_mul1",N,D,Y),_.call(w+"_mul1",Q,p,it),_.call(n+"__mulBy024",j,Y,it,X),_.setLocal("pCoef",_.i32_add(_.getLocal("pCoef"),_.i32_const(B))),_.if(_.i32_load8_s(_.getLocal("i"),Et),[..._.call(w+"_mul1",N,D,Y),..._.call(w+"_mul1",Q,p,it),..._.call(n+"__mulBy024",j,Y,it,X),..._.setLocal("pCoef",_.i32_add(_.getLocal("pCoef"),_.i32_const(B)))]),_.br_if(1,_.i32_eqz(_.getLocal("i"))),_.setLocal("i",_.i32_sub(_.getLocal("i"),_.i32_const(1))),_.br(0)))),W.addCode(_.call(w+"_mul1",N,D,Y),_.call(w+"_mul1",Q,p,it),_.call(n+"__mulBy024",j,Y,it,X),_.setLocal("pCoef",_.i32_add(_.getLocal("pCoef"),_.i32_const(B))),_.call(w+"_mul1",N,D,Y),_.call(w+"_mul1",Q,p,it),_.call(n+"__mulBy024",j,Y,it,X),_.setLocal("pCoef",_.i32_add(_.getLocal("pCoef"),_.i32_const(B))))}function xt(W){const _=[[[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")]],[[tt("1"),tt("0")],[tt("8376118865763821496583973867626364092589906065868298776909617916018768340080"),tt("16469823323077808223889137241176536799009286646108169935659301613961712198316")],[tt("21888242871839275220042445260109153167277707414472061641714758635765020556617"),tt("0")],[tt("11697423496358154304825782922584725312912383441159505038794027105778954184319"),tt("303847389135065887422783454877609941456349188919719272345083954437860409601")],[tt("21888242871839275220042445260109153167277707414472061641714758635765020556616"),tt("0")],[tt("3321304630594332808241809054958361220322477375291206261884409189760185844239"),tt("5722266937896532885780051958958348231143373700109372999374820235121374419868")],[tt("21888242871839275222246405745257275088696311157297823662689037894645226208582"),tt("0")],[tt("13512124006075453725662431877630910996106405091429524885779419978626457868503"),tt("5418419548761466998357268504080738289687024511189653727029736280683514010267")],[tt("2203960485148121921418603742825762020974279258880205651966"),tt("0")],[tt("10190819375481120917420622822672549775783927716138318623895010788866272024264"),tt("21584395482704209334823622290379665147239961968378104390343953940207365798982")],[tt("2203960485148121921418603742825762020974279258880205651967"),tt("0")],[tt("18566938241244942414004596690298913868373833782006617400804628704885040364344"),tt("16165975933942742336466353786298926857552937457188450663314217659523851788715")]]],p=[[[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")],[tt("1"),tt("0")]],[[tt("1"),tt("0")],[tt("21575463638280843010398324269430826099269044274347216827212613867836435027261"),tt("10307601595873709700152284273816112264069230130616436755625194854815875713954")],[tt("21888242871839275220042445260109153167277707414472061641714758635765020556616"),tt("0")],[tt("3772000881919853776433695186713858239009073593817195771773381919316419345261"),tt("2236595495967245188281701248203181795121068902605861227855261137820944008926")],[tt("2203960485148121921418603742825762020974279258880205651966"),tt("0")],[tt("18429021223477853657660792034369865839114504446431234726392080002137598044644"),tt("9344045779998320333812420223237981029506012124075525679208581902008406485703")]],[[tt("1"),tt("0")],[tt("2581911344467009335267311115468803099551665605076196740867805258568234346338"),tt("19937756971775647987995932169929341994314640652964949448313374472400716661030")],[tt("2203960485148121921418603742825762020974279258880205651966"),tt("0")],[tt("5324479202449903542726783395506214481928257762400643279780343368557297135718"),tt("16208900380737693084919495127334387981393726419856888799917914180988844123039")],[tt("21888242871839275220042445260109153167277707414472061641714758635765020556616"),tt("0")],[tt("13981852324922362344252311234282257507216387789820983642040889267519694726527"),tt("7629828391165209371577384193250820201684255241773809077146787135900891633097")]]],D=t.addFunction(n+"__frobeniusMap"+W);D.addParam("x","i32"),D.addParam("r","i32");const j=D.getCodeBuilder();for(let Q=0;Q<6;Q++){const z=Q==0?j.getLocal("x"):j.i32_add(j.getLocal("x"),j.i32_const(Q*r)),Y=z,nt=j.i32_add(j.getLocal("x"),j.i32_const(Q*r+s)),it=Q==0?j.getLocal("r"):j.i32_add(j.getLocal("r"),j.i32_const(Q*r)),X=it,rt=j.i32_add(j.getLocal("r"),j.i32_const(Q*r+s)),bt=N(_[Math.floor(Q/3)][W%12],p[Q%3][W%6]),mt=t.alloc([...Tt.bigInt2BytesLE(q(bt[0]),32),...Tt.bigInt2BytesLE(q(bt[1]),32)]);W%2==1?D.addCode(j.call(m+"_copy",Y,X),j.call(m+"_neg",nt,rt),j.call(w+"_mul",it,j.i32_const(mt),it)):D.addCode(j.call(w+"_mul",z,j.i32_const(mt),it))}function N(Q,z){const Y=tt(Q[0]),nt=tt(Q[1]),it=tt(z[0]),X=tt(z[1]),rt=[Y.times(it).minus(nt.times(X)).mod(o),Y.times(X).add(nt.times(it)).mod(o)];return rt[0].isNegative()&&(rt[0]=rt[0].add(o)),rt}}function Rt(){const W=t.addFunction(n+"__finalExponentiationFirstChunk");W.addParam("x","i32"),W.addParam("r","i32");const _=W.getCodeBuilder(),p=_.getLocal("x"),D=p,j=_.i32_add(p,_.i32_const(l*6)),N=_.getLocal("r"),Q=t.alloc(g),z=_.i32_const(Q),Y=z,nt=_.i32_const(Q+l*6),it=_.i32_const(t.alloc(g)),X=_.i32_const(t.alloc(g)),rt=_.i32_const(t.alloc(g));W.addCode(_.call(ct+"_copy",D,Y),_.call(ct+"_neg",j,nt),_.call(st+"_inverse",p,it),_.call(st+"_mul",z,it,X),_.call(n+"__frobeniusMap2",X,rt),_.call(st+"_mul",X,rt,N))}function Ht(){const W=t.addFunction(n+"__cyclotomicSquare");W.addParam("x","i32"),W.addParam("r","i32");const _=W.getCodeBuilder(),p=_.getLocal("x"),D=_.i32_add(_.getLocal("x"),_.i32_const(r)),j=_.i32_add(_.getLocal("x"),_.i32_const(2*r)),N=_.i32_add(_.getLocal("x"),_.i32_const(3*r)),Q=_.i32_add(_.getLocal("x"),_.i32_const(4*r)),z=_.i32_add(_.getLocal("x"),_.i32_const(5*r)),Y=_.getLocal("r"),nt=_.i32_add(_.getLocal("r"),_.i32_const(r)),it=_.i32_add(_.getLocal("r"),_.i32_const(2*r)),X=_.i32_add(_.getLocal("r"),_.i32_const(3*r)),rt=_.i32_add(_.getLocal("r"),_.i32_const(4*r)),bt=_.i32_add(_.getLocal("r"),_.i32_const(5*r)),mt=_.i32_const(t.alloc(r)),ut=_.i32_const(t.alloc(r)),At=_.i32_const(t.alloc(r)),Bt=_.i32_const(t.alloc(r)),kt=_.i32_const(t.alloc(r)),It=_.i32_const(t.alloc(r)),Pt=_.i32_const(t.alloc(r)),wt=_.i32_const(t.alloc(r));W.addCode(_.call(w+"_mul",p,Q,Pt),_.call(w+"_mul",Q,_.i32_const(P),mt),_.call(w+"_add",p,mt,mt),_.call(w+"_add",p,Q,wt),_.call(w+"_mul",wt,mt,mt),_.call(w+"_mul",_.i32_const(P),Pt,wt),_.call(w+"_add",Pt,wt,wt),_.call(w+"_sub",mt,wt,mt),_.call(w+"_add",Pt,Pt,ut),_.call(w+"_mul",N,j,Pt),_.call(w+"_mul",j,_.i32_const(P),At),_.call(w+"_add",N,At,At),_.call(w+"_add",N,j,wt),_.call(w+"_mul",wt,At,At),_.call(w+"_mul",_.i32_const(P),Pt,wt),_.call(w+"_add",Pt,wt,wt),_.call(w+"_sub",At,wt,At),_.call(w+"_add",Pt,Pt,Bt),_.call(w+"_mul",D,z,Pt),_.call(w+"_mul",z,_.i32_const(P),kt),_.call(w+"_add",D,kt,kt),_.call(w+"_add",D,z,wt),_.call(w+"_mul",wt,kt,kt),_.call(w+"_mul",_.i32_const(P),Pt,wt),_.call(w+"_add",Pt,wt,wt),_.call(w+"_sub",kt,wt,kt),_.call(w+"_add",Pt,Pt,It),_.call(w+"_sub",mt,p,Y),_.call(w+"_add",Y,Y,Y),_.call(w+"_add",mt,Y,Y),_.call(w+"_add",ut,Q,rt),_.call(w+"_add",rt,rt,rt),_.call(w+"_add",ut,rt,rt),_.call(w+"_mul",It,_.i32_const(at),wt),_.call(w+"_add",wt,N,X),_.call(w+"_add",X,X,X),_.call(w+"_add",wt,X,X),_.call(w+"_sub",kt,j,it),_.call(w+"_add",it,it,it),_.call(w+"_add",kt,it,it),_.call(w+"_sub",At,D,nt),_.call(w+"_add",nt,nt,nt),_.call(w+"_add",At,nt,nt),_.call(w+"_add",Bt,z,bt),_.call(w+"_add",bt,bt,bt),_.call(w+"_add",Bt,bt,bt))}function Fe(W,_){const p=K(W).map(nt=>nt==-1?255:nt),D=t.alloc(p);t.alloc(Tt.bigInt2BytesLE(W,32));const j=t.addFunction(n+"__cyclotomicExp_"+_);j.addParam("x","i32"),j.addParam("r","i32"),j.addLocal("bit","i32"),j.addLocal("i","i32");const N=j.getCodeBuilder(),Q=N.getLocal("x"),z=N.getLocal("r"),Y=N.i32_const(t.alloc(g));j.addCode(N.call(st+"_conjugate",Q,Y),N.call(st+"_one",z),N.if(N.teeLocal("bit",N.i32_load8_s(N.i32_const(p.length-1),D)),N.if(N.i32_eq(N.getLocal("bit"),N.i32_const(1)),N.call(st+"_mul",z,Q,z),N.call(st+"_mul",z,Y,z))),N.setLocal("i",N.i32_const(p.length-2)),N.block(N.loop(N.call(n+"__cyclotomicSquare",z,z),N.if(N.teeLocal("bit",N.i32_load8_s(N.getLocal("i"),D)),N.if(N.i32_eq(N.getLocal("bit"),N.i32_const(1)),N.call(st+"_mul",z,Q,z),N.call(st+"_mul",z,Y,z))),N.br_if(1,N.i32_eqz(N.getLocal("i"))),N.setLocal("i",N.i32_sub(N.getLocal("i"),N.i32_const(1))),N.br(0))))}function de(){Ht(),Fe(b,"w0");const W=t.addFunction(n+"__finalExponentiationLastChunk");W.addParam("x","i32"),W.addParam("r","i32");const _=W.getCodeBuilder(),p=_.getLocal("x"),D=_.getLocal("r"),j=_.i32_const(t.alloc(g)),N=_.i32_const(t.alloc(g)),Q=_.i32_const(t.alloc(g)),z=_.i32_const(t.alloc(g)),Y=_.i32_const(t.alloc(g)),nt=_.i32_const(t.alloc(g)),it=_.i32_const(t.alloc(g)),X=_.i32_const(t.alloc(g)),rt=_.i32_const(t.alloc(g)),bt=_.i32_const(t.alloc(g)),mt=_.i32_const(t.alloc(g)),ut=_.i32_const(t.alloc(g)),At=_.i32_const(t.alloc(g)),Bt=_.i32_const(t.alloc(g)),kt=_.i32_const(t.alloc(g)),It=_.i32_const(t.alloc(g)),Pt=_.i32_const(t.alloc(g)),wt=_.i32_const(t.alloc(g)),Ut=_.i32_const(t.alloc(g)),ye=_.i32_const(t.alloc(g)),ke=_.i32_const(t.alloc(g));W.addCode(_.call(n+"__cyclotomicExp_w0",p,j),_.call(st+"_conjugate",j,j),_.call(n+"__cyclotomicSquare",j,N),_.call(n+"__cyclotomicSquare",N,Q),_.call(st+"_mul",Q,N,z),_.call(n+"__cyclotomicExp_w0",z,Y),_.call(st+"_conjugate",Y,Y),_.call(n+"__cyclotomicSquare",Y,nt),_.call(n+"__cyclotomicExp_w0",nt,it),_.call(st+"_conjugate",it,it),_.call(st+"_conjugate",z,X),_.call(st+"_conjugate",it,rt),_.call(st+"_mul",rt,Y,bt),_.call(st+"_mul",bt,X,mt),_.call(st+"_mul",mt,N,ut),_.call(st+"_mul",mt,Y,At),_.call(st+"_mul",At,p,Bt),_.call(n+"__frobeniusMap1",ut,kt),_.call(st+"_mul",kt,Bt,It),_.call(n+"__frobeniusMap2",mt,Pt),_.call(st+"_mul",Pt,It,wt),_.call(st+"_conjugate",p,Ut),_.call(st+"_mul",Ut,ut,ye),_.call(n+"__frobeniusMap3",ye,ke),_.call(st+"_mul",ke,wt,D))}function Ce(){Rt(),de();const W=t.addFunction(n+"_finalExponentiation");W.addParam("x","i32"),W.addParam("r","i32");const _=W.getCodeBuilder(),p=_.getLocal("x"),D=_.getLocal("r"),j=_.i32_const(t.alloc(g));W.addCode(_.call(n+"__finalExponentiationFirstChunk",p,j),_.call(n+"__finalExponentiationLastChunk",j,D))}function oe(){const W=t.addFunction(n+"_finalExponentiationOld");W.addParam("x","i32"),W.addParam("r","i32");const _=tt("552484233613224096312617126783173147097382103762957654188882734314196910839907541213974502761540629817009608548654680343627701153829446747810907373256841551006201639677726139946029199968412598804882391702273019083653272047566316584365559776493027495458238373902875937659943504873220554161550525926302303331747463515644711876653177129578303191095900909191624817826566688241804408081892785725967931714097716709526092261278071952560171111444072049229123565057483750161460024353346284167282452756217662335528813519139808291170539072125381230815729071544861602750936964829313608137325426383735122175229541155376346436093930287402089517426973178917569713384748081827255472576937471496195752727188261435633271238710131736096299798168852925540549342330775279877006784354801422249722573783561685179618816480037695005515426162362431072245638324744480"),p=t.alloc(Tt.bigInt2BytesLE(_,352)),D=W.getCodeBuilder();W.addCode(D.call(st+"_exp",D.getLocal("x"),D.i32_const(p),D.i32_const(352),D.getLocal("r")))}const fe=t.alloc($),me=t.alloc(M);function nn(W){const _=t.addFunction(n+"_pairingEq"+W);for(let N=0;N<W;N++)_.addParam("p_"+N,"i32"),_.addParam("q_"+N,"i32");_.addParam("c","i32"),_.setReturnType("i32");const p=_.getCodeBuilder(),D=p.i32_const(t.alloc(g)),j=p.i32_const(t.alloc(g));_.addCode(p.call(st+"_one",D));for(let N=0;N<W;N++)_.addCode(p.call(n+"_prepareG1",p.getLocal("p_"+N),p.i32_const(fe))),_.addCode(p.call(n+"_prepareG2",p.getLocal("q_"+N),p.i32_const(me))),_.addCode(p.call(n+"_millerLoop",p.i32_const(fe),p.i32_const(me),j)),_.addCode(p.call(st+"_mul",D,j,D));_.addCode(p.call(n+"_finalExponentiation",D,D)),_.addCode(p.call(st+"_eq",D,p.getLocal("c")))}function Ie(){const W=t.addFunction(n+"_pairing");W.addParam("p","i32"),W.addParam("q","i32"),W.addParam("r","i32");const _=W.getCodeBuilder(),p=_.i32_const(t.alloc(g));W.addCode(_.call(n+"_prepareG1",_.getLocal("p"),_.i32_const(fe))),W.addCode(_.call(n+"_prepareG2",_.getLocal("q"),_.i32_const(me))),W.addCode(_.call(n+"_millerLoop",_.i32_const(fe),_.i32_const(me),p)),W.addCode(_.call(n+"_finalExponentiation",p,_.getLocal("r")))}_t(),Ot(),dt(),Ft(),yt(),qt(),ft();for(let W=0;W<10;W++)xt(W),t.exportFunction(n+"__frobeniusMap"+W);oe(),Ce();for(let W=1;W<=5;W++)nn(W),t.exportFunction(n+"_pairingEq"+W);Ie(),t.exportFunction(n+"_pairing"),t.exportFunction(n+"_prepareG1"),t.exportFunction(n+"_prepareG2"),t.exportFunction(n+"_millerLoop"),t.exportFunction(n+"_finalExponentiation"),t.exportFunction(n+"_finalExponentiationOld"),t.exportFunction(n+"__mulBy024"),t.exportFunction(n+"__mulBy024Old"),t.exportFunction(n+"__cyclotomicSquare"),t.exportFunction(n+"__cyclotomicExp_w0")};const J=Qe.exports,Ct=Me,Pp=Sa,Tp=jc,Jr=Uc,Mp=$c,Hr=Vc,io=Qc,qp=Gc,kp=Wc,On=Zc;var Rp=function(t,e){const n=e||"bls12381";if(t.modules[n])return n;const o=J("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),a=J("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),c=Math.floor((o.minus(1).bitLength()-1)/64)+1,l=c*8,d=l,s=d*2,r=d*12,g=Math.floor((a.minus(1).bitLength()-1)/64)+1,L=g*8,m=L,C=t.alloc(Ct.bigInt2BytesLE(a,m)),A=Pp(t,o,"f1m","intq");Tp(t,a,"fr","frm","intr");const w=t.alloc(Ct.bigInt2BytesLE(E(J(4)),d)),T=Hr(t,"g1m","f1m",w);io(t,"frm","frm","frm","frm_mul"),qp(t,"pol","frm"),kp(t,"qap","frm");const F=Jr(t,"f1m_neg","f2m","f1m"),R=t.alloc([...Ct.bigInt2BytesLE(E(J("4")),d),...Ct.bigInt2BytesLE(E(J("4")),d)]),q=Hr(t,"g2m","f2m",R);function Z(_,p){const D=t.addFunction(_);D.addParam("pG","i32"),D.addParam("pFr","i32"),D.addParam("pr","i32");const j=D.getCodeBuilder(),N=j.i32_const(t.alloc(L));D.addCode(j.call("frm_fromMontgomery",j.getLocal("pFr"),N),j.call(p,j.getLocal("pG"),N,j.i32_const(L),j.getLocal("pr"))),t.exportFunction(_)}Z("g1m_timesFr","g1m_timesScalar"),io(t,"g1m","g1m","frm","g1m_timesFr"),Z("g2m_timesFr","g2m_timesScalar"),io(t,"g2m","g2m","frm","g2m_timesFr"),Z("g1m_timesFrAffine","g1m_timesScalarAffine"),Z("g2m_timesFrAffine","g2m_timesScalarAffine"),On(t,"frm_batchApplyKey","fmr","frm",L,L,L,"frm_mul"),On(t,"g1m_batchApplyKey","g1m","frm",l*3,l*3,L,"g1m_timesFr"),On(t,"g1m_batchApplyKeyMixed","g1m","frm",l*2,l*3,L,"g1m_timesFrAffine"),On(t,"g2m_batchApplyKey","g2m","frm",l*2*3,l*3*2,L,"g2m_timesFr"),On(t,"g2m_batchApplyKeyMixed","g2m","frm",l*2*2,l*3*2,L,"g2m_timesFrAffine");function E(_){return J(_).times(J.one.shiftLeft(d*8)).mod(o)}const f=[J("3685416753713387016781088315183077757961620795782546409894578378688607592378376318836054947676345821548104185464507"),J("1339506544944476473020471379941921221584933875938349620426543736416511423956333506472724655353366534992391756441569"),J.one],y=t.alloc([...Ct.bigInt2BytesLE(E(f[0]),d),...Ct.bigInt2BytesLE(E(f[1]),d),...Ct.bigInt2BytesLE(E(f[2]),d)]),I=[J.zero,J.one,J.zero],k=t.alloc([...Ct.bigInt2BytesLE(E(I[0]),d),...Ct.bigInt2BytesLE(E(I[1]),d),...Ct.bigInt2BytesLE(E(I[2]),d)]),O=[[J("352701069587466618187139116011060144890029952792775240219908644239793785735715026873347600343865175952761926303160"),J("3059144344244213709971259814753781636986470325476647558659373206291635324768958432433509563104347017837885763365758")],[J("1985150602287291935568054521177171638300868978215655730859378665066344726373823718423869104263333984641494340347905"),J("927553665492332455747201965776037880757740193453592970025027978793976877002675564980949289727957565575433344219582")],[J.one,J.zero]],x=t.alloc([...Ct.bigInt2BytesLE(E(O[0][0]),d),...Ct.bigInt2BytesLE(E(O[0][1]),d),...Ct.bigInt2BytesLE(E(O[1][0]),d),...Ct.bigInt2BytesLE(E(O[1][1]),d),...Ct.bigInt2BytesLE(E(O[2][0]),d),...Ct.bigInt2BytesLE(E(O[2][1]),d)]),v=[[J.zero,J.zero],[J.one,J.zero],[J.zero,J.zero]],P=t.alloc([...Ct.bigInt2BytesLE(E(v[0][0]),d),...Ct.bigInt2BytesLE(E(v[0][1]),d),...Ct.bigInt2BytesLE(E(v[1][0]),d),...Ct.bigInt2BytesLE(E(v[1][1]),d),...Ct.bigInt2BytesLE(E(v[2][0]),d),...Ct.bigInt2BytesLE(E(v[2][1]),d)]),V=t.alloc([...Ct.bigInt2BytesLE(E(1),d),...Ct.bigInt2BytesLE(E(0),d),...Ct.bigInt2BytesLE(E(0),d),...Ct.bigInt2BytesLE(E(0),d),...Ct.bigInt2BytesLE(E(0),d),...Ct.bigInt2BytesLE(E(0),d),...Ct.bigInt2BytesLE(E(0),d),...Ct.bigInt2BytesLE(E(0),d),...Ct.bigInt2BytesLE(E(0),d),...Ct.bigInt2BytesLE(E(0),d),...Ct.bigInt2BytesLE(E(0),d),...Ct.bigInt2BytesLE(E(0),d)]);t.alloc([...Ct.bigInt2BytesLE(E(J(2).modInv(o)),d),...Ct.bigInt2BytesLE(J(0),d)]);const at=t.alloc([...Ct.bigInt2BytesLE(E(1),d),...Ct.bigInt2BytesLE(E(1),d)]);t.alloc([...Ct.bigInt2BytesLE(E("4"),d),...Ct.bigInt2BytesLE(E("4"),d)]);function et(){const _=t.addFunction(F+"_mulNR");_.addParam("x","i32"),_.addParam("pr","i32");const p=_.getCodeBuilder(),D=p.i32_const(t.alloc(d)),j=p.getLocal("x"),N=p.i32_add(p.getLocal("x"),p.i32_const(d)),Q=p.getLocal("pr"),z=p.i32_add(p.getLocal("pr"),p.i32_const(d));_.addCode(p.call(A+"_copy",j,D),p.call(A+"_sub",j,N,Q),p.call(A+"_add",D,N,z))}et();const U=Mp(t,F+"_mulNR","f6m","f2m");function ct(){const _=t.addFunction(U+"_mulNR");_.addParam("x","i32"),_.addParam("pr","i32");const p=_.getCodeBuilder(),D=p.i32_const(t.alloc(d*2));_.addCode(p.call(F+"_copy",p.getLocal("x"),D),p.call(F+"_mulNR",p.i32_add(p.getLocal("x"),p.i32_const(l*4)),p.getLocal("pr")),p.call(F+"_copy",p.i32_add(p.getLocal("x"),p.i32_const(l*2)),p.i32_add(p.getLocal("pr"),p.i32_const(l*4))),p.call(F+"_copy",D,p.i32_add(p.getLocal("pr"),p.i32_const(l*2))))}ct();const H=Jr(t,U+"_mulNR","ftm",U),st=J("d201000000010000",16),Mt=gt(st),vt=t.alloc(Mt),Et=3*s,B=Mt.length-1,S=Mt.reduce((_,p)=>_+(p!=0?1:0),0)+B+1,h=3*2*l,$=3*l*2+S*Et,M=!0,b=J("15132376222941642752");t.modules[n]={n64q:c,n64r:g,n8q:l,n8r:L,pG1gen:y,pG1zero:k,pG1b:w,pG2gen:x,pG2zero:P,pG2b:R,pq:t.modules.f1m.pq,pr:C,pOneT:V,r:a,q:o,prePSize:h,preQSize:$};function K(_){let p=_;const D=[];for(;p.gt(J.zero);){if(p.isOdd()){const j=2-p.mod(4).toJSNumber();D.push(j),p=p.minus(j)}else D.push(0);p=p.shiftRight(1)}return D}function gt(_){let p=_;const D=[];for(;p.gt(J.zero);)p.isOdd()?D.push(1):D.push(0),p=p.shiftRight(1);return D}function dt(){const _=t.addFunction(n+"_prepareG1");_.addParam("pP","i32"),_.addParam("ppreP","i32");const p=_.getCodeBuilder();_.addCode(p.call(T+"_normalize",p.getLocal("pP"),p.getLocal("ppreP")))}function _t(){const _=t.addFunction(n+"_prepDblStep");_.addParam("R","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),D=p.getLocal("R"),j=p.i32_add(p.getLocal("R"),p.i32_const(2*l)),N=p.i32_add(p.getLocal("R"),p.i32_const(4*l)),Q=p.getLocal("r"),z=p.i32_add(p.getLocal("r"),p.i32_const(2*l)),Y=p.i32_add(p.getLocal("r"),p.i32_const(4*l)),nt=p.i32_const(t.alloc(s)),it=p.i32_const(t.alloc(s)),X=p.i32_const(t.alloc(s)),rt=p.i32_const(t.alloc(s)),bt=p.i32_const(t.alloc(s));_.addCode(p.call(F+"_square",D,Q),p.call(F+"_square",j,it),p.call(F+"_square",it,X),p.call(F+"_add",it,D,z),p.call(F+"_square",z,z),p.call(F+"_sub",z,Q,z),p.call(F+"_sub",z,X,z),p.call(F+"_add",z,z,z),p.call(F+"_add",Q,Q,rt),p.call(F+"_add",rt,Q,rt),p.call(F+"_add",D,rt,Y),p.call(F+"_square",rt,bt),p.call(F+"_square",N,nt),p.call(F+"_sub",bt,z,D),p.call(F+"_sub",D,z,D),p.call(F+"_add",N,j,N),p.call(F+"_square",N,N),p.call(F+"_sub",N,it,N),p.call(F+"_sub",N,nt,N),p.call(F+"_sub",z,D,j),p.call(F+"_mul",j,rt,j),p.call(F+"_add",X,X,X),p.call(F+"_add",X,X,X),p.call(F+"_add",X,X,X),p.call(F+"_sub",j,X,j),p.call(F+"_mul",rt,nt,z),p.call(F+"_add",z,z,z),p.call(F+"_neg",z,z),p.call(F+"_square",Y,Y),p.call(F+"_sub",Y,Q,Y),p.call(F+"_sub",Y,bt,Y),p.call(F+"_add",it,it,it),p.call(F+"_add",it,it,it),p.call(F+"_sub",Y,it,Y),p.call(F+"_mul",N,nt,Q),p.call(F+"_add",Q,Q,Q))}function Ot(){const _=t.addFunction(n+"_prepAddStep");_.addParam("R","i32"),_.addParam("Q","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),D=p.getLocal("R"),j=p.i32_add(p.getLocal("R"),p.i32_const(2*l)),N=p.i32_add(p.getLocal("R"),p.i32_const(4*l)),Q=p.getLocal("Q"),z=p.i32_add(p.getLocal("Q"),p.i32_const(2*l)),Y=p.getLocal("r"),nt=p.i32_add(p.getLocal("r"),p.i32_const(2*l)),it=p.i32_add(p.getLocal("r"),p.i32_const(4*l)),X=p.i32_const(t.alloc(s)),rt=p.i32_const(t.alloc(s)),bt=p.i32_const(t.alloc(s)),mt=p.i32_const(t.alloc(s)),ut=p.i32_const(t.alloc(s)),At=p.i32_const(t.alloc(s)),Bt=p.i32_const(t.alloc(s)),kt=p.i32_const(t.alloc(s)),It=p.i32_const(t.alloc(s)),Pt=p.i32_const(t.alloc(s)),wt=p.i32_const(t.alloc(s));_.addCode(p.call(F+"_square",N,X),p.call(F+"_square",z,rt),p.call(F+"_mul",X,Q,mt),p.call(F+"_add",z,N,nt),p.call(F+"_square",nt,nt),p.call(F+"_sub",nt,rt,nt),p.call(F+"_sub",nt,X,nt),p.call(F+"_mul",nt,X,nt),p.call(F+"_sub",mt,D,ut),p.call(F+"_square",ut,At),p.call(F+"_add",At,At,Bt),p.call(F+"_add",Bt,Bt,Bt),p.call(F+"_mul",Bt,ut,kt),p.call(F+"_sub",nt,j,It),p.call(F+"_sub",It,j,It),p.call(F+"_mul",It,Q,it),p.call(F+"_mul",Bt,D,Pt),p.call(F+"_square",It,D),p.call(F+"_sub",D,kt,D),p.call(F+"_sub",D,Pt,D),p.call(F+"_sub",D,Pt,D),p.call(F+"_add",N,ut,N),p.call(F+"_square",N,N),p.call(F+"_sub",N,X,N),p.call(F+"_sub",N,At,N),p.call(F+"_add",z,N,Y),p.call(F+"_sub",Pt,D,wt),p.call(F+"_mul",wt,It,wt),p.call(F+"_mul",j,kt,mt),p.call(F+"_add",mt,mt,mt),p.call(F+"_sub",wt,mt,j),p.call(F+"_square",Y,Y),p.call(F+"_sub",Y,rt,Y),p.call(F+"_square",N,bt),p.call(F+"_sub",Y,bt,Y),p.call(F+"_add",it,it,it),p.call(F+"_sub",it,Y,it),p.call(F+"_add",N,N,Y),p.call(F+"_neg",It,It),p.call(F+"_add",It,It,nt))}function pt(){const _=t.addFunction(n+"_prepareG2");_.addParam("pQ","i32"),_.addParam("ppreQ","i32"),_.addLocal("pCoef","i32"),_.addLocal("i","i32");const p=_.getCodeBuilder(),D=p.getLocal("pQ"),j=t.alloc(s*3),N=p.i32_const(j),Q=p.getLocal("ppreQ");_.addCode(p.call(q+"_normalize",D,Q),p.if(p.call(q+"_isZero",Q),p.ret([])),p.call(q+"_copy",Q,N),p.setLocal("pCoef",p.i32_add(p.getLocal("ppreQ"),p.i32_const(s*3)))),_.addCode(p.setLocal("i",p.i32_const(Mt.length-2)),p.block(p.loop(p.call(n+"_prepDblStep",N,p.getLocal("pCoef")),p.setLocal("pCoef",p.i32_add(p.getLocal("pCoef"),p.i32_const(Et))),p.if(p.i32_load8_s(p.getLocal("i"),vt),[...p.call(n+"_prepAddStep",N,Q,p.getLocal("pCoef")),...p.setLocal("pCoef",p.i32_add(p.getLocal("pCoef"),p.i32_const(Et)))]),p.br_if(1,p.i32_eqz(p.getLocal("i"))),p.setLocal("i",p.i32_sub(p.getLocal("i"),p.i32_const(1))),p.br(0))))}function Ft(){const _=t.addFunction(U+"_mul1");_.addParam("pA","i32"),_.addParam("pC1","i32"),_.addParam("pR","i32");const p=_.getCodeBuilder(),D=p.getLocal("pA"),j=p.i32_add(p.getLocal("pA"),p.i32_const(d*2)),N=p.i32_add(p.getLocal("pA"),p.i32_const(d*4)),Q=p.getLocal("pC1"),z=p.getLocal("pR"),Y=p.i32_add(p.getLocal("pR"),p.i32_const(d*2)),nt=p.i32_add(p.getLocal("pR"),p.i32_const(d*4)),it=p.i32_const(t.alloc(d*2)),X=p.i32_const(t.alloc(d*2));_.addCode(p.call(F+"_add",D,j,it),p.call(F+"_add",j,N,X),p.call(F+"_mul",j,Q,nt),p.call(F+"_mul",X,Q,z),p.call(F+"_sub",z,nt,z),p.call(F+"_mulNR",z,z),p.call(F+"_mul",it,Q,Y),p.call(F+"_sub",Y,nt,Y))}Ft();function qt(){const _=t.addFunction(U+"_mul01");_.addParam("pA","i32"),_.addParam("pC0","i32"),_.addParam("pC1","i32"),_.addParam("pR","i32");const p=_.getCodeBuilder(),D=p.getLocal("pA"),j=p.i32_add(p.getLocal("pA"),p.i32_const(d*2)),N=p.i32_add(p.getLocal("pA"),p.i32_const(d*4)),Q=p.getLocal("pC0"),z=p.getLocal("pC1"),Y=p.getLocal("pR"),nt=p.i32_add(p.getLocal("pR"),p.i32_const(d*2)),it=p.i32_add(p.getLocal("pR"),p.i32_const(d*4)),X=p.i32_const(t.alloc(d*2)),rt=p.i32_const(t.alloc(d*2)),bt=p.i32_const(t.alloc(d*2)),mt=p.i32_const(t.alloc(d*2));_.addCode(p.call(F+"_mul",D,Q,X),p.call(F+"_mul",j,z,rt),p.call(F+"_add",D,j,bt),p.call(F+"_add",D,N,mt),p.call(F+"_add",j,N,Y),p.call(F+"_mul",Y,z,Y),p.call(F+"_sub",Y,rt,Y),p.call(F+"_mulNR",Y,Y),p.call(F+"_add",Y,X,Y),p.call(F+"_add",Q,z,nt),p.call(F+"_mul",nt,bt,nt),p.call(F+"_sub",nt,X,nt),p.call(F+"_sub",nt,rt,nt),p.call(F+"_mul",mt,Q,it),p.call(F+"_sub",it,X,it),p.call(F+"_add",it,rt,it))}qt();function yt(){const _=t.addFunction(H+"_mul014");_.addParam("pA","i32"),_.addParam("pC0","i32"),_.addParam("pC1","i32"),_.addParam("pC4","i32"),_.addParam("pR","i32");const p=_.getCodeBuilder(),D=p.getLocal("pA"),j=p.i32_add(p.getLocal("pA"),p.i32_const(d*6)),N=p.getLocal("pC0"),Q=p.getLocal("pC1"),z=p.getLocal("pC4"),Y=p.i32_const(t.alloc(d*6)),nt=p.i32_const(t.alloc(d*6)),it=p.i32_const(t.alloc(d*2)),X=p.getLocal("pR"),rt=p.i32_add(p.getLocal("pR"),p.i32_const(d*6));_.addCode(p.call(U+"_mul01",D,N,Q,Y),p.call(U+"_mul1",j,z,nt),p.call(F+"_add",Q,z,it),p.call(U+"_add",j,D,rt),p.call(U+"_mul01",rt,N,it,rt),p.call(U+"_sub",rt,Y,rt),p.call(U+"_sub",rt,nt,rt),p.call(U+"_copy",nt,X),p.call(U+"_mulNR",X,X),p.call(U+"_add",X,Y,X))}yt();function ft(){const _=t.addFunction(n+"_ell");_.addParam("pP","i32"),_.addParam("pCoefs","i32"),_.addParam("pF","i32");const p=_.getCodeBuilder(),D=p.getLocal("pP"),j=p.i32_add(p.getLocal("pP"),p.i32_const(l)),N=p.getLocal("pF"),Q=p.getLocal("pCoefs"),z=p.i32_add(p.getLocal("pCoefs"),p.i32_const(d)),Y=p.i32_add(p.getLocal("pCoefs"),p.i32_const(d*2)),nt=p.i32_add(p.getLocal("pCoefs"),p.i32_const(d*3)),it=p.i32_add(p.getLocal("pCoefs"),p.i32_const(d*4)),X=t.alloc(d*2),rt=p.i32_const(X),bt=p.i32_const(X),mt=p.i32_const(X+d),ut=t.alloc(d*2),At=p.i32_const(ut),Bt=p.i32_const(ut),kt=p.i32_const(ut+d);_.addCode(p.call(A+"_mul",Q,j,bt),p.call(A+"_mul",z,j,mt),p.call(A+"_mul",Y,D,Bt),p.call(A+"_mul",nt,D,kt),p.call(H+"_mul014",N,it,At,rt,N))}ft();function xt(){const _=t.addFunction(n+"_millerLoop");_.addParam("ppreP","i32"),_.addParam("ppreQ","i32"),_.addParam("r","i32"),_.addLocal("pCoef","i32"),_.addLocal("i","i32");const p=_.getCodeBuilder(),D=p.getLocal("ppreP");p.getLocal("ppreQ");const j=p.getLocal("pCoef"),N=p.getLocal("r");_.addCode(p.call(H+"_one",N),p.if(p.call(T+"_isZero",D),p.ret([])),p.if(p.call(T+"_isZero",p.getLocal("ppreQ")),p.ret([])),p.setLocal("pCoef",p.i32_add(p.getLocal("ppreQ"),p.i32_const(s*3))),p.setLocal("i",p.i32_const(Mt.length-2)),p.block(p.loop(p.call(n+"_ell",D,j,N),p.setLocal("pCoef",p.i32_add(p.getLocal("pCoef"),p.i32_const(Et))),p.if(p.i32_load8_s(p.getLocal("i"),vt),[...p.call(n+"_ell",D,j,N),...p.setLocal("pCoef",p.i32_add(p.getLocal("pCoef"),p.i32_const(Et)))]),p.call(H+"_square",N,N),p.br_if(1,p.i32_eq(p.getLocal("i"),p.i32_const(1))),p.setLocal("i",p.i32_sub(p.getLocal("i"),p.i32_const(1))),p.br(0))),p.call(n+"_ell",D,j,N)),_.addCode(p.call(H+"_conjugate",N,N))}function Rt(_){const p=[[[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")]],[[J("1"),J("0")],[J("3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760"),J("151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027")],[J("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351"),J("0")],[J("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530"),J("1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257")],[J("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),J("0")],[J("3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557"),J("877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230")],[J("4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786"),J("0")],[J("151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027"),J("3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760")],[J("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),J("0")],[J("1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257"),J("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530")],[J("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437"),J("0")],[J("877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230"),J("3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557")]]],D=[[[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")],[J("1"),J("0")]],[[J("1"),J("0")],[J("0"),J("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436")],[J("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),J("0")],[J("0"),J("1")],[J("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),J("0")],[J("0"),J("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350")]],[[J("1"),J("0")],[J("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437"),J("0")],[J("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),J("0")],[J("4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786"),J("0")],[J("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),J("0")],[J("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351"),J("0")]]],j=t.addFunction(H+"_frobeniusMap"+_);j.addParam("x","i32"),j.addParam("r","i32");const N=j.getCodeBuilder();for(let z=0;z<6;z++){const Y=z==0?N.getLocal("x"):N.i32_add(N.getLocal("x"),N.i32_const(z*s)),nt=Y,it=N.i32_add(N.getLocal("x"),N.i32_const(z*s+d)),X=z==0?N.getLocal("r"):N.i32_add(N.getLocal("r"),N.i32_const(z*s)),rt=X,bt=N.i32_add(N.getLocal("r"),N.i32_const(z*s+d)),mt=Q(p[Math.floor(z/3)][_%12],D[z%3][_%6]),ut=t.alloc([...Ct.bigInt2BytesLE(E(mt[0]),l),...Ct.bigInt2BytesLE(E(mt[1]),l)]);_%2==1?j.addCode(N.call(A+"_copy",nt,rt),N.call(A+"_neg",it,bt),N.call(F+"_mul",X,N.i32_const(ut),X)):j.addCode(N.call(F+"_mul",Y,N.i32_const(ut),X))}function Q(z,Y){const nt=J(z[0]),it=J(z[1]),X=J(Y[0]),rt=J(Y[1]),bt=[nt.times(X).minus(it.times(rt)).mod(o),nt.times(rt).add(it.times(X)).mod(o)];return bt[0].isNegative()&&(bt[0]=bt[0].add(o)),bt}}function Ht(){const _=t.addFunction(n+"__cyclotomicSquare");_.addParam("x","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),D=p.getLocal("x"),j=p.i32_add(p.getLocal("x"),p.i32_const(s)),N=p.i32_add(p.getLocal("x"),p.i32_const(2*s)),Q=p.i32_add(p.getLocal("x"),p.i32_const(3*s)),z=p.i32_add(p.getLocal("x"),p.i32_const(4*s)),Y=p.i32_add(p.getLocal("x"),p.i32_const(5*s)),nt=p.getLocal("r"),it=p.i32_add(p.getLocal("r"),p.i32_const(s)),X=p.i32_add(p.getLocal("r"),p.i32_const(2*s)),rt=p.i32_add(p.getLocal("r"),p.i32_const(3*s)),bt=p.i32_add(p.getLocal("r"),p.i32_const(4*s)),mt=p.i32_add(p.getLocal("r"),p.i32_const(5*s)),ut=p.i32_const(t.alloc(s)),At=p.i32_const(t.alloc(s)),Bt=p.i32_const(t.alloc(s)),kt=p.i32_const(t.alloc(s)),It=p.i32_const(t.alloc(s)),Pt=p.i32_const(t.alloc(s)),wt=p.i32_const(t.alloc(s)),Ut=p.i32_const(t.alloc(s));_.addCode(p.call(F+"_mul",D,z,wt),p.call(F+"_mulNR",z,ut),p.call(F+"_add",D,ut,ut),p.call(F+"_add",D,z,Ut),p.call(F+"_mul",Ut,ut,ut),p.call(F+"_mulNR",wt,Ut),p.call(F+"_add",wt,Ut,Ut),p.call(F+"_sub",ut,Ut,ut),p.call(F+"_add",wt,wt,At),p.call(F+"_mul",Q,N,wt),p.call(F+"_mulNR",N,Bt),p.call(F+"_add",Q,Bt,Bt),p.call(F+"_add",Q,N,Ut),p.call(F+"_mul",Ut,Bt,Bt),p.call(F+"_mulNR",wt,Ut),p.call(F+"_add",wt,Ut,Ut),p.call(F+"_sub",Bt,Ut,Bt),p.call(F+"_add",wt,wt,kt),p.call(F+"_mul",j,Y,wt),p.call(F+"_mulNR",Y,It),p.call(F+"_add",j,It,It),p.call(F+"_add",j,Y,Ut),p.call(F+"_mul",Ut,It,It),p.call(F+"_mulNR",wt,Ut),p.call(F+"_add",wt,Ut,Ut),p.call(F+"_sub",It,Ut,It),p.call(F+"_add",wt,wt,Pt),p.call(F+"_sub",ut,D,nt),p.call(F+"_add",nt,nt,nt),p.call(F+"_add",ut,nt,nt),p.call(F+"_add",At,z,bt),p.call(F+"_add",bt,bt,bt),p.call(F+"_add",At,bt,bt),p.call(F+"_mul",Pt,p.i32_const(at),Ut),p.call(F+"_add",Ut,Q,rt),p.call(F+"_add",rt,rt,rt),p.call(F+"_add",Ut,rt,rt),p.call(F+"_sub",It,N,X),p.call(F+"_add",X,X,X),p.call(F+"_add",It,X,X),p.call(F+"_sub",Bt,j,it),p.call(F+"_add",it,it,it),p.call(F+"_add",Bt,it,it),p.call(F+"_add",kt,Y,mt),p.call(F+"_add",mt,mt,mt),p.call(F+"_add",kt,mt,mt))}function Fe(_,p,D){const j=K(_).map(X=>X==-1?255:X),N=t.alloc(j),Q=t.addFunction(n+"__cyclotomicExp_"+D);Q.addParam("x","i32"),Q.addParam("r","i32"),Q.addLocal("bit","i32"),Q.addLocal("i","i32");const z=Q.getCodeBuilder(),Y=z.getLocal("x"),nt=z.getLocal("r"),it=z.i32_const(t.alloc(r));Q.addCode(z.call(H+"_conjugate",Y,it),z.call(H+"_one",nt),z.if(z.teeLocal("bit",z.i32_load8_s(z.i32_const(j.length-1),N)),z.if(z.i32_eq(z.getLocal("bit"),z.i32_const(1)),z.call(H+"_mul",nt,Y,nt),z.call(H+"_mul",nt,it,nt))),z.setLocal("i",z.i32_const(j.length-2)),z.block(z.loop(z.call(n+"__cyclotomicSquare",nt,nt),z.if(z.teeLocal("bit",z.i32_load8_s(z.getLocal("i"),N)),z.if(z.i32_eq(z.getLocal("bit"),z.i32_const(1)),z.call(H+"_mul",nt,Y,nt),z.call(H+"_mul",nt,it,nt))),z.br_if(1,z.i32_eqz(z.getLocal("i"))),z.setLocal("i",z.i32_sub(z.getLocal("i"),z.i32_const(1))),z.br(0)))),p&&Q.addCode(z.call(H+"_conjugate",nt,nt))}function de(){Ht(),Fe(b,M,"w0");const _=t.addFunction(n+"_finalExponentiation");_.addParam("x","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),D=p.getLocal("x"),j=p.getLocal("r"),N=p.i32_const(t.alloc(r)),Q=p.i32_const(t.alloc(r)),z=p.i32_const(t.alloc(r)),Y=p.i32_const(t.alloc(r)),nt=p.i32_const(t.alloc(r)),it=p.i32_const(t.alloc(r)),X=p.i32_const(t.alloc(r));_.addCode(p.call(H+"_frobeniusMap6",D,N),p.call(H+"_inverse",D,Q),p.call(H+"_mul",N,Q,z),p.call(H+"_copy",z,Q),p.call(H+"_frobeniusMap2",z,z),p.call(H+"_mul",z,Q,z),p.call(n+"__cyclotomicSquare",z,Q),p.call(H+"_conjugate",Q,Q),p.call(n+"__cyclotomicExp_w0",z,Y),p.call(n+"__cyclotomicSquare",Y,nt),p.call(H+"_mul",Q,Y,it),p.call(n+"__cyclotomicExp_w0",it,Q),p.call(n+"__cyclotomicExp_w0",Q,N),p.call(n+"__cyclotomicExp_w0",N,X),p.call(H+"_mul",X,nt,X),p.call(n+"__cyclotomicExp_w0",X,nt),p.call(H+"_conjugate",it,it),p.call(H+"_mul",nt,it,nt),p.call(H+"_mul",nt,z,nt),p.call(H+"_conjugate",z,it),p.call(H+"_mul",Q,z,Q),p.call(H+"_frobeniusMap3",Q,Q),p.call(H+"_mul",X,it,X),p.call(H+"_frobeniusMap1",X,X),p.call(H+"_mul",Y,N,Y),p.call(H+"_frobeniusMap2",Y,Y),p.call(H+"_mul",Y,Q,Y),p.call(H+"_mul",Y,X,Y),p.call(H+"_mul",Y,nt,j))}function Ce(){const _=t.addFunction(n+"_finalExponentiationOld");_.addParam("x","i32"),_.addParam("r","i32");const p=J("322277361516934140462891564586510139908379969514828494218366688025288661041104682794998680497580008899973249814104447692778988208376779573819485263026159588510513834876303014016798809919343532899164848730280942609956670917565618115867287399623286813270357901731510188149934363360381614501334086825442271920079363289954510565375378443704372994881406797882676971082200626541916413184642520269678897559532260949334760604962086348898118982248842634379637598665468817769075878555493752214492790122785850202957575200176084204422751485957336465472324810982833638490904279282696134323072515220044451592646885410572234451732790590013479358343841220074174848221722017083597872017638514103174122784843925578370430843522959600095676285723737049438346544753168912974976791528535276317256904336520179281145394686565050419250614107803233314658825463117900250701199181529205942363159325765991819433914303908860460720581408201373164047773794825411011922305820065611121544561808414055302212057471395719432072209245600258134364584636810093520285711072578721435517884103526483832733289802426157301542744476740008494780363354305116978805620671467071400711358839553375340724899735460480144599782014906586543813292157922220645089192130209334926661588737007768565838519456601560804957985667880395221049249803753582637708560"),D=t.alloc(Ct.bigInt2BytesLE(p,544)),j=_.getCodeBuilder();_.addCode(j.call(H+"_exp",j.getLocal("x"),j.i32_const(D),j.i32_const(544),j.getLocal("r")))}const oe=t.alloc(h),fe=t.alloc($);function me(_){const p=t.addFunction(n+"_pairingEq"+_);for(let Q=0;Q<_;Q++)p.addParam("p_"+Q,"i32"),p.addParam("q_"+Q,"i32");p.addParam("c","i32"),p.setReturnType("i32");const D=p.getCodeBuilder(),j=D.i32_const(t.alloc(r)),N=D.i32_const(t.alloc(r));p.addCode(D.call(H+"_one",j));for(let Q=0;Q<_;Q++)p.addCode(D.call(n+"_prepareG1",D.getLocal("p_"+Q),D.i32_const(oe))),p.addCode(D.call(n+"_prepareG2",D.getLocal("q_"+Q),D.i32_const(fe))),p.addCode(D.if(D.i32_eqz(D.call(T+"_inGroupAffine",D.i32_const(oe))),D.ret(D.i32_const(0))),D.if(D.i32_eqz(D.call(q+"_inGroupAffine",D.i32_const(fe))),D.ret(D.i32_const(0)))),p.addCode(D.call(n+"_millerLoop",D.i32_const(oe),D.i32_const(fe),N)),p.addCode(D.call(H+"_mul",j,N,j));p.addCode(D.call(n+"_finalExponentiation",j,j)),p.addCode(D.call(H+"_eq",j,D.getLocal("c")))}function nn(){const _=t.addFunction(n+"_pairing");_.addParam("p","i32"),_.addParam("q","i32"),_.addParam("r","i32");const p=_.getCodeBuilder(),D=p.i32_const(t.alloc(r));_.addCode(p.call(n+"_prepareG1",p.getLocal("p"),p.i32_const(oe))),_.addCode(p.call(n+"_prepareG2",p.getLocal("q"),p.i32_const(fe))),_.addCode(p.call(n+"_millerLoop",p.i32_const(oe),p.i32_const(fe),D)),_.addCode(p.call(n+"_finalExponentiation",D,p.getLocal("r")))}function Ie(){const _=t.addFunction(q+"_inGroupAffine");_.addParam("p","i32"),_.setReturnType("i32");const p=_.getCodeBuilder(),D=[J("2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279894"),J("2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279893")],j=J("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),N=[J("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530"),J("2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530")],Q=p.i32_const(t.alloc([...Ct.bigInt2BytesLE(E(D[0]),l),...Ct.bigInt2BytesLE(E(D[1]),l)])),z=p.i32_const(t.alloc(Ct.bigInt2BytesLE(E(j),l))),Y=p.i32_const(t.alloc([...Ct.bigInt2BytesLE(E(N[0]),l),...Ct.bigInt2BytesLE(E(N[1]),l)])),nt=p.i32_const(t.alloc(Ct.bigInt2BytesLE(b,8))),it=p.getLocal("p"),X=p.i32_add(p.getLocal("p"),p.i32_const(s)),rt=p.i32_const(t.alloc(d)),bt=p.i32_const(t.alloc(s)),mt=p.i32_const(t.alloc(s)),ut=t.alloc(s*2),At=p.i32_const(ut),Bt=p.i32_const(ut),kt=p.i32_const(ut),It=p.i32_const(ut+d),Pt=p.i32_const(ut+s),wt=p.i32_const(ut+s),Ut=p.i32_const(ut+s+d),ye=t.alloc(s*3),ke=p.i32_const(ye),yl=p.i32_const(ye),Ti=p.i32_const(ye),Mi=p.i32_const(ye+d),Ll=p.i32_const(ye+s),qi=p.i32_const(ye+s),ki=p.i32_const(ye+s+d),bl=p.i32_const(ye+s*2);_.addCode(p.if(p.call(q+"_isZeroAffine",p.getLocal("p")),p.ret(p.i32_const(1))),p.if(p.i32_eqz(p.call(q+"_inCurveAffine",p.getLocal("p"))),p.ret(p.i32_const(0))),p.call(F+"_mul",it,Q,bt),p.call(F+"_mul",X,Q,mt),p.call(F+"_mul1",bt,z,Bt),p.call(F+"_neg",mt,Pt),p.call(F+"_neg",bt,yl),p.call(F+"_mul",mt,Y,Ll),p.call(A+"_sub",kt,It,rt),p.call(A+"_add",kt,It,It),p.call(A+"_copy",rt,kt),p.call(A+"_sub",wt,Ut,rt),p.call(A+"_add",wt,Ut,Ut),p.call(A+"_copy",rt,wt),p.call(A+"_add",Ti,Mi,rt),p.call(A+"_sub",Ti,Mi,Mi),p.call(A+"_copy",rt,Ti),p.call(A+"_sub",ki,qi,rt),p.call(A+"_add",qi,ki,ki),p.call(A+"_copy",rt,qi),p.call(F+"_one",bl),p.call(q+"_timesScalar",ke,nt,p.i32_const(8),ke),p.call(q+"_addMixed",ke,At,ke),p.ret(p.call(q+"_eqMixed",ke,p.getLocal("p"))));const Wn=t.addFunction(q+"_inGroup");Wn.addParam("pIn","i32"),Wn.setReturnType("i32");const vn=Wn.getCodeBuilder(),ka=vn.i32_const(t.alloc(s*2));Wn.addCode(vn.call(q+"_toAffine",vn.getLocal("pIn"),ka),vn.ret(vn.call(q+"_inGroupAffine",ka)))}function W(){const _=t.addFunction(T+"_inGroupAffine");_.addParam("p","i32"),_.setReturnType("i32");const p=_.getCodeBuilder(),D=J("4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436"),j=J("793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350"),N=b.times(b).minus(J.one).divide(J(3)),Q=p.i32_const(t.alloc(Ct.bigInt2BytesLE(E(D),l))),z=p.i32_const(t.alloc(Ct.bigInt2BytesLE(E(j),l))),Y=p.i32_const(t.alloc(Ct.bigInt2BytesLE(N,16))),nt=p.getLocal("p"),it=p.i32_add(p.getLocal("p"),p.i32_const(d)),X=t.alloc(d*3),rt=p.i32_const(X),bt=p.i32_const(X),mt=p.i32_const(X+d);p.i32_const(X+2*d);const ut=t.alloc(d*2),At=p.i32_const(ut),Bt=p.i32_const(ut),kt=p.i32_const(ut+d);_.addCode(p.if(p.call(T+"_isZeroAffine",p.getLocal("p")),p.ret(p.i32_const(1))),p.if(p.i32_eqz(p.call(T+"_inCurveAffine",p.getLocal("p"))),p.ret(p.i32_const(0))),p.call(A+"_mul",nt,Q,bt),p.call(A+"_copy",it,mt),p.call(A+"_mul",nt,z,Bt),p.call(A+"_copy",it,kt),p.call(T+"_doubleAffine",rt,rt),p.call(T+"_subMixed",rt,p.getLocal("p"),rt),p.call(T+"_subMixed",rt,At,rt),p.call(T+"_timesScalar",rt,Y,p.i32_const(16),rt),p.ret(p.call(T+"_eqMixed",rt,At)));const It=t.addFunction(T+"_inGroup");It.addParam("pIn","i32"),It.setReturnType("i32");const Pt=It.getCodeBuilder(),wt=Pt.i32_const(t.alloc(d*2));It.addCode(Pt.call(T+"_toAffine",Pt.getLocal("pIn"),wt),Pt.ret(Pt.call(T+"_inGroupAffine",wt)))}for(let _=0;_<10;_++)Rt(_),t.exportFunction(H+"_frobeniusMap"+_);W(),Ie(),Ot(),_t(),dt(),pt(),xt(),Ce(),de();for(let _=1;_<=5;_++)me(_),t.exportFunction(n+"_pairingEq"+_);nn(),t.exportFunction(n+"_pairing"),t.exportFunction(n+"_prepareG1"),t.exportFunction(n+"_prepareG2"),t.exportFunction(n+"_millerLoop"),t.exportFunction(n+"_finalExponentiation"),t.exportFunction(n+"_finalExponentiationOld"),t.exportFunction(n+"__cyclotomicSquare"),t.exportFunction(n+"__cyclotomicExp_w0"),t.exportFunction(U+"_mul1"),t.exportFunction(U+"_mul01"),t.exportFunction(H+"_mul014"),t.exportFunction(T+"_inGroupAffine"),t.exportFunction(T+"_inGroup"),t.exportFunction(q+"_inGroupAffine"),t.exportFunction(q+"_inGroup")},Np=Bp,Dp=Rp;function zo(i){if(typeof i=="bigint"||i.eq!==void 0)return i.toString(10);if(i instanceof Uint8Array)return Un(i,0);if(Array.isArray(i))return i.map(zo);if(typeof i=="object"){const t={};return Object.keys(i).forEach(n=>{t[n]=zo(i[n])}),t}else return i}function jo(i){if(typeof i=="string"&&/^[0-9]+$/.test(i))return BigInt(i);if(typeof i=="string"&&/^0x[0-9a-fA-F]+$/.test(i))return BigInt(i);if(Array.isArray(i))return i.map(jo);if(typeof i=="object"){if(i===null)return null;const t={};return Object.keys(i).forEach(n=>{t[n]=jo(i[n])}),t}else return i}function zp(i){let t=BigInt(0),e=i.length,n=0;const o=new DataView(i.buffer,i.byteOffset,i.byteLength);for(;e>0;)e>=4?(e-=4,t+=BigInt(o.getUint32(e))<<BigInt(n*8),n+=4):e>=2?(e-=2,t+=BigInt(o.getUint16(e))<<BigInt(n*8),n+=2):(e-=1,t+=BigInt(o.getUint8(e))<<BigInt(n*8),n+=1);return t}function jp(i,t){let e=i;const n=new Uint8Array(t),o=new DataView(n.buffer);let a=t;for(;a>0;)a-4>=0?(a-=4,o.setUint32(a,Number(e&BigInt(4294967295))),e=e>>BigInt(32)):a-2>=0?(a-=2,o.setUint16(a,Number(e&BigInt(65535))),e=e>>BigInt(16)):(a-=1,o.setUint8(a,Number(e&BigInt(255))),e=e>>BigInt(8));if(e)throw new Error("Number does not fit in this length");return n}function Up(i){let t=BigInt(0),e=0;const n=new DataView(i.buffer,i.byteOffset,i.byteLength);for(;e<i.length;)e+4<=i.length?(t+=BigInt(n.getUint32(e,!0))<<BigInt(e*8),e+=4):e+4<=i.length?(t+=BigInt(n.getUint16(e,!0))<<BigInt(e*8),e+=2):(t+=BigInt(n.getUint8(e,!0))<<BigInt(e*8),e+=1);return t}function $p(i,t){let e=i;typeof t>"u"&&(t=Math.floor((Pi(i)-1)/8)+1,t==0&&(t=1));const n=new Uint8Array(t),o=new DataView(n.buffer);let a=0;for(;a<t;)a+4<=t?(o.setUint32(a,Number(e&BigInt(4294967295)),!0),a+=4,e=e>>BigInt(32)):a+2<=t?(o.setUint16(Number(a,e&BigInt(65535)),!0),a+=2,e=e>>BigInt(16)):(o.setUint8(Number(a,e&BigInt(255)),!0),a+=1,e=e>>BigInt(8));if(e)throw new Error("Number does not fit in this length");return n}function Uo(i,t){if(typeof t=="bigint"||t.eq!==void 0)return t.toString(10);if(t instanceof Uint8Array)return i.toString(i.e(t));if(Array.isArray(t))return t.map(Uo.bind(this,i));if(typeof t=="object"){const e={};return Object.keys(t).forEach(o=>{e[o]=Uo(i,t[o])}),e}else return t}function $o(i,t){if(typeof t=="string"&&/^[0-9]+$/.test(t))return i.e(t);if(typeof t=="string"&&/^0x[0-9a-fA-F]+$/.test(t))return i.e(t);if(Array.isArray(t))return t.map($o.bind(this,i));if(typeof t=="object"){if(t===null)return null;const e={};return Object.keys(t).forEach(o=>{e[o]=$o(i,t[o])}),e}else return t}const Vp=Object.freeze(Object.defineProperty({__proto__:null,stringifyBigInts:zo,unstringifyBigInts:jo,beBuff2int:zp,beInt2Buff:jp,leBuff2int:Up,leInt2Buff:$p,stringifyFElements:Uo,unstringifyFElements:$o},Symbol.toStringTag,{value:"Module"}));function Vo(i){if(typeof i=="bigint"||i.eq!==void 0)return i.toString(10);if(Array.isArray(i))return i.map(Vo);if(typeof i=="object"){const t={};return Object.keys(i).forEach(n=>{t[n]=Vo(i[n])}),t}else return i}function Qo(i){if(typeof i=="string"&&/^[0-9]+$/.test(i))return lt(i);if(typeof i=="string"&&/^0x[0-9a-fA-F]+$/.test(i))return lt(i);if(Array.isArray(i))return i.map(Qo);if(typeof i=="object"){const t={};return Object.keys(i).forEach(n=>{t[n]=Qo(i[n])}),t}else return i}function Qp(i){let t=lt.zero;for(let e=0;e<i.length;e++){const n=lt(i[i.length-e-1]);t=t.add(n.shiftLeft(e*8))}return t}function Gp(i,t){let e=i,n=t-1;const o=new Uint8Array(t);for(;e.gt(lt.zero)&&n>=0;){let a=Number(e.and(lt("255")));o[n]=a,n--,e=e.shiftRight(8)}if(!e.eq(lt.zero))throw new Error("Number does not fit in this length");return o}function Wp(i){let t=lt.zero;for(let e=0;e<i.length;e++){const n=lt(i[e]);t=t.add(n.shiftLeft(e*8))}return t}function Zp(i,t){let e=i,n=0;const o=new Uint8Array(t);for(;e.gt(lt.zero)&&n<o.length;){let a=Number(e.and(lt(255)));o[n]=a,n++,e=e.shiftRight(8)}if(!e.eq(lt.zero))throw new Error("Number does not fit in this length");return o}const Jp=Object.freeze(Object.defineProperty({__proto__:null,stringifyBigInts:Vo,unstringifyBigInts:Qo,beBuff2int:Qp,beInt2Buff:Gp,leBuff2int:Wp,leInt2Buff:Zp},Symbol.toStringTag,{value:"Module"}));let xe={};const Hp=typeof BigInt=="function";Hp?Object.assign(xe,Vp):Object.assign(xe,Jp);const Pn=[];for(let i=0;i<256;i++)Pn[i]=Xp(i,8);function Xp(i,t){let e=0,n=i;for(let o=0;o<t;o++)e<<=1,e=e|n&1,n>>=1;return e}xe.bitReverse=function(t,e){return(Pn[t>>>24]|Pn[t>>>16&255]<<8|Pn[t>>>8&255]<<16|Pn[t&255]<<24)>>>32-e};xe.log2=function(t){return((t&4294901760)!==0?(t&=4294901760,16):0)|((t&4278255360)!==0?(t&=4278255360,8):0)|((t&4042322160)!==0?(t&=4042322160,4):0)|((t&3435973836)!==0?(t&=3435973836,2):0)|(t&2863311530)!==0};xe.buffReverseBits=function(t,e){const n=t.byteLength/e,o=xe.log2(n);if(n!=1<<o)throw new Error("Invalid number of pointers");for(let a=0;a<n;a++){const c=xe.bitReverse(a,o);if(a>c){const l=t.slice(a*e,(a+1)*e);t.set(t.slice(c*e,(c+1)*e),a*e),t.set(l,c*e)}}};xe.array2buffer=function(i,t){const e=new Uint8Array(t*i.length);for(let n=0;n<i.length;n++)e.set(i[n],n*t);return e};xe.buffer2array=function(i,t){const e=i.byteLength/t,n=new Array(e);for(let o=0;o<e;o++)n[o]=i.slice(o*t,o*t+t);return n};let{bitReverse:Yp,log2:he,buffReverseBits:Jc,stringifyBigInts:Kp,unstringifyBigInts:tg,beBuff2int:eg,beInt2Buff:ng,leBuff2int:ig,leInt2Buff:Hc,array2buffer:xa,buffer2array:yi,stringifyFElements:og,unstringifyFElements:ag}=xe;const rg=Object.freeze(Object.defineProperty({__proto__:null,bitReverse:Yp,log2:he,buffReverseBits:Jc,stringifyBigInts:Kp,unstringifyBigInts:tg,beBuff2int:eg,beInt2Buff:ng,leBuff2int:ig,leInt2Buff:Hc,array2buffer:xa,buffer2array:yi,stringifyFElements:og,unstringifyFElements:ag},Symbol.toStringTag,{value:"Module"})),ce=1<<30;class $t{constructor(t){this.buffers=[],this.byteLength=t;for(let e=0;e<t;e+=ce){const n=Math.min(t-e,ce);this.buffers.push(new Uint8Array(n))}}slice(t,e){e===void 0&&(e=this.byteLength),t===void 0&&(t=0);const n=e-t,o=Math.floor(t/ce),a=Math.floor((t+n-1)/ce);if(o==a||n==0)return this.buffers[o].slice(t%ce,t%ce+n);let c,l=o,d=t%ce,s=n;for(;s>0;){const r=d+s>ce?ce-d:s,g=new Uint8Array(this.buffers[l].buffer,this.buffers[l].byteOffset+d,r);if(r==n)return g.slice();c||(n<=ce?c=new Uint8Array(n):c=new $t(n)),c.set(g,n-s),s=s-r,l++,d=0}return c}set(t,e){e===void 0&&(e=0);const n=t.byteLength;if(n==0)return;const o=Math.floor(e/ce),a=Math.floor((e+n-1)/ce);if(o==a)return t instanceof $t&&t.buffers.length==1?this.buffers[o].set(t.buffers[0],e%ce):this.buffers[o].set(t,e%ce);let c=o,l=e%ce,d=n;for(;d>0;){const s=l+d>ce?ce-l:d,r=t.slice(n-d,n-d+s);new Uint8Array(this.buffers[c].buffer,this.buffers[c].byteOffset+l,s).set(r),d=d-s,c++,l=0}}}function Ue(i,t,e,n){return async function(a){const c=Math.floor(a.byteLength/e);if(c*e!==a.byteLength)throw new Error("Invalid buffer size");const l=Math.floor(c/i.concurrency),d=[];for(let L=0;L<i.concurrency;L++){let m;if(L<i.concurrency-1?m=l:m=c-L*l,m==0)continue;const C=a.slice(L*l*e,L*l*e+m*e),A=[{cmd:"ALLOCSET",var:0,buff:C},{cmd:"ALLOC",var:1,len:n*m},{cmd:"CALL",fnName:t,params:[{var:0},{val:m},{var:1}]},{cmd:"GET",out:0,var:1,len:n*m}];d.push(i.queueAction(A))}const s=await Promise.all(d);let r;a instanceof $t?r=new $t(c*n):r=new Uint8Array(c*n);let g=0;for(let L=0;L<s.length;L++)r.set(s[L][0],g),g+=s[L][0].byteLength;return r}}class Xr{constructor(t,e,n,o){if(this.tm=t,this.prefix=e,this.p=o,this.n8=n,this.type="F1",this.m=1,this.half=si(o,We),this.bitLength=Pi(o),this.mask=Pe(Ro(We,this.bitLength),We),this.pOp1=t.alloc(n),this.pOp2=t.alloc(n),this.pOp3=t.alloc(n),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(n/8),this.n32=Math.floor(n/4),this.n64*8!=this.n8)throw new Error("n8 must be a multiple of 8");this.half=si(this.p,We),this.nqr=this.two;let a=this.exp(this.nqr,this.half);for(;!this.eq(a,this.negone);)this.nqr=this.add(this.nqr,this.one),a=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let c=Pe(this.p,We);for(;!va(c);)this.s=this.s+1,c=si(c,We);this.w=[],this.w[this.s]=this.exp(this.nqr,c);for(let l=this.s-1;l>=0;l--)this.w[l]=this.square(this.w[l+1]);if(!this.eq(this.w[0],this.one))throw new Error("Error calculating roots of unity");this.batchToMontgomery=Ue(t,e+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=Ue(t,e+"_batchFromMontgomery",this.n8,this.n8)}op2(t,e,n){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,n){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){return this.op2("_add",t,e)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=yn(te(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(t){return this.op1Bool("_isNegative",t)}e(t,e){if(t instanceof Uint8Array)return t;let n=te(t,e);Ic(n)?(n=Tc(n),No(n,this.p)&&(n=Ae(n,this.p)),n=Pe(this.p,n)):No(n,this.p)&&(n=Ae(n,this.p));const o=Hc(n,this.n8);return this.toMontgomery(o)}toString(t,e){const n=this.fromMontgomery(t),o=Un(n,0);return xc(o,e)}fromRng(t){let e;const n=new Uint8Array(this.n8);do{e=Oc;for(let o=0;o<this.n64;o++)e=wa(e,Ro(t.nextU64(),64*o));e=kc(e,this.mask)}while(qc(e,this.p));return gi(n,0,e,this.n8),n}random(){return this.fromRng(Fa())}toObject(t){const e=this.fromMontgomery(t);return Un(e,0)}fromObject(t){const e=new Uint8Array(this.n8);return gi(e,0,t,this.n8),this.toMontgomery(e)}toRprLE(t,e,n){t.set(this.fromMontgomery(n),e)}toRprBE(t,e,n){const o=this.fromMontgomery(n);for(let a=0;a<this.n8/2;a++){const c=o[a];o[a]=o[this.n8-1-a],o[this.n8-1-a]=c}t.set(o,e)}fromRprLE(t,e){e=e||0;const n=t.slice(e,e+this.n8);return this.toMontgomery(n)}async batchInverse(t){let e=!1;const n=this.n8,o=this.n8;Array.isArray(t)?(t=xa(t,n),e=!0):t=t.slice(0,t.byteLength);const a=Math.floor(t.byteLength/n);if(a*n!==t.byteLength)throw new Error("Invalid buffer size");const c=Math.floor(a/this.tm.concurrency),l=[];for(let g=0;g<this.tm.concurrency;g++){let L;if(g<this.tm.concurrency-1?L=c:L=a-g*c,L==0)continue;const m=t.slice(g*c*n,g*c*n+L*n),C=[{cmd:"ALLOCSET",var:0,buff:m},{cmd:"ALLOC",var:1,len:o*L},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:n},{val:L},{var:1},{val:o}]},{cmd:"GET",out:0,var:1,len:o*L}];l.push(this.tm.queueAction(C))}const d=await Promise.all(l);let s;t instanceof $t?s=new $t(a*o):s=new Uint8Array(a*o);let r=0;for(let g=0;g<d.length;g++)s.set(d[g][0],r),r+=d[g][0].byteLength;return e?yi(s,o):s}}class Yr{constructor(t,e,n){this.tm=t,this.prefix=e,this.F=n,this.type="F2",this.m=n.m*2,this.n8=this.F.n8*2,this.n32=this.F.n32*2,this.n64=this.F.n64*2,this.pOp1=t.alloc(n.n8*2),this.pOp2=t.alloc(n.n8*2),this.pOp3=t.alloc(n.n8*2),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,e,n){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,n){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){return this.op2("_add",t,e)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}mul1(t,e){return this.op2("_mul1",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=yn(te(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(t,e){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&t.length==2){const n=this.F.e(t[0],e),o=this.F.e(t[1],e),a=new Uint8Array(this.F.n8*2);return a.set(n),a.set(o,this.F.n8*2),a}else throw new Error("invalid F2")}toString(t,e){const n=this.F.toString(t.slice(0,this.F.n8),e),o=this.F.toString(t.slice(this.F.n8),e);return`[${n}, ${o}]`}fromRng(t){const e=this.F.fromRng(t),n=this.F.fromRng(t),o=new Uint8Array(this.F.n8*2);return o.set(e),o.set(n,this.F.n8),o}random(){return this.fromRng(Fa())}toObject(t){const e=this.F.toObject(t.slice(0,this.F.n8)),n=this.F.toObject(t.slice(this.F.n8,this.F.n8*2));return[e,n]}fromObject(t){const e=new Uint8Array(this.F.n8*2),n=this.F.fromObject(t[0]),o=this.F.fromObject(t[1]);return e.set(n),e.set(o,this.F.n8),e}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8)}}class sg{constructor(t,e,n){this.tm=t,this.prefix=e,this.F=n,this.type="F3",this.m=n.m*3,this.n8=this.F.n8*3,this.n32=this.F.n32*3,this.n64=this.F.n64*3,this.pOp1=t.alloc(n.n8*3),this.pOp2=t.alloc(n.n8*3),this.pOp3=t.alloc(n.n8*3),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,e,n){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,n){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}add(t,e){return this.op2("_add",t,e)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=yn(te(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(t,e){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&t.length==3){const n=this.F.e(t[0],e),o=this.F.e(t[1],e),a=this.F.e(t[2],e),c=new Uint8Array(this.F.n8*3);return c.set(n),c.set(o,this.F.n8),c.set(a,this.F.n8*2),c}else throw new Error("invalid F3")}toString(t,e){const n=this.F.toString(t.slice(0,this.F.n8),e),o=this.F.toString(t.slice(this.F.n8,this.F.n8*2),e),a=this.F.toString(t.slice(this.F.n8*2),e);return`[${n}, ${o}, ${a}]`}fromRng(t){const e=this.F.fromRng(t),n=this.F.fromRng(t),o=this.F.fromRng(t),a=new Uint8Array(this.F.n8*3);return a.set(e),a.set(n,this.F.n8),a.set(o,this.F.n8*2),a}random(){return this.fromRng(Fa())}toObject(t){const e=this.F.toObject(t.slice(0,this.F.n8)),n=this.F.toObject(t.slice(this.F.n8,this.F.n8*2)),o=this.F.toObject(t.slice(this.F.n8*2,this.F.n8*3));return[e,n,o]}fromObject(t){const e=new Uint8Array(this.F.n8*3),n=this.F.fromObject(t[0]),o=this.F.fromObject(t[1]),a=this.F.fromObject(t[2]);return e.set(n),e.set(o,this.F.n8),e.set(a,this.F.n8*2),e}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8,this.F.n8*2)}c3(t){return t.slice(this.F.n8*2)}}class Kr{constructor(t,e,n,o,a,c){this.tm=t,this.prefix=e,this.F=n,this.pOp1=t.alloc(n.n8*3),this.pOp2=t.alloc(n.n8*3),this.pOp3=t.alloc(n.n8*3),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,n.n8*3),this.tm.instance.exports[e+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,n.n8*2),this.one=this.tm.getBuff(o,n.n8*3),this.g=this.one,this.oneAffine=this.tm.getBuff(o,n.n8*2),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(a,n.n8),c&&(this.cofactor=yn(c)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=Ue(t,e+"_batchLEMtoC",n.n8*2,n.n8),this.batchLEMtoU=Ue(t,e+"_batchLEMtoU",n.n8*2,n.n8*2),this.batchCtoLEM=Ue(t,e+"_batchCtoLEM",n.n8,n.n8*2),this.batchUtoLEM=Ue(t,e+"_batchUtoLEM",n.n8*2,n.n8*2),this.batchToJacobian=Ue(t,e+"_batchToJacobian",n.n8*2,n.n8*3),this.batchToAffine=Ue(t,e+"_batchToAffine",n.n8*3,n.n8*2)}op2(t,e,n){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,n),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}op2bool(t,e,n){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,n),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}op1Affine(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*2)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){if(t.byteLength==this.F.n8*3){if(e.byteLength==this.F.n8*3)return this.op2("_add",t,e);if(e.byteLength==this.F.n8*2)return this.op2("_addMixed",t,e);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(e.byteLength==this.F.n8*3)return this.op2("_addMixed",e,t);if(e.byteLength==this.F.n8*2)return this.op2("_addAffine",t,e);throw new Error("invalid point size")}else throw new Error("invalid point size")}sub(t,e){if(t.byteLength==this.F.n8*3){if(e.byteLength==this.F.n8*3)return this.op2("_sub",t,e);if(e.byteLength==this.F.n8*2)return this.op2("_subMixed",t,e);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(e.byteLength==this.F.n8*3)return this.op2("_subMixed",e,t);if(e.byteLength==this.F.n8*2)return this.op2("_subAffine",t,e);throw new Error("invalid point size")}else throw new Error("invalid point size")}neg(t){if(t.byteLength==this.F.n8*3)return this.op1("_neg",t);if(t.byteLength==this.F.n8*2)return this.op1Affine("_negAffine",t);throw new Error("invalid point size")}double(t){if(t.byteLength==this.F.n8*3)return this.op1("_double",t);if(t.byteLength==this.F.n8*2)return this.op1("_doubleAffine",t);throw new Error("invalid point size")}isZero(t){if(t.byteLength==this.F.n8*3)return this.op1Bool("_isZero",t);if(t.byteLength==this.F.n8*2)return this.op1Bool("_isZeroAffine",t);throw new Error("invalid point size")}timesScalar(t,e){e instanceof Uint8Array||(e=yn(te(e)));let n;if(t.byteLength==this.F.n8*3)n=this.prefix+"_timesScalar";else if(t.byteLength==this.F.n8*2)n=this.prefix+"_timesScalarAffine";else throw new Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[n](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}timesFr(t,e){let n;if(t.byteLength==this.F.n8*3)n=this.prefix+"_timesFr";else if(t.byteLength==this.F.n8*2)n=this.prefix+"_timesFrAffine";else throw new Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[n](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.F.n8*3)}eq(t,e){if(t.byteLength==this.F.n8*3){if(e.byteLength==this.F.n8*3)return this.op2bool("_eq",t,e);if(e.byteLength==this.F.n8*2)return this.op2bool("_eqMixed",t,e);throw new Error("invalid point size")}else if(t.byteLength==this.F.n8*2){if(e.byteLength==this.F.n8*3)return this.op2bool("_eqMixed",e,t);if(e.byteLength==this.F.n8*2)return this.op2bool("_eqAffine",t,e);throw new Error("invalid point size")}else throw new Error("invalid point size")}toAffine(t){if(t.byteLength==this.F.n8*3)return this.op1Affine("_toAffine",t);if(t.byteLength==this.F.n8*2)return t;throw new Error("invalid point size")}toJacobian(t){if(t.byteLength==this.F.n8*3)return t;if(t.byteLength==this.F.n8*2)return this.op1("_toJacobian",t);throw new Error("invalid point size")}toRprUncompressed(t,e,n){if(this.tm.setBuff(this.pOp1,n),n.byteLength==this.F.n8*3)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(n.byteLength!=this.F.n8*2)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,this.F.n8*2);t.set(o,e)}fromRprUncompressed(t,e){const n=t.slice(e,e+this.F.n8*2);return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,this.F.n8*2)}toRprCompressed(t,e,n){if(this.tm.setBuff(this.pOp1,n),n.byteLength==this.F.n8*3)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(n.byteLength!=this.F.n8*2)throw new Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,this.F.n8);t.set(o,e)}fromRprCompressed(t,e){const n=t.slice(e,e+this.F.n8);return this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,this.F.n8*2)}toUncompressed(t){const e=new Uint8Array(this.F.n8*2);return this.toRprUncompressed(e,0,t),e}toRprLEM(t,e,n){if(n.byteLength==this.F.n8*2){t.set(n,e);return}else if(n.byteLength==this.F.n8*3){this.tm.setBuff(this.pOp1,n),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);const o=this.tm.getBuff(this.pOp1,this.F.n8*2);t.set(o,e)}else throw new Error("invalid point size")}fromRprLEM(t,e){return e=e||0,t.slice(e,e+this.F.n8*2)}toString(t,e){if(t.byteLength==this.F.n8*3){const n=this.F.toString(t.slice(0,this.F.n8),e),o=this.F.toString(t.slice(this.F.n8,this.F.n8*2),e),a=this.F.toString(t.slice(this.F.n8*2),e);return`[ ${n}, ${o}, ${a} ]`}else if(t.byteLength==this.F.n8*2){const n=this.F.toString(t.slice(0,this.F.n8),e),o=this.F.toString(t.slice(this.F.n8),e);return`[ ${n}, ${o} ]`}else throw new Error("invalid point size")}isValid(t){if(this.isZero(t))return!0;const e=this.F,n=this.toAffine(t),o=n.slice(0,this.F.n8),a=n.slice(this.F.n8,this.F.n8*2),c=e.add(e.mul(e.square(o),o),this.b),l=e.square(a);return e.eq(c,l)}fromRng(t){const e=this.F;let n=[],o,a;do n[0]=e.fromRng(t),o=t.nextBool(),a=e.add(e.mul(e.square(n[0]),n[0]),this.b);while(!e.isSquare(a));n[1]=e.sqrt(a);const c=e.isNegative(n[1]);o^c&&(n[1]=e.neg(n[1]));let l=new Uint8Array(this.F.n8*2);return l.set(n[0]),l.set(n[1],this.F.n8),this.cofactor&&(l=this.timesScalar(l,this.cofactor)),l}toObject(t){if(this.isZero(t))return[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero)];const e=this.F.toObject(t.slice(0,this.F.n8)),n=this.F.toObject(t.slice(this.F.n8,this.F.n8*2));let o;return t.byteLength==this.F.n8*3?o=this.F.toObject(t.slice(this.F.n8*2,this.F.n8*3)):o=this.F.toObject(this.F.one),[e,n,o]}fromObject(t){const e=this.F.fromObject(t[0]),n=this.F.fromObject(t[1]);let o;if(t.length==3?o=this.F.fromObject(t[2]):o=this.F.one,this.F.isZero(o,this.F.one))return this.zeroAffine;if(this.F.eq(o,this.F.one)){const a=new Uint8Array(this.F.n8*2);return a.set(e),a.set(n,this.F.n8),a}else{const a=new Uint8Array(this.F.n8*3);return a.set(e),a.set(n,this.F.n8),a.set(o,this.F.n8*2),a}}e(t){return t instanceof Uint8Array?t:this.fromObject(t)}x(t){return this.toAffine(t).slice(0,this.F.n8)}y(t){return this.toAffine(t).slice(this.F.n8)}}function Xc(i){let e,n;i&&(i.onmessage=function(r){let g;if(r.data?g=r.data:g=r,g[0].cmd=="INIT")o(g[0]).then(function(){i.postMessage(g.result)});else if(g[0].cmd=="TERMINATE")i.close();else{const L=s(g);i.postMessage(L)}});async function o(r){const g=new Uint8Array(r.code),L=await WebAssembly.compile(g);n=new WebAssembly.Memory({initial:r.init,maximum:32767}),e=await WebAssembly.instantiate(L,{env:{memory:n}})}function a(r){const g=new Uint32Array(n.buffer,0,1);for(;g[0]&3;)g[0]++;const L=g[0];if(g[0]+=r,g[0]+r>n.buffer.byteLength){const m=n.buffer.byteLength/65536;let C=Math.floor((g[0]+r)/65536)+1;C>32767&&(C=32767),n.grow(C-m)}return L}function c(r){const g=a(r.byteLength);return d(g,r),g}function l(r,g){const L=new Uint8Array(n.buffer);return new Uint8Array(L.buffer,L.byteOffset+r,g)}function d(r,g){new Uint8Array(n.buffer).set(new Uint8Array(g),r)}function s(r){if(r[0].cmd=="INIT")return o(r[0]);const g={vars:[],out:[]},m=new Uint32Array(n.buffer,0,1)[0];for(let A=0;A<r.length;A++)switch(r[A].cmd){case"ALLOCSET":g.vars[r[A].var]=c(r[A].buff);break;case"ALLOC":g.vars[r[A].var]=a(r[A].len);break;case"SET":d(g.vars[r[A].var],r[A].buff);break;case"CALL":{const w=[];for(let T=0;T<r[A].params.length;T++){const F=r[A].params[T];typeof F.var<"u"?w.push(g.vars[F.var]+(F.offset||0)):typeof F.val<"u"&&w.push(F.val)}e.exports[r[A].fnName](...w);break}case"GET":g.out[r[A].out]=l(g.vars[r[A].var],r[A].len).slice();break;default:throw new Error("Invalid cmd")}const C=new Uint32Array(n.buffer,0,1);return C[0]=m,g.out}return s}const oo=25;class ts{constructor(){this.promise=new Promise((t,e)=>{this.reject=e,this.resolve=t})}}function cg(i){return new Promise(t=>setTimeout(t,i))}function lg(i){return process.browser?globalThis.btoa(i):Buffer.from(i).toString("base64")}const ug=lg("("+Xc.toString()+")(self)"),dg="data:application/javascript;base64,"+ug;async function fg(i,t){const e=new hg;e.memory=new WebAssembly.Memory({initial:oo}),e.u8=new Uint8Array(e.memory.buffer),e.u32=new Uint32Array(e.memory.buffer);const n=await WebAssembly.compile(i.code);if(e.instance=await WebAssembly.instantiate(n,{env:{memory:e.memory}}),e.singleThread=t,e.initalPFree=e.u32[0],e.pq=i.pq,e.pr=i.pr,e.pG1gen=i.pG1gen,e.pG1zero=i.pG1zero,e.pG2gen=i.pG2gen,e.pG2zero=i.pG2zero,e.pOneT=i.pOneT,t)e.code=i.code,e.taskManager=Xc(),await e.taskManager([{cmd:"INIT",init:oo,code:e.code.slice()}]),e.concurrency=1;else{e.workers=[],e.pendingDeferreds=[],e.working=[];let a;typeof navigator=="object"&&navigator.hardwareConcurrency?a=navigator.hardwareConcurrency:a=vl.cpus().length,a==0&&(a=2),a>64&&(a=64),e.concurrency=a;for(let l=0;l<a;l++)e.workers[l]=new wl(dg),e.workers[l].addEventListener("message",o(l)),e.working[l]=!1;const c=[];for(let l=0;l<e.workers.length;l++){const d=i.code.slice();c.push(e.postAction(l,[{cmd:"INIT",init:oo,code:d}],[d.buffer]))}await Promise.all(c)}return e;function o(a){return function(c){let l;c&&c.data?l=c.data:l=c,e.working[a]=!1,e.pendingDeferreds[a].resolve(l),e.processWorks()}}}class hg{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(this.oldPFree!=0)throw new Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(this.oldPFree==0)throw new Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(t,e,n,o){if(this.working[t])throw new Error("Posting a job t a working worker");return this.working[t]=!0,this.pendingDeferreds[t]=o||new ts,this.workers[t].postMessage(e,n),this.pendingDeferreds[t].promise}processWorks(){for(let t=0;t<this.workers.length&&this.actionQueue.length>0;t++)if(this.working[t]==!1){const e=this.actionQueue.shift();this.postAction(t,e.data,e.transfers,e.deferred)}}queueAction(t,e){const n=new ts;if(this.singleThread){const o=this.taskManager(t);n.resolve(o)}else this.actionQueue.push({data:t,transfers:e,deferred:n}),this.processWorks();return n.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(t){const e=this.alloc(t.byteLength);return this.setBuff(e,t),e}getBuff(t,e){return this.u8.slice(t,t+e)}setBuff(t,e){this.u8.set(new Uint8Array(e),t)}alloc(t){for(;this.u32[0]&3;)this.u32[0]++;const e=this.u32[0];return this.u32[0]+=t,e}async terminate(){for(let t=0;t<this.workers.length;t++)this.workers[t].postMessage([{cmd:"TERMINATE"}]);await cg(200)}}function ao(i,t){const e=i[t],n=i.Fr,o=i.tm;i[t].batchApplyKey=async function(a,c,l,d,s){d=d||"affine",s=s||"affine";let r,g,L,m,C;if(t=="G1")d=="jacobian"?(L=e.F.n8*3,r="g1m_batchApplyKey"):(L=e.F.n8*2,r="g1m_batchApplyKeyMixed"),m=e.F.n8*3,s=="jacobian"?C=e.F.n8*3:(g="g1m_batchToAffine",C=e.F.n8*2);else if(t=="G2")d=="jacobian"?(L=e.F.n8*3,r="g2m_batchApplyKey"):(L=e.F.n8*2,r="g2m_batchApplyKeyMixed"),m=e.F.n8*3,s=="jacobian"?C=e.F.n8*3:(g="g2m_batchToAffine",C=e.F.n8*2);else if(t=="Fr")r="frm_batchApplyKey",L=e.n8,m=e.n8,C=e.n8;else throw new Error("Invalid group: "+t);const A=Math.floor(a.byteLength/L),w=Math.floor(A/o.concurrency),T=[];l=n.e(l);let F=n.e(c);for(let E=0;E<o.concurrency;E++){let f;if(E<o.concurrency-1?f=w:f=A-E*w,f==0)continue;const y=[];y.push({cmd:"ALLOCSET",var:0,buff:a.slice(E*w*L,E*w*L+f*L)}),y.push({cmd:"ALLOCSET",var:1,buff:F}),y.push({cmd:"ALLOCSET",var:2,buff:l}),y.push({cmd:"ALLOC",var:3,len:f*Math.max(m,C)}),y.push({cmd:"CALL",fnName:r,params:[{var:0},{val:f},{var:1},{var:2},{var:3}]}),g&&y.push({cmd:"CALL",fnName:g,params:[{var:3},{val:f},{var:3}]}),y.push({cmd:"GET",out:0,var:3,len:f*C}),T.push(o.queueAction(y)),F=n.mul(F,n.exp(l,f))}const R=await Promise.all(T);let q;a instanceof $t?q=new $t(A*C):q=new Uint8Array(A*C);let Z=0;for(let E=0;E<R.length;E++)q.set(R[E][0],Z),Z+=R[E][0].byteLength;return q}}function _g(i){const t=i.tm;i.pairing=function(n,o){t.startSyncOp();const a=t.allocBuff(i.G1.toJacobian(n)),c=t.allocBuff(i.G2.toJacobian(o)),l=t.alloc(i.Gt.n8);t.instance.exports[i.name+"_pairing"](a,c,l);const d=t.getBuff(l,i.Gt.n8);return t.endSyncOp(),d},i.pairingEq=async function(){let n,o;arguments.length%2==1?(n=arguments[arguments.length-1],o=(arguments.length-1)/2):(n=i.Gt.one,o=arguments.length/2);const a=[];for(let r=0;r<o;r++){const g=[],L=i.G1.toJacobian(arguments[r*2]);g.push({cmd:"ALLOCSET",var:0,buff:L}),g.push({cmd:"ALLOC",var:1,len:i.prePSize});const m=i.G2.toJacobian(arguments[r*2+1]);g.push({cmd:"ALLOCSET",var:2,buff:m}),g.push({cmd:"ALLOC",var:3,len:i.preQSize}),g.push({cmd:"ALLOC",var:4,len:i.Gt.n8}),g.push({cmd:"CALL",fnName:i.name+"_prepareG1",params:[{var:0},{var:1}]}),g.push({cmd:"CALL",fnName:i.name+"_prepareG2",params:[{var:2},{var:3}]}),g.push({cmd:"CALL",fnName:i.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),g.push({cmd:"GET",out:0,var:4,len:i.Gt.n8}),a.push(t.queueAction(g))}const c=await Promise.all(a);t.startSyncOp();const l=t.alloc(i.Gt.n8);t.instance.exports.ftm_one(l);for(let r=0;r<c.length;r++){const g=t.allocBuff(c[r][0]);t.instance.exports.ftm_mul(l,g,l)}t.instance.exports[i.name+"_finalExponentiation"](l,l);const d=t.allocBuff(n),s=!!t.instance.exports.ftm_eq(l,d);return t.endSyncOp(),s},i.prepareG1=function(e){this.tm.startSyncOp();const n=this.tm.allocBuff(e),o=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](n,o);const a=this.tm.getBuff(o,this.prePSize);return this.tm.endSyncOp(),a},i.prepareG2=function(e){this.tm.startSyncOp();const n=this.tm.allocBuff(e),o=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](n,o);const a=this.tm.getBuff(o,this.preQSize);return this.tm.endSyncOp(),a},i.millerLoop=function(e,n){this.tm.startSyncOp();const o=this.tm.allocBuff(e),a=this.tm.allocBuff(n),c=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](o,a,c);const l=this.tm.getBuff(c,this.Gt.n8);return this.tm.endSyncOp(),l},i.finalExponentiation=function(e){this.tm.startSyncOp();const n=this.tm.allocBuff(e),o=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](n,o);const a=this.tm.getBuff(o,this.Gt.n8);return this.tm.endSyncOp(),a}}const es=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function ns(i,t){const e=i[t],n=e.tm;async function o(c,l,d,s,r){if(!(c instanceof Uint8Array))throw s&&s.error(`${r} _multiExpChunk buffBases is not Uint8Array`),new Error(`${r} _multiExpChunk buffBases is not Uint8Array`);if(!(l instanceof Uint8Array))throw s&&s.error(`${r} _multiExpChunk buffScalars is not Uint8Array`),new Error(`${r} _multiExpChunk buffScalars is not Uint8Array`);d=d||"affine";let g,L;if(t=="G1")d=="affine"?(L="g1m_multiexpAffine_chunk",g=e.F.n8*2):(L="g1m_multiexp_chunk",g=e.F.n8*3);else if(t=="G2")d=="affine"?(L="g2m_multiexpAffine_chunk",g=e.F.n8*2):(L="g2m_multiexp_chunk",g=e.F.n8*3);else throw new Error("Invalid group");const m=Math.floor(c.byteLength/g);if(m==0)return e.zero;const C=Math.floor(l.byteLength/m);if(C*m!=l.byteLength)throw new Error("Scalar size does not match");const A=es[he(m)],w=Math.floor((C*8-1)/A)+1,T=[];for(let q=0;q<w;q++){const Z=[{cmd:"ALLOCSET",var:0,buff:c},{cmd:"ALLOCSET",var:1,buff:l},{cmd:"ALLOC",var:2,len:e.F.n8*3},{cmd:"CALL",fnName:L,params:[{var:0},{var:1},{val:C},{val:m},{val:q*A},{val:Math.min(C*8-q*A,A)},{var:2}]},{cmd:"GET",out:0,var:2,len:e.F.n8*3}];T.push(e.tm.queueAction(Z))}const F=await Promise.all(T);let R=e.zero;for(let q=F.length-1;q>=0;q--){if(!e.isZero(R))for(let Z=0;Z<A;Z++)R=e.double(R);R=e.add(R,F[q][0])}return R}async function a(c,l,d,s,r){let m;if(t=="G1")d=="affine"?m=e.F.n8*2:m=e.F.n8*3;else if(t=="G2")d=="affine"?m=e.F.n8*2:m=e.F.n8*3;else throw new Error("Invalid group");const C=Math.floor(c.byteLength/m),A=Math.floor(l.byteLength/C);if(A*C!=l.byteLength)throw new Error("Scalar size does not match");const w=es[he(C)],T=Math.floor((A*8-1)/w)+1;let F;F=Math.floor(C/(n.concurrency/T)),F>4194304&&(F=4194304),F<1024&&(F=1024);const R=[];for(let E=0;E<C;E+=F){s&&s.debug(`Multiexp start: ${r}: ${E}/${C}`);const f=Math.min(C-E,F),y=c.slice(E*m,(E+f)*m),I=l.slice(E*A,(E+f)*A);R.push(o(y,I,d,s,r).then(k=>(s&&s.debug(`Multiexp end: ${r}: ${E}/${C}`),k)))}const q=await Promise.all(R);let Z=e.zero;for(let E=q.length-1;E>=0;E--)Z=e.add(Z,q[E]);return Z}e.multiExp=async function(l,d,s,r){return await a(l,d,"jacobian",s,r)},e.multiExpAffine=async function(l,d,s,r){return await a(l,d,"affine",s,r)}}function ro(i,t){const e=i[t],n=i.Fr,o=e.tm;async function a(s,r,g,L,m,C){g=g||"affine",L=L||"affine";const A=14;let w,T,F,R,q,Z,E,f;t=="G1"?(g=="affine"?(w=e.F.n8*2,R="g1m_batchToJacobian"):w=e.F.n8*3,T=e.F.n8*3,r&&(f="g1m_fftFinal"),E="g1m_fftJoin",Z="g1m_fftMix",L=="affine"?(F=e.F.n8*2,q="g1m_batchToAffine"):F=e.F.n8*3):t=="G2"?(g=="affine"?(w=e.F.n8*2,R="g2m_batchToJacobian"):w=e.F.n8*3,T=e.F.n8*3,r&&(f="g2m_fftFinal"),E="g2m_fftJoin",Z="g2m_fftMix",L=="affine"?(F=e.F.n8*2,q="g2m_batchToAffine"):F=e.F.n8*3):t=="Fr"&&(w=e.n8,T=e.n8,F=e.n8,r&&(f="frm_fftFinal"),Z="frm_fftMix",E="frm_fftJoin");let y=!1;Array.isArray(s)?(s=xa(s,w),y=!0):s=s.slice(0,s.byteLength);const I=s.byteLength/w,k=he(I);if(1<<k!=I)throw new Error("fft must be multiple of 2");if(k==n.s+1){let U;return r?U=await l(s,g,L,m,C):U=await c(s,g,L,m,C),y?yi(U,F):U}let O;r&&(O=n.inv(n.e(I)));let x;Jc(s,w);let v,P=Math.min(1<<A,I),V=I/P;for(;V<o.concurrency&&P>=16;)V*=2,P/=2;const at=he(P),et=[];for(let U=0;U<V;U++){m&&m.debug(`${C}: fft ${k} mix start: ${U}/${V}`);const ct=[];ct.push({cmd:"ALLOC",var:0,len:T*P});const H=s.slice(P*U*w,P*(U+1)*w);ct.push({cmd:"SET",var:0,buff:H}),R&&ct.push({cmd:"CALL",fnName:R,params:[{var:0},{val:P},{var:0}]});for(let st=1;st<=at;st++)ct.push({cmd:"CALL",fnName:Z,params:[{var:0},{val:P},{val:st}]});at==k?(f&&(ct.push({cmd:"ALLOCSET",var:1,buff:O}),ct.push({cmd:"CALL",fnName:f,params:[{var:0},{val:P},{var:1}]})),q&&ct.push({cmd:"CALL",fnName:q,params:[{var:0},{val:P},{var:0}]}),ct.push({cmd:"GET",out:0,var:0,len:P*F})):ct.push({cmd:"GET",out:0,var:0,len:T*P}),et.push(o.queueAction(ct).then(st=>(m&&m.debug(`${C}: fft ${k} mix end: ${U}/${V}`),st)))}v=await Promise.all(et);for(let U=0;U<V;U++)v[U]=v[U][0];for(let U=at+1;U<=k;U++){m&&m.debug(`${C}: fft  ${k}  join: ${U}/${k}`);const ct=1<<k-U,H=V/ct,st=[];for(let vt=0;vt<ct;vt++)for(let Et=0;Et<H/2;Et++){const B=n.exp(n.w[U],Et*P),u=n.w[U],S=vt*H+Et,h=vt*H+Et+H/2,$=[];$.push({cmd:"ALLOCSET",var:0,buff:v[S]}),$.push({cmd:"ALLOCSET",var:1,buff:v[h]}),$.push({cmd:"ALLOCSET",var:2,buff:B}),$.push({cmd:"ALLOCSET",var:3,buff:u}),$.push({cmd:"CALL",fnName:E,params:[{var:0},{var:1},{val:P},{var:2},{var:3}]}),U==k?(f&&($.push({cmd:"ALLOCSET",var:4,buff:O}),$.push({cmd:"CALL",fnName:f,params:[{var:0},{val:P},{var:4}]}),$.push({cmd:"CALL",fnName:f,params:[{var:1},{val:P},{var:4}]})),q&&($.push({cmd:"CALL",fnName:q,params:[{var:0},{val:P},{var:0}]}),$.push({cmd:"CALL",fnName:q,params:[{var:1},{val:P},{var:1}]})),$.push({cmd:"GET",out:0,var:0,len:P*F}),$.push({cmd:"GET",out:1,var:1,len:P*F})):($.push({cmd:"GET",out:0,var:0,len:P*T}),$.push({cmd:"GET",out:1,var:1,len:P*T})),st.push(o.queueAction($).then(M=>(m&&m.debug(`${C}: fft ${k} join  ${U}/${k}  ${vt+1}/${ct} ${Et}/${H/2}`),M)))}const Mt=await Promise.all(st);for(let vt=0;vt<ct;vt++)for(let Et=0;Et<H/2;Et++){const B=vt*H+Et,u=vt*H+Et+H/2,S=Mt.shift();v[B]=S[0],v[u]=S[1]}}if(s instanceof $t?x=new $t(I*F):x=new Uint8Array(I*F),r){x.set(v[0].slice((P-1)*F));let U=F;for(let ct=V-1;ct>0;ct--)x.set(v[ct],U),U+=P*F,delete v[ct];x.set(v[0].slice(0,(P-1)*F),U),delete v[0]}else for(let U=0;U<V;U++)x.set(v[U],P*F*U),delete v[U];return y?yi(x,F):x}async function c(s,r,g,L,m){let C,A;C=s.slice(0,s.byteLength/2),A=s.slice(s.byteLength/2,s.byteLength);const w=[];[C,A]=await d(C,A,"fftJoinExt",n.one,n.shift,r,"jacobian",L,m),w.push(a(C,!1,"jacobian",g,L,m)),w.push(a(A,!1,"jacobian",g,L,m));const T=await Promise.all(w);let F;return T[0].byteLength>1<<28?F=new $t(T[0].byteLength*2):F=new Uint8Array(T[0].byteLength*2),F.set(T[0]),F.set(T[1],T[0].byteLength),F}async function l(s,r,g,L,m){let C,A;C=s.slice(0,s.byteLength/2),A=s.slice(s.byteLength/2,s.byteLength);const w=[];w.push(a(C,!0,r,"jacobian",L,m)),w.push(a(A,!0,r,"jacobian",L,m)),[C,A]=await Promise.all(w);const T=await d(C,A,"fftJoinExtInv",n.one,n.shiftInv,"jacobian",g,L,m);let F;return T[0].byteLength>1<<28?F=new $t(T[0].byteLength*2):F=new Uint8Array(T[0].byteLength*2),F.set(T[0]),F.set(T[1],T[0].byteLength),F}async function d(s,r,g,L,m,C,A,w,T){let q,Z,E,f,y,I;if(t=="G1")C=="affine"?(y=e.F.n8*2,Z="g1m_batchToJacobian"):y=e.F.n8*3,I=e.F.n8*3,q="g1m_"+g,A=="affine"?(E="g1m_batchToAffine",f=e.F.n8*2):f=e.F.n8*3;else if(t=="G2")C=="affine"?(y=e.F.n8*2,Z="g2m_batchToJacobian"):y=e.F.n8*3,q="g2m_"+g,I=e.F.n8*3,A=="affine"?(E="g2m_batchToAffine",f=e.F.n8*2):f=e.F.n8*3;else if(t=="Fr")y=n.n8,f=n.n8,I=n.n8,q="frm_"+g;else throw new Error("Invalid group");if(s.byteLength!=r.byteLength)throw new Error("Invalid buffer size");const k=Math.floor(s.byteLength/y);if(k!=1<<he(k))throw new Error("Invalid number of points");let O=Math.floor(k/o.concurrency);O<16&&(O=16),O>65536&&(O=65536);const x=[];for(let et=0;et<k;et+=O){w&&w.debug(`${T}: fftJoinExt Start: ${et}/${k}`);const U=Math.min(k-et,O),ct=n.mul(L,n.exp(m,et)),H=[],st=s.slice(et*y,(et+U)*y),Mt=r.slice(et*y,(et+U)*y);H.push({cmd:"ALLOC",var:0,len:I*U}),H.push({cmd:"SET",var:0,buff:st}),H.push({cmd:"ALLOC",var:1,len:I*U}),H.push({cmd:"SET",var:1,buff:Mt}),H.push({cmd:"ALLOCSET",var:2,buff:ct}),H.push({cmd:"ALLOCSET",var:3,buff:m}),Z&&(H.push({cmd:"CALL",fnName:Z,params:[{var:0},{val:U},{var:0}]}),H.push({cmd:"CALL",fnName:Z,params:[{var:1},{val:U},{var:1}]})),H.push({cmd:"CALL",fnName:q,params:[{var:0},{var:1},{val:U},{var:2},{var:3},{val:n.s}]}),E&&(H.push({cmd:"CALL",fnName:E,params:[{var:0},{val:U},{var:0}]}),H.push({cmd:"CALL",fnName:E,params:[{var:1},{val:U},{var:1}]})),H.push({cmd:"GET",out:0,var:0,len:U*f}),H.push({cmd:"GET",out:1,var:1,len:U*f}),x.push(o.queueAction(H).then(vt=>(w&&w.debug(`${T}: fftJoinExt End: ${et}/${k}`),vt)))}const v=await Promise.all(x);let P,V;k*f>1<<28?(P=new $t(k*f),V=new $t(k*f)):(P=new Uint8Array(k*f),V=new Uint8Array(k*f));let at=0;for(let et=0;et<v.length;et++)P.set(v[et][0],at),V.set(v[et][1],at),at+=v[et][0].byteLength;return[P,V]}e.fft=async function(s,r,g,L,m){return await a(s,!1,r,g,L,m)},e.ifft=async function(s,r,g,L,m){return await a(s,!0,r,g,L,m)},e.lagrangeEvaluations=async function(s,r,g,L,m){r=r||"affine",g=g||"affine";let C;if(t=="G1")r=="affine"?C=e.F.n8*2:C=e.F.n8*3;else if(t=="G2")r=="affine"?C=e.F.n8*2:C=e.F.n8*3;else if(t=="Fr")C=n.n8;else throw new Error("Invalid group");const A=s.byteLength/C,w=he(A);if(2**w*C!=s.byteLength)throw L&&L.error("lagrangeEvaluations iinvalid input size"),new Error("lagrangeEvaluations invalid Input size");if(w<=n.s)return await e.ifft(s,r,g,L,m);if(w>n.s+1)throw L&&L.error("lagrangeEvaluations input too big"),new Error("lagrangeEvaluations input too big");let T=s.slice(0,s.byteLength/2),F=s.slice(s.byteLength/2,s.byteLength);const R=n.exp(n.shift,A/2),q=n.inv(n.sub(n.one,R));[T,F]=await d(T,F,"prepareLagrangeEvaluation",q,n.shiftInv,r,"jacobian",L,m+" prep");const Z=[];Z.push(a(T,!0,"jacobian",g,L,m+" t0")),Z.push(a(F,!0,"jacobian",g,L,m+" t1")),[T,F]=await Promise.all(Z);let E;return T.byteLength>1<<28?E=new $t(T.byteLength*2):E=new Uint8Array(T.byteLength*2),E.set(T),E.set(F,T.byteLength),E},e.fftMix=async function(r){const g=e.F.n8*3;let L,m;if(t=="G1")L="g1m_fftMix",m="g1m_fftJoin";else if(t=="G2")L="g2m_fftMix",m="g2m_fftJoin";else if(t=="Fr")L="frm_fftMix",m="frm_fftJoin";else throw new Error("Invalid group");const C=Math.floor(r.byteLength/g),A=he(C);let w=1<<he(o.concurrency);C<=w*2&&(w=1);const T=C/w,F=he(T),R=[];for(let y=0;y<w;y++){const I=[],k=r.slice(y*T*g,(y+1)*T*g);I.push({cmd:"ALLOCSET",var:0,buff:k});for(let O=1;O<=F;O++)I.push({cmd:"CALL",fnName:L,params:[{var:0},{val:T},{val:O}]});I.push({cmd:"GET",out:0,var:0,len:T*g}),R.push(o.queueAction(I))}const q=await Promise.all(R),Z=[];for(let y=0;y<q.length;y++)Z[y]=q[y][0];for(let y=F+1;y<=A;y++){const I=1<<A-y,k=w/I,O=[];for(let v=0;v<I;v++)for(let P=0;P<k/2;P++){const V=n.exp(n.w[y],P*T),at=n.w[y],et=v*k+P,U=v*k+P+k/2,ct=[];ct.push({cmd:"ALLOCSET",var:0,buff:Z[et]}),ct.push({cmd:"ALLOCSET",var:1,buff:Z[U]}),ct.push({cmd:"ALLOCSET",var:2,buff:V}),ct.push({cmd:"ALLOCSET",var:3,buff:at}),ct.push({cmd:"CALL",fnName:m,params:[{var:0},{var:1},{val:T},{var:2},{var:3}]}),ct.push({cmd:"GET",out:0,var:0,len:T*g}),ct.push({cmd:"GET",out:1,var:1,len:T*g}),O.push(o.queueAction(ct))}const x=await Promise.all(O);for(let v=0;v<I;v++)for(let P=0;P<k/2;P++){const V=v*k+P,at=v*k+P+k/2,et=x.shift();Z[V]=et[0],Z[at]=et[1]}}let E;r instanceof $t?E=new $t(C*g):E=new Uint8Array(C*g);let f=0;for(let y=0;y<w;y++)E.set(Z[y],f),f+=Z[y].byteLength;return E},e.fftJoin=async function(r,g,L,m){const C=e.F.n8*3;let A;if(t=="G1")A="g1m_fftJoin";else if(t=="G2")A="g2m_fftJoin";else if(t=="Fr")A="frm_fftJoin";else throw new Error("Invalid group");if(r.byteLength!=g.byteLength)throw new Error("Invalid buffer size");const w=Math.floor(r.byteLength/C);if(w!=1<<he(w))throw new Error("Invalid number of points");let T=1<<he(o.concurrency);w<=T*2&&(T=1);const F=w/T,R=[];for(let y=0;y<T;y++){const I=[],k=n.mul(L,n.exp(m,y*F)),O=r.slice(y*F*C,(y+1)*F*C),x=g.slice(y*F*C,(y+1)*F*C);I.push({cmd:"ALLOCSET",var:0,buff:O}),I.push({cmd:"ALLOCSET",var:1,buff:x}),I.push({cmd:"ALLOCSET",var:2,buff:k}),I.push({cmd:"ALLOCSET",var:3,buff:m}),I.push({cmd:"CALL",fnName:A,params:[{var:0},{var:1},{val:F},{var:2},{var:3}]}),I.push({cmd:"GET",out:0,var:0,len:F*C}),I.push({cmd:"GET",out:1,var:1,len:F*C}),R.push(o.queueAction(I))}const q=await Promise.all(R);let Z,E;r instanceof $t?(Z=new $t(w*C),E=new $t(w*C)):(Z=new Uint8Array(w*C),E=new Uint8Array(w*C));let f=0;for(let y=0;y<q.length;y++)Z.set(q[y][0],f),E.set(q[y][1],f),f+=q[y][0].byteLength;return[Z,E]},e.fftFinal=async function(r,g){const L=e.F.n8*3,m=e.F.n8*2;let C,A;if(t=="G1")C="g1m_fftFinal",A="g1m_batchToAffine";else if(t=="G2")C="g2m_fftFinal",A="g2m_batchToAffine";else throw new Error("Invalid group");const w=Math.floor(r.byteLength/L);if(w!=1<<he(w))throw new Error("Invalid number of points");const T=Math.floor(w/o.concurrency),F=[];for(let E=0;E<o.concurrency;E++){let f;if(E<o.concurrency-1?f=T:f=w-E*T,f==0)continue;const y=[],I=r.slice(E*T*L,(E*T+f)*L);y.push({cmd:"ALLOCSET",var:0,buff:I}),y.push({cmd:"ALLOCSET",var:1,buff:g}),y.push({cmd:"CALL",fnName:C,params:[{var:0},{val:f},{var:1}]}),y.push({cmd:"CALL",fnName:A,params:[{var:0},{val:f},{var:0}]}),y.push({cmd:"GET",out:0,var:0,len:f*m}),F.push(o.queueAction(y))}const R=await Promise.all(F);let q;r instanceof $t?q=new $t(w*m):q=new Uint8Array(w*m);let Z=0;for(let E=R.length-1;E>=0;E--)q.set(R[E][0],Z),Z+=R[E][0].byteLength;return q}}async function Yc(i){const t=await fg(i.wasm,i.singleThread),e={};return e.q=te(i.wasm.q.toString()),e.r=te(i.wasm.r.toString()),e.name=i.name,e.tm=t,e.prePSize=i.wasm.prePSize,e.preQSize=i.wasm.preQSize,e.Fr=new Xr(t,"frm",i.n8r,i.r),e.F1=new Xr(t,"f1m",i.n8q,i.q),e.F2=new Yr(t,"f2m",e.F1),e.G1=new Kr(t,"g1m",e.F1,i.wasm.pG1gen,i.wasm.pG1b,i.cofactorG1),e.G2=new Kr(t,"g2m",e.F2,i.wasm.pG2gen,i.wasm.pG2b,i.cofactorG2),e.F6=new sg(t,"f6m",e.F2),e.F12=new Yr(t,"ftm",e.F6),e.Gt=e.F12,ao(e,"G1"),ao(e,"G2"),ao(e,"Fr"),ns(e,"G1"),ns(e,"G2"),ro(e,"G1"),ro(e,"G2"),ro(e,"Fr"),_g(e),e.array2buffer=function(n,o){const a=new Uint8Array(o*n.length);for(let c=0;c<n.length;c++)a.set(n[c],c*o);return a},e.buffer2array=function(n,o){const a=n.byteLength/o,c=new Array(a);for(let l=0;l<a;l++)c[l]=n.slice(l*o,l*o+o);return c},e}var pe={};const ue=Qe.exports;function qe(i){let t;return typeof i=="string"&&i.slice(0,2).toLowerCase()=="0x"?t=ue(i.slice(2),16):t=ue(i),t}function pg(i){const t=[],e=qe(i);return t.push(e.and(255).toJSNumber()),t.push(e.shiftRight(8).and(255).toJSNumber()),t.push(e.shiftRight(16).and(255).toJSNumber()),t.push(e.shiftRight(24).and(255).toJSNumber()),t}function gg(i){const t=[],e=qe(i);return t.push(e.and(255).toJSNumber()),t.push(e.shiftRight(8).and(255).toJSNumber()),t.push(e.shiftRight(16).and(255).toJSNumber()),t.push(e.shiftRight(24).and(255).toJSNumber()),t.push(e.shiftRight(32).and(255).toJSNumber()),t.push(e.shiftRight(40).and(255).toJSNumber()),t.push(e.shiftRight(48).and(255).toJSNumber()),t.push(e.shiftRight(56).and(255).toJSNumber()),t}function mg(i){for(var t=[],e=0;e<i.length;e++){var n=i.charCodeAt(e);n<128?t.push(n):n<2048?t.push(192|n>>6,128|n&63):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|n&63):(e++,n=65536+((n&1023)<<10|i.charCodeAt(e)&1023),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return t}function yg(i){const t=mg(i);return[...tl(t.length),...t]}function Oa(i){const t=[];let e=qe(i);if(e.isNegative())throw new Error("Number cannot be negative");for(;!e.isZero();)t.push(e.and(127).toJSNumber()),e=e.shiftRight(7);t.length==0&&t.push(0);for(let n=0;n<t.length-1;n++)t[n]=t[n]|128;return t}function Kc(i){let t,e;const n=i.bitLength().toJSNumber();i<0?(e=!0,t=ue.one.shiftLeft(n).add(i)):(e=!1,t=qe(i));const o=7-n%7,a=ue.one.shiftLeft(o).minus(1).shiftLeft(n),c=(1<<7-o)-1|128,l=Oa(t.add(a));return e||(l[l.length-1]=l[l.length-1]&c),l}function Lg(i){let t=qe(i);if(t.greater(ue("FFFFFFFF",16)))throw new Error("Number too big");if(t.greater(ue("7FFFFFFF",16))&&(t=t.minus(ue("100000000",16))),t.lesser(ue("-80000000",16)))throw new Error("Number too small");return Kc(t)}function bg(i){let t=qe(i);if(t.greater(ue("FFFFFFFFFFFFFFFF",16)))throw new Error("Number too big");if(t.greater(ue("7FFFFFFFFFFFFFFF",16))&&(t=t.minus(ue("10000000000000000",16))),t.lesser(ue("-8000000000000000",16)))throw new Error("Number too small");return Kc(t)}function tl(i){let t=qe(i);if(t.greater(ue("FFFFFFFF",16)))throw new Error("Number too big");return Oa(t)}function vg(i){let t=qe(i);if(t.greater(ue("FFFFFFFFFFFFFFFF",16)))throw new Error("Number too big");return Oa(t)}function wg(i){return Array.from(i,function(t){return("0"+(t&255).toString(16)).slice(-2)}).join("")}function el(i){if(typeof i=="string"){let t=i.split(`
`);for(let e=0;e<t.length;e++)t[e]&&(t[e]="    "+t[e]);return t.join(`
`)}else if(Array.isArray(i)){for(let t=0;t<i.length;t++)i[t]=el(i[t]);return i}}pe.toNumber=qe;pe.u32=pg;pe.u64=gg;pe.varuint32=tl;pe.varuint64=vg;pe.varint32=Lg;pe.varint64=bg;pe.string=yg;pe.toHexString=wg;pe.ident=el;const Vt=pe;class Eg{constructor(t){this.func=t,this.functionName=t.functionName,this.module=t.module}setLocal(t,e){const n=this.func.localIdxByName[t];if(n===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...e,33,...Vt.varuint32(n)]}teeLocal(t,e){const n=this.func.localIdxByName[t];if(n===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...e,34,...Vt.varuint32(n)]}getLocal(t){const e=this.func.localIdxByName[t];if(e===void 0)throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[32,...Vt.varuint32(e)]}i64_load8_s(t,e,n){const o=e||0,a=n===void 0?0:n;return[...t,48,a,...Vt.varuint32(o)]}i64_load8_u(t,e,n){const o=e||0,a=n===void 0?0:n;return[...t,49,a,...Vt.varuint32(o)]}i64_load16_s(t,e,n){const o=e||0,a=n===void 0?1:n;return[...t,50,a,...Vt.varuint32(o)]}i64_load16_u(t,e,n){const o=e||0,a=n===void 0?1:n;return[...t,51,a,...Vt.varuint32(o)]}i64_load32_s(t,e,n){const o=e||0,a=n===void 0?2:n;return[...t,52,a,...Vt.varuint32(o)]}i64_load32_u(t,e,n){const o=e||0,a=n===void 0?2:n;return[...t,53,a,...Vt.varuint32(o)]}i64_load(t,e,n){const o=e||0,a=n===void 0?3:n;return[...t,41,a,...Vt.varuint32(o)]}i64_store(t,e,n,o){let a,c,l;return Array.isArray(e)?(a=0,c=3,l=e):Array.isArray(n)?(a=e,c=3,l=n):Array.isArray(o)&&(a=e,c=n,l=o),[...t,...l,55,c,...Vt.varuint32(a)]}i64_store32(t,e,n,o){let a,c,l;return Array.isArray(e)?(a=0,c=2,l=e):Array.isArray(n)?(a=e,c=2,l=n):Array.isArray(o)&&(a=e,c=n,l=o),[...t,...l,62,c,...Vt.varuint32(a)]}i64_store16(t,e,n,o){let a,c,l;return Array.isArray(e)?(a=0,c=1,l=e):Array.isArray(n)?(a=e,c=1,l=n):Array.isArray(o)&&(a=e,c=n,l=o),[...t,...l,61,c,...Vt.varuint32(a)]}i64_store8(t,e,n,o){let a,c,l;return Array.isArray(e)?(a=0,c=0,l=e):Array.isArray(n)?(a=e,c=0,l=n):Array.isArray(o)&&(a=e,c=n,l=o),[...t,...l,60,c,...Vt.varuint32(a)]}i32_load8_s(t,e,n){const o=e||0,a=n===void 0?0:n;return[...t,44,a,...Vt.varuint32(o)]}i32_load8_u(t,e,n){const o=e||0,a=n===void 0?0:n;return[...t,45,a,...Vt.varuint32(o)]}i32_load16_s(t,e,n){const o=e||0,a=n===void 0?1:n;return[...t,46,a,...Vt.varuint32(o)]}i32_load16_u(t,e,n){const o=e||0,a=n===void 0?1:n;return[...t,47,a,...Vt.varuint32(o)]}i32_load(t,e,n){const o=e||0,a=n===void 0?2:n;return[...t,40,a,...Vt.varuint32(o)]}i32_store(t,e,n,o){let a,c,l;return Array.isArray(e)?(a=0,c=2,l=e):Array.isArray(n)?(a=e,c=2,l=n):Array.isArray(o)&&(a=e,c=n,l=o),[...t,...l,54,c,...Vt.varuint32(a)]}i32_store16(t,e,n,o){let a,c,l;return Array.isArray(e)?(a=0,c=1,l=e):Array.isArray(n)?(a=e,c=1,l=n):Array.isArray(o)&&(a=e,c=n,l=o),[...t,...l,59,c,...Vt.varuint32(a)]}i32_store8(t,e,n,o){let a,c,l;return Array.isArray(e)?(a=0,c=0,l=e):Array.isArray(n)?(a=e,c=0,l=n):Array.isArray(o)&&(a=e,c=n,l=o),[...t,...l,58,c,...Vt.varuint32(a)]}call(t,...e){const n=this.module.functionIdxByName[t];if(n===void 0)throw new Error(`Function not defined: Function: ${t}`);return[...[].concat(...e),16,...Vt.varuint32(n)]}call_indirect(t,...e){return[...[].concat(...e),...t,17,0,0]}if(t,e,n){return n?[...t,4,64,...e,5,...n,11]:[...t,4,64,...e,11]}block(t){return[2,64,...t,11]}loop(...t){return[3,64,...[].concat(...t),11]}br_if(t,e){return[...e,13,...Vt.varuint32(t)]}br(t){return[12,...Vt.varuint32(t)]}ret(t){return[...t,15]}drop(t){return[...t,26]}i64_const(t){return[66,...Vt.varint64(t)]}i32_const(t){return[65,...Vt.varint32(t)]}i64_eqz(t){return[...t,80]}i64_eq(t,e){return[...t,...e,81]}i64_ne(t,e){return[...t,...e,82]}i64_lt_s(t,e){return[...t,...e,83]}i64_lt_u(t,e){return[...t,...e,84]}i64_gt_s(t,e){return[...t,...e,85]}i64_gt_u(t,e){return[...t,...e,86]}i64_le_s(t,e){return[...t,...e,87]}i64_le_u(t,e){return[...t,...e,88]}i64_ge_s(t,e){return[...t,...e,89]}i64_ge_u(t,e){return[...t,...e,90]}i64_add(t,e){return[...t,...e,124]}i64_sub(t,e){return[...t,...e,125]}i64_mul(t,e){return[...t,...e,126]}i64_div_s(t,e){return[...t,...e,127]}i64_div_u(t,e){return[...t,...e,128]}i64_rem_s(t,e){return[...t,...e,129]}i64_rem_u(t,e){return[...t,...e,130]}i64_and(t,e){return[...t,...e,131]}i64_or(t,e){return[...t,...e,132]}i64_xor(t,e){return[...t,...e,133]}i64_shl(t,e){return[...t,...e,134]}i64_shr_s(t,e){return[...t,...e,135]}i64_shr_u(t,e){return[...t,...e,136]}i64_extend_i32_s(t){return[...t,172]}i64_extend_i32_u(t){return[...t,173]}i64_clz(t){return[...t,121]}i64_ctz(t){return[...t,122]}i32_eqz(t){return[...t,69]}i32_eq(t,e){return[...t,...e,70]}i32_ne(t,e){return[...t,...e,71]}i32_lt_s(t,e){return[...t,...e,72]}i32_lt_u(t,e){return[...t,...e,73]}i32_gt_s(t,e){return[...t,...e,74]}i32_gt_u(t,e){return[...t,...e,75]}i32_le_s(t,e){return[...t,...e,76]}i32_le_u(t,e){return[...t,...e,77]}i32_ge_s(t,e){return[...t,...e,78]}i32_ge_u(t,e){return[...t,...e,79]}i32_add(t,e){return[...t,...e,106]}i32_sub(t,e){return[...t,...e,107]}i32_mul(t,e){return[...t,...e,108]}i32_div_s(t,e){return[...t,...e,109]}i32_div_u(t,e){return[...t,...e,110]}i32_rem_s(t,e){return[...t,...e,111]}i32_rem_u(t,e){return[...t,...e,112]}i32_and(t,e){return[...t,...e,113]}i32_or(t,e){return[...t,...e,114]}i32_xor(t,e){return[...t,...e,115]}i32_shl(t,e){return[...t,...e,116]}i32_shr_s(t,e){return[...t,...e,117]}i32_shr_u(t,e){return[...t,...e,118]}i32_rotl(t,e){return[...t,...e,119]}i32_rotr(t,e){return[...t,...e,120]}i32_wrap_i64(t){return[...t,167]}i32_clz(t){return[...t,103]}i32_ctz(t){return[...t,104]}unreachable(){return[0]}current_memory(){return[63,0]}comment(){return[]}}var Fg=Eg;const Cg=Fg,Kn=pe,so={i32:127,i64:126,f32:125,f64:124,anyfunc:112,func:96,emptyblock:64};class Ag{constructor(t,e,n,o,a){if(n=="import")this.fnType="import",this.moduleName=o,this.fieldName=a;else if(n=="internal")this.fnType="internal";else throw new Error("Invalid function fnType: "+n);this.module=t,this.fnName=e,this.params=[],this.locals=[],this.localIdxByName={},this.code=[],this.returnType=null,this.nextLocal=0}addParam(t,e){if(this.localIdxByName[t])throw new Error(`param already exists. Function: ${this.fnName}, Param: ${t} `);const n=this.nextLocal++;this.localIdxByName[t]=n,this.params.push({type:e})}addLocal(t,e,n){const o=n||1;if(this.localIdxByName[t])throw new Error(`local already exists. Function: ${this.fnName}, Param: ${t} `);const a=this.nextLocal++;this.localIdxByName[t]=a,this.locals.push({type:e,length:o})}setReturnType(t){if(this.returnType)throw new Error(`returnType already defined. Function: ${this.fnName}`);this.returnType=t}getSignature(){const t=[...Kn.varuint32(this.params.length),...this.params.map(n=>so[n.type])],e=this.returnType?[1,so[this.returnType]]:[0];return[96,...t,...e]}getBody(){const t=this.locals.map(n=>[...Kn.varuint32(n.length),so[n.type]]),e=[...Kn.varuint32(this.locals.length),...[].concat(...t),...this.code,11];return[...Kn.varuint32(e.length),...e]}addCode(...t){this.code.push(...[].concat(...t))}getCodeBuilder(){return new Cg(this)}}var Sg=Ag;const is=Sg,zt=pe;class xg{constructor(){this.functions=[],this.functionIdxByName={},this.nImportFunctions=0,this.nInternalFunctions=0,this.memory={pagesSize:1,moduleName:"env",fieldName:"memory"},this.free=8,this.datas=[],this.modules={},this.exports=[],this.functionsTable=[]}build(){return this._setSignatures(),new Uint8Array([...zt.u32(1836278016),...zt.u32(1),...this._buildType(),...this._buildImport(),...this._buildFunctionDeclarations(),...this._buildFunctionsTable(),...this._buildExports(),...this._buildElements(),...this._buildCode(),...this._buildData()])}addFunction(t){if(typeof this.functionIdxByName[t]<"u")throw new Error(`Function already defined: ${t}`);const e=this.functions.length;return this.functionIdxByName[t]=e,this.functions.push(new is(this,t,"internal")),this.nInternalFunctions++,this.functions[e]}addIimportFunction(t,e,n){if(typeof this.functionIdxByName[t]<"u")throw new Error(`Function already defined: ${t}`);if(this.functions.length>0&&this.functions[this.functions.length-1].type=="internal")throw new Error(`Import functions must be declared before internal: ${t}`);let o=n||t;const a=this.functions.length;return this.functionIdxByName[t]=a,this.functions.push(new is(this,t,"import",e,o)),this.nImportFunctions++,this.functions[a]}setMemory(t,e,n){this.memory={pagesSize:t,moduleName:e||"env",fieldName:n||"memory"}}exportFunction(t,e){const n=e||t;if(typeof this.functionIdxByName[t]>"u")throw new Error(`Function not defined: ${t}`);const o=this.functionIdxByName[t];n!=t&&(this.functionIdxByName[n]=o),this.exports.push({exportName:n,idx:o})}addFunctionToTable(t){const e=this.functionIdxByName[t];this.functionsTable.push(e)}addData(t,e){this.datas.push({offset:t,bytes:e})}alloc(t,e){let n,o;(Array.isArray(t)||ArrayBuffer.isView(t))&&typeof e>"u"?(n=t.length,o=t):(n=t,o=e),n=(n-1>>3)+1<<3;const a=this.free;return this.free+=n,o&&this.addData(a,o),a}allocString(t){const n=new globalThis.TextEncoder().encode(t);return this.alloc([...n,0])}_setSignatures(){this.signatures=[];const t={};if(this.functionsTable.length>0){const e=this.functions[this.functionsTable[0]].getSignature(),n="s_"+zt.toHexString(e);t[n]=0,this.signatures.push(e)}for(let e=0;e<this.functions.length;e++){const n=this.functions[e].getSignature(),o="s_"+zt.toHexString(n);typeof t[o]>"u"&&(t[o]=this.signatures.length,this.signatures.push(n)),this.functions[e].signatureIdx=t[o]}}_buildSection(t,e){return[t,...zt.varuint32(e.length),...e]}_buildType(){return this._buildSection(1,[...zt.varuint32(this.signatures.length),...[].concat(...this.signatures)])}_buildImport(){const t=[];t.push([...zt.string(this.memory.moduleName),...zt.string(this.memory.fieldName),2,0,...zt.varuint32(this.memory.pagesSize)]);for(let e=0;e<this.nImportFunctions;e++)t.push([...zt.string(this.functions[e].moduleName),...zt.string(this.functions[e].fieldName),0,...zt.varuint32(this.functions[e].signatureIdx)]);return this._buildSection(2,zt.varuint32(t.length).concat(...t))}_buildFunctionDeclarations(){const t=[];for(let e=this.nImportFunctions;e<this.nImportFunctions+this.nInternalFunctions;e++)t.push(...zt.varuint32(this.functions[e].signatureIdx));return this._buildSection(3,[...zt.varuint32(t.length),...t])}_buildFunctionsTable(){return this.functionsTable.length==0?[]:this._buildSection(4,[...zt.varuint32(1),112,0,...zt.varuint32(this.functionsTable.length)])}_buildElements(){if(this.functionsTable.length==0)return[];const t=[];for(let e=0;e<this.functionsTable.length;e++)t.push(...zt.varuint32(this.functionsTable[e]));return this._buildSection(9,[...zt.varuint32(1),...zt.varuint32(0),65,...zt.varint32(0),11,...zt.varuint32(this.functionsTable.length),...t])}_buildExports(){const t=[];for(let e=0;e<this.exports.length;e++)t.push([...zt.string(this.exports[e].exportName),0,...zt.varuint32(this.exports[e].idx)]);return this._buildSection(7,zt.varuint32(t.length).concat(...t))}_buildCode(){const t=[];for(let e=this.nImportFunctions;e<this.nImportFunctions+this.nInternalFunctions;e++)t.push(this.functions[e].getBody());return this._buildSection(10,zt.varuint32(t.length).concat(...t))}_buildData(){const t=[];t.push([0,65,0,11,4,...zt.u32(this.free)]);for(let e=0;e<this.datas.length;e++)t.push([0,65,...zt.varint32(this.datas[e].offset),11,...zt.varuint32(this.datas[e].bytes.length),...this.datas[e].bytes]);return this._buildSection(11,zt.varuint32(t.length).concat(...t))}}var Og=xg,nl=Og;globalThis.curve_bn128=null;async function Ig(i,t){const e=new nl;e.setMemory(25),Np(e),t&&t(e);const n={};if(n.code=e.build(),n.pq=e.modules.f1m.pq,n.pr=e.modules.frm.pq,n.pG1gen=e.modules.bn128.pG1gen,n.pG1zero=e.modules.bn128.pG1zero,n.pG1b=e.modules.bn128.pG1b,n.pG2gen=e.modules.bn128.pG2gen,n.pG2zero=e.modules.bn128.pG2zero,n.pG2b=e.modules.bn128.pG2b,n.pOneT=e.modules.bn128.pOneT,n.prePSize=e.modules.bn128.prePSize,n.preQSize=e.modules.bn128.preQSize,n.n8q=32,n.n8r=32,n.q=e.modules.bn128.q,n.r=e.modules.bn128.r,!i&&globalThis.curve_bn128)return globalThis.curve_bn128;const o={name:"bn128",wasm:n,q:te("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:te("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:te("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!i},a=await Yc(o);return a.terminate=async function(){o.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},i||(globalThis.curve_bn128=a),a}globalThis.curve_bls12381=null;async function Bg(i,t){const e=new nl;e.setMemory(25),Dp(e),t&&t(e);const n={};if(n.code=e.build(),n.pq=e.modules.f1m.pq,n.pr=e.modules.frm.pq,n.pG1gen=e.modules.bls12381.pG1gen,n.pG1zero=e.modules.bls12381.pG1zero,n.pG1b=e.modules.bls12381.pG1b,n.pG2gen=e.modules.bls12381.pG2gen,n.pG2zero=e.modules.bls12381.pG2zero,n.pG2b=e.modules.bls12381.pG2b,n.pOneT=e.modules.bls12381.pOneT,n.prePSize=e.modules.bls12381.prePSize,n.preQSize=e.modules.bls12381.preQSize,n.n8q=48,n.n8r=32,n.q=e.modules.bls12381.q,n.r=e.modules.bls12381.r,!i&&globalThis.curve_bls12381)return globalThis.curve_bls12381;const o={name:"bls12381",wasm:n,q:te("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:te("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:te("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:te("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!i},a=await Yc(o);return a.terminate=async function(){o.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},i||(globalThis.curve_bls12381=a),a}te("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16);te("21888242871839275222246405745257275088548364400416034343698204186575808495617");te("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16);te("21888242871839275222246405745257275088696311157297823662689037894645226208583");const Wt=W_,Ia=rg;Wt.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16);Wt.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");const Pg=Wt.e("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),Tg=Wt.e("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function il(i){let t;if(Wt.eq(i,Tg))t=await Ig();else if(Wt.eq(i,Pg))t=await Bg();else throw new Error(`Curve not supported: ${Wt.toString(i)}`);return t}function Ba(i){return((i&4294901760)!==0?(i&=4294901760,16):0)|((i&4278255360)!==0?(i&=4278255360,8):0)|((i&4042322160)!==0?(i&=4042322160,4):0)|((i&3435973836)!==0?(i&=3435973836,2):0)|(i&2863311530)!==0}async function we(i,t,e){const n=await i.read(t.G1.F.n8*2),o=t.G1.fromRprLEM(n,0);return e?t.G1.toObject(o):o}async function ci(i,t,e){const n=await i.read(t.G2.F.n8*2),o=t.G2.fromRprLEM(n,0);return e?t.G2.toObject(o):o}async function Mg(i,t,e){await Ii(i,t,1);const n=await i.readULE32();if(await Bi(i),n==1)return await qg(i,t,e);if(n==2)return await kg(i,t,e);throw new Error("Protocol not supported: ")}async function qg(i,t,e){const n={};n.protocol="groth16",await Ii(i,t,2);const o=await i.readULE32();n.n8q=o,n.q=await jn(i,o);const a=await i.readULE32();return n.n8r=a,n.r=await jn(i,a),n.curve=await il(n.q),n.nVars=await i.readULE32(),n.nPublic=await i.readULE32(),n.domainSize=await i.readULE32(),n.power=Ba(n.domainSize),n.vk_alpha_1=await we(i,n.curve,e),n.vk_beta_1=await we(i,n.curve,e),n.vk_beta_2=await ci(i,n.curve,e),n.vk_gamma_2=await ci(i,n.curve,e),n.vk_delta_1=await we(i,n.curve,e),n.vk_delta_2=await ci(i,n.curve,e),await Bi(i),n}async function kg(i,t,e){const n={};n.protocol="plonk",await Ii(i,t,2);const o=await i.readULE32();n.n8q=o,n.q=await jn(i,o);const a=await i.readULE32();return n.n8r=a,n.r=await jn(i,a),n.curve=await il(n.q),n.nVars=await i.readULE32(),n.nPublic=await i.readULE32(),n.domainSize=await i.readULE32(),n.power=Ba(n.domainSize),n.nAdditions=await i.readULE32(),n.nConstrains=await i.readULE32(),n.k1=await i.read(a),n.k2=await i.read(a),n.Qm=await we(i,n.curve,e),n.Ql=await we(i,n.curve,e),n.Qr=await we(i,n.curve,e),n.Qo=await we(i,n.curve,e),n.Qc=await we(i,n.curve,e),n.S1=await we(i,n.curve,e),n.S2=await we(i,n.curve,e),n.S3=await we(i,n.curve,e),n.X_2=await ci(i,n.curve,e),await Bi(i),n}async function Rg(i,t,e){await jr(i,1);const n=(Math.floor((Wt.bitLength(e)-1)/64)+1)*8;if(await i.writeULE32(n),await u2(i,e,n),t.byteLength%n!=0)throw new Error("Invalid witness length");await i.writeULE32(t.byteLength/n),await Ur(i),await jr(i,2),await i.write(t),await Ur(i)}async function Ng(i,t){await Ii(i,t,1);const e=await i.readULE32(),n=await jn(i,e),o=await i.readULE32();return await Bi(i),{n8:e,q:n,nWitness:o}}const{stringifyBigInts:os}=Ia;async function Dg(i,t,e){const{fd:n,sections:o}=await zr(t,"wtns",2,33554432,8388608),a=await Ng(n,o),{fd:c,sections:l}=await zr(i,"zkey",2,1<<25,1<<23),d=await Mg(c,l);if(d.protocol!="groth16")throw new Error("zkey file is not groth16");if(!Wt.eq(d.r,a.q))throw new Error("Curve of the witness does not match the curve of the proving key");if(a.nWitness!=d.nVars)throw new Error(`Invalid witness length. Circuit: ${d.nVars}, witness: ${a.nWitness}`);const s=d.curve,r=s.Fr,g=s.G1,L=s.G2,m=Ba(d.domainSize);e&&e.debug("Reading Wtns");const C=await Ge(n,o,2);e&&e.debug("Reading Coeffs");const A=await Ge(c,l,4);e&&e.debug("Building ABC");const[w,T,F]=await zg(s,d,C,A,e),R=m==r.s?s.Fr.shift:s.Fr.w[m+1],q=await r.ifft(w,"","",e,"IFFT_A"),Z=await r.batchApplyKey(q,r.e(1),R),E=await r.fft(Z,"","",e,"FFT_A"),f=await r.ifft(T,"","",e,"IFFT_B"),y=await r.batchApplyKey(f,r.e(1),R),I=await r.fft(y,"","",e,"FFT_B"),k=await r.ifft(F,"","",e,"IFFT_C"),O=await r.batchApplyKey(k,r.e(1),R),x=await r.fft(O,"","",e,"FFT_C");e&&e.debug("Join ABC");const v=await jg(s,d,E,I,x,e);let P={};e&&e.debug("Reading A Points");const V=await Ge(c,l,5);P.pi_a=await s.G1.multiExpAffine(V,C,e,"multiexp A"),e&&e.debug("Reading B1 Points");const at=await Ge(c,l,6);let et=await s.G1.multiExpAffine(at,C,e,"multiexp B1");e&&e.debug("Reading B2 Points");const U=await Ge(c,l,7);P.pi_b=await s.G2.multiExpAffine(U,C,e,"multiexp B2"),e&&e.debug("Reading C Points");const ct=await Ge(c,l,8);P.pi_c=await s.G1.multiExpAffine(ct,C.slice((d.nPublic+1)*s.Fr.n8),e,"multiexp C"),e&&e.debug("Reading H Points");const H=await Ge(c,l,9),st=await s.G1.multiExpAffine(H,v,e,"multiexp H"),Mt=s.Fr.random(),vt=s.Fr.random();P.pi_a=g.add(P.pi_a,d.vk_alpha_1),P.pi_a=g.add(P.pi_a,g.timesFr(d.vk_delta_1,Mt)),P.pi_b=L.add(P.pi_b,d.vk_beta_2),P.pi_b=L.add(P.pi_b,L.timesFr(d.vk_delta_2,vt)),et=g.add(et,d.vk_beta_1),et=g.add(et,g.timesFr(d.vk_delta_1,vt)),P.pi_c=g.add(P.pi_c,st),P.pi_c=g.add(P.pi_c,g.timesFr(P.pi_a,vt)),P.pi_c=g.add(P.pi_c,g.timesFr(et,Mt)),P.pi_c=g.add(P.pi_c,g.timesFr(d.vk_delta_1,r.neg(r.mul(Mt,vt))));let Et=[];for(let B=1;B<=d.nPublic;B++){const u=C.slice(B*r.n8,B*r.n8+r.n8);Et.push(Wt.fromRprLE(u))}return P.pi_a=g.toObject(g.toAffine(P.pi_a)),P.pi_b=L.toObject(L.toAffine(P.pi_b)),P.pi_c=g.toObject(g.toAffine(P.pi_c)),P.protocol="groth16",P.curve=s.name,await c.close(),await n.close(),P=os(P),Et=os(Et),{proof:P,publicSignals:Et}}async function zg(i,t,e,n,o){const a=i.Fr.n8,c=4*3+t.n8r,l=(n.byteLength-4)/c,d=new $t(t.domainSize*a),s=new $t(t.domainSize*a),r=new $t(t.domainSize*a),g=[d,s];for(let L=0;L<l;L++){o&&L%1e6==0&&o.debug(`QAP AB: ${L}/${l}`);const m=n.slice(4+L*c,4+L*c+c),C=new DataView(m.buffer),A=C.getUint32(0,!0),w=C.getUint32(4,!0),T=C.getUint32(8,!0),F=m.slice(12,12+a);g[A].set(i.Fr.add(g[A].slice(w*a,w*a+a),i.Fr.mul(F,e.slice(T*a,T*a+a))),w*a)}for(let L=0;L<t.domainSize;L++)o&&L%1e6==0&&o.debug(`QAP C: ${L}/${t.domainSize}`),r.set(i.Fr.mul(d.slice(L*a,L*a+a),s.slice(L*a,L*a+a)),L*a);return[d,s,r]}async function jg(i,t,e,n,o,a){const l=i.Fr.n8,d=Math.floor(e.byteLength/i.Fr.n8),s=[];for(let m=0;m<d;m+=4194304){a&&a.debug(`JoinABC: ${m}/${d}`);const C=Math.min(d-m,4194304),A=[],w=e.slice(m*l,(m+C)*l),T=n.slice(m*l,(m+C)*l),F=o.slice(m*l,(m+C)*l);A.push({cmd:"ALLOCSET",var:0,buff:w}),A.push({cmd:"ALLOCSET",var:1,buff:T}),A.push({cmd:"ALLOCSET",var:2,buff:F}),A.push({cmd:"ALLOC",var:3,len:C*l}),A.push({cmd:"CALL",fnName:"qap_joinABC",params:[{var:0},{var:1},{var:2},{val:C},{var:3}]}),A.push({cmd:"CALL",fnName:"frm_batchFromMontgomery",params:[{var:3},{val:C},{var:3}]}),A.push({cmd:"GET",out:0,var:3,len:C*l}),s.push(i.tm.queueAction(A))}const r=await Promise.all(s);let g;e instanceof $t?g=new $t(e.byteLength):g=new Uint8Array(e.byteLength);let L=0;for(let m=0;m<r.length;m++)g.set(r[m][0],L),L+=r[m][0].byteLength;return g}function ol(i){var t=[];return e(t,i),t;function e(n,o){if(Array.isArray(o))for(let a=0;a<o.length;a++)e(n,o[a]);else n.push(o)}}function al(i){const t=BigInt(2)**BigInt(64);let e=BigInt("0xCBF29CE484222325");for(var n=0;n<i.length;n++)e^=BigInt(i[n].charCodeAt()),e*=BigInt(1099511628211),e%=t;let o=e.toString(16),a=16-o.length;return o="0".repeat(a).concat(o),o}function Ug(i,t){const e=[];let n=BigInt(i);const o=BigInt(4294967296);for(;n;)e.unshift(Number(n%o)),n=n/o;if(t)for(var a=t-e.length;a>0;)e.unshift(0),a--;return e}async function $g(i,t){t=t||{};let e=32767,n,o=!1;for(;!o;)try{n=new WebAssembly.Memory({initial:e}),o=!0}catch(w){if(e===1)throw w;console.warn("Could not allocate "+e*1024*64+" bytes. This may cause severe instability. Trying with "+e*1024*64/2+" bytes"),e=Math.floor(e/2)}const a=await WebAssembly.compile(i);let c,l="",d="",s=1,r=0,g=0;const L=await WebAssembly.instantiate(a,{env:{memory:n},runtime:{exceptionHandler:function(w){let T;throw w==1?T="Signal not found. ":w==2?T="Too many signals set. ":w==3?T="Signal already set. ":w==4?T="Assert Failed. ":w==5?T="Not enough memory. ":w==6?T="Input signal array access exceeds the size. ":T="Unknown error. ",console.error("ERROR: ",w,l),new Error(T+l)},printErrorMessage:function(){l+=C()+`
`},writeBufferMessage:function(){const w=C();w===`
`?(console.log(d),d=""):(d!==""&&(d+=" "),d+=w)},showSharedRWMemory:function(){const w=L.exports.getFieldNumLen32(),T=new Uint32Array(w);for(let F=0;F<w;F++)T[w-1-F]=L.exports.readSharedRWMemory(F);s>=2&&(r>=1||g>=7)?(d!==""&&(d+=" "),d+=Wt.fromArray(T,4294967296).toString()):console.log(Wt.fromArray(T,4294967296))},error:function(w,T,F,R,q,Z){let E;throw w==7?E=A(T)+" "+c.getFr(R).toString()+" != "+c.getFr(q).toString()+" "+A(Z):w==9?E=A(T)+" "+c.getFr(R).toString()+" "+A(q):w==5&&t.sym?E=A(T)+" "+t.sym.labelIdx2Name[q]:E=A(T)+" "+F+" "+R+" "+q+" "+Z,console.log("ERROR: ",w,E),new Error(E)},log:function(w){console.log(c.getFr(w).toString())},logGetSignal:function(w,T){t.logGetSignal&&t.logGetSignal(w,c.getFr(T))},logSetSignal:function(w,T){t.logSetSignal&&t.logSetSignal(w,c.getFr(T))},logStartComponent:function(w){t.logStartComponent&&t.logStartComponent(w)},logFinishComponent:function(w){t.logFinishComponent&&t.logFinishComponent(w)}}});typeof L.exports.getVersion=="function"&&(s=L.exports.getVersion()),typeof L.exports.getMinorVersion=="function"&&(r=L.exports.getMinorVersion()),typeof L.exports.getPatchVersion=="function"&&(g=L.exports.getPatchVersion());const m=t&&(t.sanityCheck||t.logGetSignal||t.logSetSignal||t.logStartComponent||t.logFinishComponent);return s===2?c=new Qg(L,m):c=new Vg(n,L,m),c;function C(){for(var w="",T=L.exports.getMessageChar();T!=0;)w+=String.fromCharCode(T),T=L.exports.getMessageChar();return w}function A(w){const T=new Uint8Array(n.buffer),F=[];for(let R=0;T[w+R]>0;R++)F.push(T[w+R]);return String.fromCharCode.apply(null,F)}}class Vg{constructor(t,e,n){this.memory=t,this.i32=new Uint32Array(t.buffer),this.instance=e,this.n32=(this.instance.exports.getFrLen()>>2)-2;const o=this.instance.exports.getPRawPrime(),a=new Array(this.n32);for(let c=0;c<this.n32;c++)a[this.n32-1-c]=this.i32[(o>>2)+c];this.prime=Wt.fromArray(a,4294967296),this.Fr=new cp(this.prime),this.mask32=Wt.fromString("FFFFFFFF",16),this.NVars=this.instance.exports.getNVars(),this.n64=Math.floor((this.Fr.bitLength-1)/64)+1,this.R=this.Fr.e(Wt.shiftLeft(1,this.n64*64)),this.RInv=this.Fr.inv(this.R),this.sanityCheck=n}circom_version(){return 1}async _doCalculateWitness(t,e){this.instance.exports.init(this.sanityCheck||e?1:0);const n=this.allocInt(),o=this.allocFr();Object.keys(t).forEach(c=>{const l=al(c),d=parseInt(l.slice(0,8),16),s=parseInt(l.slice(8,16),16);try{this.instance.exports.getSignalOffset32(n,0,d,s)}catch{throw new Error(`Signal ${c} is not an input of the circuit.`)}const r=this.getInt(n),g=ol(t[c]);for(let L=0;L<g.length;L++)this.setFr(o,g[L]),this.instance.exports.setSignal(0,0,r+L,o)})}async calculateWitness(t,e){const n=this,o=n.i32[0],a=[];await n._doCalculateWitness(t,e);for(let c=0;c<n.NVars;c++){const l=n.instance.exports.getPWitness(c);a.push(n.getFr(l))}return n.i32[0]=o,a}async calculateBinWitness(t,e){const n=this,o=n.i32[0];await n._doCalculateWitness(t,e);const a=n.instance.exports.getWitnessBuffer();n.i32[0]=o;const c=n.memory.buffer.slice(a,a+n.NVars*n.n64*8);return new Uint8Array(c)}allocInt(){const t=this.i32[0];return this.i32[0]=t+8,t}allocFr(){const t=this.i32[0];return this.i32[0]=t+this.n32*4+8,t}getInt(t){return this.i32[t>>2]}setInt(t,e){this.i32[t>>2]=e}getFr(t){const e=this,n=t>>2;if(e.i32[n+1]&2147483648){const a=new Array(e.n32);for(let l=0;l<e.n32;l++)a[e.n32-1-l]=e.i32[n+2+l];const c=e.Fr.e(Wt.fromArray(a,4294967296));return e.i32[n+1]&1073741824?o(c):c}else return e.i32[n]&2147483648?e.Fr.e(e.i32[n]-4294967296):e.Fr.e(e.i32[n]);function o(a){return e.Fr.mul(e.RInv,a)}}setFr(t,e){const n=this;e=n.Fr.e(e);const o=n.Fr.neg(n.Fr.e("80000000",16)),a=n.Fr.e("7FFFFFFF",16);if(n.Fr.geq(e,o)&&n.Fr.leq(e,a)){let l;n.Fr.geq(e,n.Fr.zero)?l=Wt.toNumber(e):(l=Wt.toNumber(n.Fr.sub(e,o)),l=l-2147483648,l=4294967296+l),n.i32[t>>2]=l,n.i32[(t>>2)+1]=0;return}n.i32[t>>2]=0,n.i32[(t>>2)+1]=2147483648;const c=Wt.toArray(e,4294967296);for(let l=0;l<n.n32;l++){const d=c.length-1-l;d>=0?n.i32[(t>>2)+2+l]=c[d]:n.i32[(t>>2)+2+l]=0}}}class Qg{constructor(t,e){this.instance=t,this.version=this.instance.exports.getVersion(),this.n32=this.instance.exports.getFieldNumLen32(),this.instance.exports.getRawPrime();const n=new Array(this.n32);for(let o=0;o<this.n32;o++)n[this.n32-1-o]=this.instance.exports.readSharedRWMemory(o);this.prime=Wt.fromArray(n,4294967296),this.witnessSize=this.instance.exports.getWitnessSize(),this.sanityCheck=e}circom_version(){return this.instance.exports.getVersion()}async _doCalculateWitness(t,e){this.instance.exports.init(this.sanityCheck||e?1:0);const n=Object.keys(t);var o=0;if(n.forEach(a=>{const c=al(a),l=parseInt(c.slice(0,8),16),d=parseInt(c.slice(8,16),16),s=ol(t[a]);for(let r=0;r<s.length;r++){const g=Ug(s[r],this.n32);for(let L=0;L<this.n32;L++)this.instance.exports.writeSharedRWMemory(L,g[this.n32-1-L]);try{this.instance.exports.setInputSignal(l,d,r),o++}catch(L){throw new Error(L)}}}),o<this.instance.exports.getInputSize())throw new Error(`Not all inputs have been set. Only ${o} out of ${this.instance.exports.getInputSize()}`)}async calculateWitness(t,e){const n=[];await this._doCalculateWitness(t,e);for(let o=0;o<this.witnessSize;o++){this.instance.exports.getWitness(o);const a=new Uint32Array(this.n32);for(let c=0;c<this.n32;c++)a[this.n32-1-c]=this.instance.exports.readSharedRWMemory(c);n.push(Wt.fromArray(a,4294967296))}return n}async calculateWTNSBin(t,e){const n=new Uint32Array(this.witnessSize*this.n32+this.n32+11),o=new Uint8Array(n.buffer);await this._doCalculateWitness(t,e),o[0]="w".charCodeAt(0),o[1]="t".charCodeAt(0),o[2]="n".charCodeAt(0),o[3]="s".charCodeAt(0),n[1]=2,n[2]=2,n[3]=1;const a=this.n32*4,l=(8+a).toString(16);n[4]=parseInt(l.slice(0,8),16),n[5]=parseInt(l.slice(8,16),16),n[6]=a,this.instance.exports.getRawPrime();var d=7;for(let g=0;g<this.n32;g++)n[d+g]=this.instance.exports.readSharedRWMemory(g);d+=this.n32,n[d]=this.witnessSize,d++,n[d]=2,d++;const r=(a*this.witnessSize).toString(16);n[d]=parseInt(r.slice(0,8),16),n[d+1]=parseInt(r.slice(8,16),16),d+=2;for(let g=0;g<this.witnessSize;g++){this.instance.exports.getWitness(g);for(let L=0;L<this.n32;L++)n[d+L]=this.instance.exports.readSharedRWMemory(L);d+=this.n32}return o}}const{unstringifyBigInts:Gg}=Ia;async function Wg(i,t,e,n){const o=Gg(i),a=await Lc(t),c=await a.read(a.totalSize);await a.close();const l=await $g(c);if(l.circom_version()==1){const d=await l.calculateBinWitness(o),s=await l2(e,"wtns",2,2);await Rg(s,d,l.prime),await s.close()}else{const d=await yc(e),s=await l.calculateWTNSBin(o);await d.write(s),await d.close()}}const{unstringifyBigInts:Zg}=Ia;async function Jg(i,t,e,n){const o=Zg(i),a={type:"mem"};return await Wg(o,t,a),await Dg(e,a,n)}Wt.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16);Wt.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");var Hg={};function rl(i,t){for(var e=0,n=i.length-1;n>=0;n--){var o=i[n];o==="."?i.splice(n,1):o===".."?(i.splice(n,1),e++):e&&(i.splice(n,1),e--)}if(t)for(;e--;e)i.unshift("..");return i}var Xg=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Pa=function(i){return Xg.exec(i).slice(1)};function Li(){for(var i="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var n=e>=0?arguments[e]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;i=n+"/"+i,t=n.charAt(0)==="/"}return i=rl(qa(i.split("/"),function(o){return!!o}),!t).join("/"),(t?"/":"")+i||"."}function Ta(i){var t=Ma(i),e=Kg(i,-1)==="/";return i=rl(qa(i.split("/"),function(n){return!!n}),!t).join("/"),!i&&!t&&(i="."),i&&e&&(i+="/"),(t?"/":"")+i}function Ma(i){return i.charAt(0)==="/"}function sl(){var i=Array.prototype.slice.call(arguments,0);return Ta(qa(i,function(t,e){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function cl(i,t){i=Li(i).substr(1),t=Li(t).substr(1);function e(s){for(var r=0;r<s.length&&s[r]==="";r++);for(var g=s.length-1;g>=0&&s[g]==="";g--);return r>g?[]:s.slice(r,g-r+1)}for(var n=e(i.split("/")),o=e(t.split("/")),a=Math.min(n.length,o.length),c=a,l=0;l<a;l++)if(n[l]!==o[l]){c=l;break}for(var d=[],l=c;l<n.length;l++)d.push("..");return d=d.concat(o.slice(c)),d.join("/")}var ll="/",ul=":";function dl(i){var t=Pa(i),e=t[0],n=t[1];return!e&&!n?".":(n&&(n=n.substr(0,n.length-1)),e+n)}function fl(i,t){var e=Pa(i)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e}function hl(i){return Pa(i)[3]}const Yg={extname:hl,basename:fl,dirname:dl,sep:ll,delimiter:ul,relative:cl,join:sl,isAbsolute:Ma,normalize:Ta,resolve:Li};function qa(i,t){if(i.filter)return i.filter(t);for(var e=[],n=0;n<i.length;n++)t(i[n],n,i)&&e.push(i[n]);return e}var Kg="ab".substr(-1)==="b"?function(i,t,e){return i.substr(t,e)}:function(i,t,e){return t<0&&(t=i.length+t),i.substr(t,e)};const t3=Object.freeze(Object.defineProperty({__proto__:null,resolve:Li,normalize:Ta,isAbsolute:Ma,join:sl,relative:cl,sep:ll,delimiter:ul,dirname:dl,basename:fl,extname:hl,default:Yg},Symbol.toStringTag,{value:"Module"})),e3=El(t3);var _l={};(function(i){var t=/[|\\{}()[\]^$+*?.]/g,e=Object.prototype.hasOwnProperty,n=function(d,s){return e.apply(d,[s])};i.escapeRegExpChars=function(d){return d?String(d).replace(t,"\\$&"):""};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},a=/[&<>'"]/g;function c(d){return o[d]||d}var l=`var _ENCODE_HTML_RULES = {
      "&": "&amp;"
    , "<": "&lt;"
    , ">": "&gt;"
    , '"': "&#34;"
    , "'": "&#39;"
    }
  , _MATCH_HTML = /[&<>'"]/g;
function encode_char(c) {
  return _ENCODE_HTML_RULES[c] || c;
};
`;i.escapeXML=function(d){return d==null?"":String(d).replace(a,c)},i.escapeXML.toString=function(){return Function.prototype.toString.call(this)+`;
`+l},i.shallowCopy=function(d,s){if(s=s||{},d!=null)for(var r in s)!n(s,r)||r==="__proto__"||r==="constructor"||(d[r]=s[r]);return d},i.shallowCopyFromList=function(d,s,r){if(r=r||[],s=s||{},d!=null)for(var g=0;g<r.length;g++){var L=r[g];if(typeof s[L]<"u"){if(!n(s,L)||L==="__proto__"||L==="constructor")continue;d[L]=s[L]}}return d},i.cache={_data:{},set:function(d,s){this._data[d]=s},get:function(d){return this._data[d]},remove:function(d){delete this._data[d]},reset:function(){this._data={}}},i.hyphenToCamel=function(d){return d.replace(/-[a-z]/g,function(s){return s[1].toUpperCase()})},i.createNullProtoObjWherePossible=function(){return typeof Object.create=="function"?function(){return Object.create(null)}:{__proto__:null}instanceof Object?function(){return{}}:function(){return{__proto__:null}}}()})(_l);const n3="ejs",i3="Embedded JavaScript templates",o3=["template","engine","ejs"],a3="3.1.8",r3="Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",s3="Apache-2.0",c3={ejs:"./bin/cli.js"},l3="./lib/ejs.js",u3="ejs.min.js",d3="ejs.min.js",f3={type:"git",url:"git://github.com/mde/ejs.git"},h3="https://github.com/mde/ejs/issues",_3="https://github.com/mde/ejs",p3={jake:"^10.8.5"},g3={browserify:"^16.5.1",eslint:"^6.8.0","git-directory-deploy":"^1.5.1",jsdoc:"^3.6.7","lru-cache":"^4.0.1",mocha:"^7.1.1","uglify-js":"^3.3.16"},m3={node:">=0.10.0"},y3={test:"mocha"},L3={name:n3,description:i3,keywords:o3,version:a3,author:r3,license:s3,bin:c3,main:l3,jsdelivr:u3,unpkg:d3,repository:f3,bugs:h3,homepage:_3,dependencies:p3,devDependencies:g3,engines:m3,scripts:y3};(function(i){/**
 * @file Embedded JavaScript templating engine. {@link http://ejs.co}
 * @author Matthew Eernisse <mde@fleegix.org>
 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
 * @project EJS
 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
 */var t=Fl,e=e3,n=_l,o=!1,a=L3.version,c="<",l=">",d="%",s="locals",r="ejs",g="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",L=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],m=L.concat("cache"),C=/^\uFEFF/,A=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/;i.cache=n.cache,i.fileLoader=t.readFileSync,i.localsName=s,i.promiseImpl=new Function("return this;")().Promise,i.resolveInclude=function(I,k,O){var x=e.dirname,v=e.extname,P=e.resolve,V=P(O?k:x(k),I),at=v(I);return at||(V+=".ejs"),V};function w(I,k){var O;if(k.some(function(x){return O=i.resolveInclude(I,x,!0),t.existsSync(O)}))return O}function T(I,k){var O,x,v=k.views,P=/^[A-Za-z]+:\\|^\//.exec(I);if(P&&P.length)I=I.replace(/^\/*/,""),Array.isArray(k.root)?O=w(I,k.root):O=i.resolveInclude(I,k.root||"/",!0);else if(k.filename&&(x=i.resolveInclude(I,k.filename),t.existsSync(x)&&(O=x)),!O&&Array.isArray(v)&&(O=w(I,v)),!O&&typeof k.includer!="function")throw new Error('Could not find the include file "'+k.escapeFunction(I)+'"');return O}function F(I,k){var O,x=I.filename,v=arguments.length>1;if(I.cache){if(!x)throw new Error("cache option requires a filename");if(O=i.cache.get(x),O)return O;v||(k=q(x).toString().replace(C,""))}else if(!v){if(!x)throw new Error("Internal EJS error: no file name or template provided");k=q(x).toString().replace(C,"")}return O=i.compile(k,I),I.cache&&i.cache.set(x,O),O}function R(I,k,O){var x;if(O){try{x=F(I)(k)}catch(v){return O(v)}O(null,x)}else{if(typeof i.promiseImpl=="function")return new i.promiseImpl(function(v,P){try{x=F(I)(k),v(x)}catch(V){P(V)}});throw new Error("Please provide a callback function")}}function q(I){return i.fileLoader(I)}function Z(I,k){var O=n.shallowCopy(n.createNullProtoObjWherePossible(),k);if(O.filename=T(I,O),typeof k.includer=="function"){var x=k.includer(I,O.filename);if(x&&(x.filename&&(O.filename=x.filename),x.template))return F(O,x.template)}return F(O)}function E(I,k,O,x,v){var P=k.split(`
`),V=Math.max(x-3,0),at=Math.min(P.length,x+3),et=v(O),U=P.slice(V,at).map(function(ct,H){var st=H+V+1;return(st==x?" >> ":"    ")+st+"| "+ct}).join(`
`);throw I.path=et,I.message=(et||"ejs")+":"+x+`
`+U+`

`+I.message,I}function f(I){return I.replace(/;(\s*$)/,"$1")}i.compile=function(k,O){var x;return O&&O.scope&&(o||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),o=!0),O.context||(O.context=O.scope),delete O.scope),x=new y(k,O),x.compile()},i.render=function(I,k,O){var x=k||n.createNullProtoObjWherePossible(),v=O||n.createNullProtoObjWherePossible();return arguments.length==2&&n.shallowCopyFromList(v,x,L),F(v,I)(x)},i.renderFile=function(){var I=Array.prototype.slice.call(arguments),k=I.shift(),O,x={filename:k},v,P;return typeof arguments[arguments.length-1]=="function"&&(O=I.pop()),I.length?(v=I.shift(),I.length?n.shallowCopy(x,I.pop()):(v.settings&&(v.settings.views&&(x.views=v.settings.views),v.settings["view cache"]&&(x.cache=!0),P=v.settings["view options"],P&&n.shallowCopy(x,P)),n.shallowCopyFromList(x,v,m)),x.filename=k):v=n.createNullProtoObjWherePossible(),R(x,v,O)},i.Template=y,i.clearCache=function(){i.cache.reset()};function y(I,k){k=k||n.createNullProtoObjWherePossible();var O=n.createNullProtoObjWherePossible();this.templateText=I,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",O.client=k.client||!1,O.escapeFunction=k.escape||k.escapeFunction||n.escapeXML,O.compileDebug=k.compileDebug!==!1,O.debug=!!k.debug,O.filename=k.filename,O.openDelimiter=k.openDelimiter||i.openDelimiter||c,O.closeDelimiter=k.closeDelimiter||i.closeDelimiter||l,O.delimiter=k.delimiter||i.delimiter||d,O.strict=k.strict||!1,O.context=k.context,O.cache=k.cache||!1,O.rmWhitespace=k.rmWhitespace,O.root=k.root,O.includer=k.includer,O.outputFunctionName=k.outputFunctionName,O.localsName=k.localsName||i.localsName||s,O.views=k.views,O.async=k.async,O.destructuredLocals=k.destructuredLocals,O.legacyInclude=typeof k.legacyInclude<"u"?!!k.legacyInclude:!0,O.strict?O._with=!1:O._with=typeof k._with<"u"?k._with:!0,this.opts=O,this.regex=this.createRegex()}y.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},y.prototype={createRegex:function(){var I=g,k=n.escapeRegExpChars(this.opts.delimiter),O=n.escapeRegExpChars(this.opts.openDelimiter),x=n.escapeRegExpChars(this.opts.closeDelimiter);return I=I.replace(/%/g,k).replace(/</g,O).replace(/>/g,x),new RegExp(I)},compile:function(){var I,k,O=this.opts,x="",v="",P=O.escapeFunction,V,at=O.filename?JSON.stringify(O.filename):"undefined";if(!this.source){if(this.generateSource(),x+=`  var __output = "";
  function __append(s) { if (s !== undefined && s !== null) __output += s }
`,O.outputFunctionName){if(!A.test(O.outputFunctionName))throw new Error("outputFunctionName is not a valid JS identifier.");x+="  var "+O.outputFunctionName+` = __append;
`}if(O.localsName&&!A.test(O.localsName))throw new Error("localsName is not a valid JS identifier.");if(O.destructuredLocals&&O.destructuredLocals.length){for(var et="  var __locals = ("+O.localsName+` || {}),
`,U=0;U<O.destructuredLocals.length;U++){var ct=O.destructuredLocals[U];if(!A.test(ct))throw new Error("destructuredLocals["+U+"] is not a valid JS identifier.");U>0&&(et+=`,
  `),et+=ct+" = __locals."+ct}x+=et+`;
`}O._with!==!1&&(x+="  with ("+O.localsName+` || {}) {
`,v+=`  }
`),v+=`  return __output;
`,this.source=x+this.source+v}O.compileDebug?I=`var __line = 1
  , __lines = `+JSON.stringify(this.templateText)+`
  , __filename = `+at+`;
try {
`+this.source+`} catch (e) {
  rethrow(e, __lines, __filename, __line, escapeFn);
}
`:I=this.source,O.client&&(I="escapeFn = escapeFn || "+P.toString()+`;
`+I,O.compileDebug&&(I="rethrow = rethrow || "+E.toString()+`;
`+I)),O.strict&&(I=`"use strict";
`+I),O.debug&&console.log(I),O.compileDebug&&O.filename&&(I=I+`
//# sourceURL=`+at+`
`);try{if(O.async)try{V=new Function("return (async function(){}).constructor;")()}catch(vt){throw vt instanceof SyntaxError?new Error("This environment does not support async/await"):vt}else V=Function;k=new V(O.localsName+", escapeFn, include, rethrow",I)}catch(vt){throw vt instanceof SyntaxError&&(O.filename&&(vt.message+=" in "+O.filename),vt.message+=` while compiling ejs

`,vt.message+=`If the above error is not helpful, you may want to try EJS-Lint:
`,vt.message+="https://github.com/RyanZim/EJS-Lint",O.async||(vt.message+=`
`,vt.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),vt}var H=O.client?k:function(Et){var B=function(u,S){var h=n.shallowCopy(n.createNullProtoObjWherePossible(),Et);return S&&(h=n.shallowCopy(h,S)),Z(u,O)(h)};return k.apply(O.context,[Et||n.createNullProtoObjWherePossible(),P,B,E])};if(O.filename&&typeof Object.defineProperty=="function"){var st=O.filename,Mt=e.basename(st,e.extname(st));try{Object.defineProperty(H,"name",{value:Mt,writable:!1,enumerable:!1,configurable:!0})}catch{}}return H},generateSource:function(){var I=this.opts;I.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,`
`).replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var k=this,O=this.parseTemplateText(),x=this.opts.delimiter,v=this.opts.openDelimiter,P=this.opts.closeDelimiter;O&&O.length&&O.forEach(function(V,at){var et;if(V.indexOf(v+x)===0&&V.indexOf(v+x+x)!==0&&(et=O[at+2],!(et==x+P||et=="-"+x+P||et=="_"+x+P)))throw new Error('Could not find matching close tag for "'+V+'".');k.scanLine(V)})},parseTemplateText:function(){for(var I=this.templateText,k=this.regex,O=k.exec(I),x=[],v;O;)v=O.index,v!==0&&(x.push(I.substring(0,v)),I=I.slice(v)),x.push(O[0]),I=I.slice(O[0].length),O=k.exec(I);return I&&x.push(I),x},_addOutput:function(I){if(this.truncate&&(I=I.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!I)return I;I=I.replace(/\\/g,"\\\\"),I=I.replace(/\n/g,"\\n"),I=I.replace(/\r/g,"\\r"),I=I.replace(/"/g,'\\"'),this.source+='    ; __append("'+I+`")
`},scanLine:function(I){var k=this,O=this.opts.delimiter,x=this.opts.openDelimiter,v=this.opts.closeDelimiter,P=0;switch(P=I.split(`
`).length-1,I){case x+O:case x+O+"_":this.mode=y.modes.EVAL;break;case x+O+"=":this.mode=y.modes.ESCAPED;break;case x+O+"-":this.mode=y.modes.RAW;break;case x+O+"#":this.mode=y.modes.COMMENT;break;case x+O+O:this.mode=y.modes.LITERAL,this.source+='    ; __append("'+I.replace(x+O+O,x+O)+`")
`;break;case O+O+v:this.mode=y.modes.LITERAL,this.source+='    ; __append("'+I.replace(O+O+v,O+v)+`")
`;break;case O+v:case"-"+O+v:case"_"+O+v:this.mode==y.modes.LITERAL&&this._addOutput(I),this.mode=null,this.truncate=I.indexOf("-")===0||I.indexOf("_")===0;break;default:if(this.mode){switch(this.mode){case y.modes.EVAL:case y.modes.ESCAPED:case y.modes.RAW:I.lastIndexOf("//")>I.lastIndexOf(`
`)&&(I+=`
`)}switch(this.mode){case y.modes.EVAL:this.source+="    ; "+I+`
`;break;case y.modes.ESCAPED:this.source+="    ; __append(escapeFn("+f(I)+`))
`;break;case y.modes.RAW:this.source+="    ; __append("+f(I)+`)
`;break;case y.modes.COMMENT:break;case y.modes.LITERAL:this._addOutput(I);break}}else this._addOutput(I)}k.opts.compileDebug&&P&&(this.currentLine+=P,this.source+="    ; __line = "+this.currentLine+`
`)}},i.escapeXML=n.escapeXML,i.__express=i.renderFile,i.VERSION=a,i.name=r,typeof window<"u"&&(window.ejs=i)})(Hg);/**
 * @module @semaphore-protocol/proof
 * @version 2.5.0
 * @file A library to generate and verify Semaphore proofs.
 * @copyright Ethereum Foundation 2022
 * @license MIT
 * @see [Github]{@link https://github.com/semaphore-protocol/semaphore/tree/main/packages/proof}
*/function b3(i,t,e,n){function o(a){return a instanceof e?a:new e(function(c){c(a)})}return new(e||(e=Promise))(function(a,c){function l(r){try{s(n.next(r))}catch(g){c(g)}}function d(r){try{s(n.throw(r))}catch(g){c(g)}}function s(r){r.done?a(r.value):o(r.value).then(l,d)}s((n=n.apply(i,t||[])).next())})}function v3(i,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(s){return function(r){return d([s,r])}}function d(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,o&&(a=s[0]&2?o.return:s[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;switch(o=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,o=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){e=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){e.label=s[1];break}if(s[0]===6&&e.label<a[1]){e.label=a[1],a=s;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(s);break}a[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(i,e)}catch(r){s=[6,r],o=0}finally{n=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function w3(i){return Cl(i,32)||(i=ss(i)),BigInt(Al(["bytes32"],[i]))>>BigInt(8)}function E3(i,t,e,n,o){return b3(this,void 0,void 0,function(){var a,c,l,d,s,r;return v3(this,function(g){switch(g.label){case 0:if(a=i.generateCommitment(),"depth"in t){if(l=t.indexOf(a),l===-1)throw new Error("The identity is not part of the group");c=t.generateProofOfMembership(l)}else c=t;return o||(o={wasmFilePath:"https://www.trusted-setup-pse.org/semaphore/".concat(c.siblings.length,"/semaphore.wasm"),zkeyFilePath:"https://www.trusted-setup-pse.org/semaphore/".concat(c.siblings.length,"/semaphore.zkey")}),[4,Jg({identityTrapdoor:i.getTrapdoor(),identityNullifier:i.getNullifier(),treePathIndices:c.pathIndices,treeSiblings:c.siblings,externalNullifier:e,signalHash:w3(n)},o.wasmFilePath,o.zkeyFilePath)];case 1:return d=g.sent(),s=d.proof,r=d.publicSignals,[2,{proof:s,publicSignals:{merkleRoot:r[0],nullifierHash:r[1],signalHash:r[2],externalNullifier:r[3]}}]}})})}function F3(i){return[i.pi_a[0],i.pi_a[1],i.pi_b[0][1],i.pi_b[0][0],i.pi_b[1][1],i.pi_b[1][0],i.pi_c[0],i.pi_c[1]]}var C3=Object.defineProperty,bi=Object.getOwnPropertySymbols,pl=Object.prototype.hasOwnProperty,gl=Object.prototype.propertyIsEnumerable,as=(i,t,e)=>t in i?C3(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,A3=(i,t)=>{for(var e in t||(t={}))pl.call(t,e)&&as(i,e,t[e]);if(bi)for(var e of bi(t))gl.call(t,e)&&as(i,e,t[e]);return i},S3=(i,t)=>{var e={};for(var n in i)pl.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&bi)for(var n of bi(i))t.indexOf(n)<0&&gl.call(i,n)&&(e[n]=i[n]);return e},Ke;(i=>{const t=class{constructor(d,s,r,g){if(this.version=d,this.errorCorrectionLevel=s,this.modules=[],this.isFunction=[],d<t.MIN_VERSION||d>t.MAX_VERSION)throw new RangeError("Version value out of range");if(g<-1||g>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let L=[];for(let C=0;C<this.size;C++)L.push(!1);for(let C=0;C<this.size;C++)this.modules.push(L.slice()),this.isFunction.push(L.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(r);if(this.drawCodewords(m),g==-1){let C=1e9;for(let A=0;A<8;A++){this.applyMask(A),this.drawFormatBits(A);const w=this.getPenaltyScore();w<C&&(g=A,C=w),this.applyMask(A)}}a(0<=g&&g<=7),this.mask=g,this.applyMask(g),this.drawFormatBits(g),this.isFunction=[]}static encodeText(d,s){const r=i.QrSegment.makeSegments(d);return t.encodeSegments(r,s)}static encodeBinary(d,s){const r=i.QrSegment.makeBytes(d);return t.encodeSegments([r],s)}static encodeSegments(d,s,r=1,g=40,L=-1,m=!0){if(!(t.MIN_VERSION<=r&&r<=g&&g<=t.MAX_VERSION)||L<-1||L>7)throw new RangeError("Invalid value");let C,A;for(C=r;;C++){const R=t.getNumDataCodewords(C,s)*8,q=l.getTotalBits(d,C);if(q<=R){A=q;break}if(C>=g)throw new RangeError("Data too long")}for(const R of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])m&&A<=t.getNumDataCodewords(C,R)*8&&(s=R);let w=[];for(const R of d){n(R.mode.modeBits,4,w),n(R.numChars,R.mode.numCharCountBits(C),w);for(const q of R.getData())w.push(q)}a(w.length==A);const T=t.getNumDataCodewords(C,s)*8;a(w.length<=T),n(0,Math.min(4,T-w.length),w),n(0,(8-w.length%8)%8,w),a(w.length%8==0);for(let R=236;w.length<T;R^=253)n(R,8,w);let F=[];for(;F.length*8<w.length;)F.push(0);return w.forEach((R,q)=>F[q>>>3]|=R<<7-(q&7)),new t(C,s,F,L)}getModule(d,s){return 0<=d&&d<this.size&&0<=s&&s<this.size&&this.modules[s][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let r=0;r<this.size;r++)this.setFunctionModule(6,r,r%2==0),this.setFunctionModule(r,6,r%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),s=d.length;for(let r=0;r<s;r++)for(let g=0;g<s;g++)r==0&&g==0||r==0&&g==s-1||r==s-1&&g==0||this.drawAlignmentPattern(d[r],d[g]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const s=this.errorCorrectionLevel.formatBits<<3|d;let r=s;for(let L=0;L<10;L++)r=r<<1^(r>>>9)*1335;const g=(s<<10|r)^21522;a(g>>>15==0);for(let L=0;L<=5;L++)this.setFunctionModule(8,L,o(g,L));this.setFunctionModule(8,7,o(g,6)),this.setFunctionModule(8,8,o(g,7)),this.setFunctionModule(7,8,o(g,8));for(let L=9;L<15;L++)this.setFunctionModule(14-L,8,o(g,L));for(let L=0;L<8;L++)this.setFunctionModule(this.size-1-L,8,o(g,L));for(let L=8;L<15;L++)this.setFunctionModule(8,this.size-15+L,o(g,L));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let r=0;r<12;r++)d=d<<1^(d>>>11)*7973;const s=this.version<<12|d;a(s>>>18==0);for(let r=0;r<18;r++){const g=o(s,r),L=this.size-11+r%3,m=Math.floor(r/3);this.setFunctionModule(L,m,g),this.setFunctionModule(m,L,g)}}drawFinderPattern(d,s){for(let r=-4;r<=4;r++)for(let g=-4;g<=4;g++){const L=Math.max(Math.abs(g),Math.abs(r)),m=d+g,C=s+r;0<=m&&m<this.size&&0<=C&&C<this.size&&this.setFunctionModule(m,C,L!=2&&L!=4)}}drawAlignmentPattern(d,s){for(let r=-2;r<=2;r++)for(let g=-2;g<=2;g++)this.setFunctionModule(d+g,s+r,Math.max(Math.abs(g),Math.abs(r))!=1)}setFunctionModule(d,s,r){this.modules[s][d]=r,this.isFunction[s][d]=!0}addEccAndInterleave(d){const s=this.version,r=this.errorCorrectionLevel;if(d.length!=t.getNumDataCodewords(s,r))throw new RangeError("Invalid argument");const g=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][s],L=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][s],m=Math.floor(t.getNumRawDataModules(s)/8),C=g-m%g,A=Math.floor(m/g);let w=[];const T=t.reedSolomonComputeDivisor(L);for(let R=0,q=0;R<g;R++){let Z=d.slice(q,q+A-L+(R<C?0:1));q+=Z.length;const E=t.reedSolomonComputeRemainder(Z,T);R<C&&Z.push(0),w.push(Z.concat(E))}let F=[];for(let R=0;R<w[0].length;R++)w.forEach((q,Z)=>{(R!=A-L||Z>=C)&&F.push(q[R])});return a(F.length==m),F}drawCodewords(d){if(d.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let s=0;for(let r=this.size-1;r>=1;r-=2){r==6&&(r=5);for(let g=0;g<this.size;g++)for(let L=0;L<2;L++){const m=r-L,A=(r+1&2)==0?this.size-1-g:g;!this.isFunction[A][m]&&s<d.length*8&&(this.modules[A][m]=o(d[s>>>3],7-(s&7)),s++)}}a(s==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let s=0;s<this.size;s++)for(let r=0;r<this.size;r++){let g;switch(d){case 0:g=(r+s)%2==0;break;case 1:g=s%2==0;break;case 2:g=r%3==0;break;case 3:g=(r+s)%3==0;break;case 4:g=(Math.floor(r/3)+Math.floor(s/2))%2==0;break;case 5:g=r*s%2+r*s%3==0;break;case 6:g=(r*s%2+r*s%3)%2==0;break;case 7:g=((r+s)%2+r*s%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[s][r]&&g&&(this.modules[s][r]=!this.modules[s][r])}}getPenaltyScore(){let d=0;for(let L=0;L<this.size;L++){let m=!1,C=0,A=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[L][w]==m?(C++,C==5?d+=t.PENALTY_N1:C>5&&d++):(this.finderPenaltyAddHistory(C,A),m||(d+=this.finderPenaltyCountPatterns(A)*t.PENALTY_N3),m=this.modules[L][w],C=1);d+=this.finderPenaltyTerminateAndCount(m,C,A)*t.PENALTY_N3}for(let L=0;L<this.size;L++){let m=!1,C=0,A=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][L]==m?(C++,C==5?d+=t.PENALTY_N1:C>5&&d++):(this.finderPenaltyAddHistory(C,A),m||(d+=this.finderPenaltyCountPatterns(A)*t.PENALTY_N3),m=this.modules[w][L],C=1);d+=this.finderPenaltyTerminateAndCount(m,C,A)*t.PENALTY_N3}for(let L=0;L<this.size-1;L++)for(let m=0;m<this.size-1;m++){const C=this.modules[L][m];C==this.modules[L][m+1]&&C==this.modules[L+1][m]&&C==this.modules[L+1][m+1]&&(d+=t.PENALTY_N2)}let s=0;for(const L of this.modules)s=L.reduce((m,C)=>m+(C?1:0),s);const r=this.size*this.size,g=Math.ceil(Math.abs(s*20-r*10)/r)-1;return a(0<=g&&g<=9),d+=g*t.PENALTY_N4,a(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,s=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let r=[6];for(let g=this.size-7;r.length<d;g-=s)r.splice(1,0,g);return r}}static getNumRawDataModules(d){if(d<t.MIN_VERSION||d>t.MAX_VERSION)throw new RangeError("Version number out of range");let s=(16*d+128)*d+64;if(d>=2){const r=Math.floor(d/7)+2;s-=(25*r-10)*r-55,d>=7&&(s-=36)}return a(208<=s&&s<=29648),s}static getNumDataCodewords(d,s){return Math.floor(t.getNumRawDataModules(d)/8)-t.ECC_CODEWORDS_PER_BLOCK[s.ordinal][d]*t.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let s=[];for(let g=0;g<d-1;g++)s.push(0);s.push(1);let r=1;for(let g=0;g<d;g++){for(let L=0;L<s.length;L++)s[L]=t.reedSolomonMultiply(s[L],r),L+1<s.length&&(s[L]^=s[L+1]);r=t.reedSolomonMultiply(r,2)}return s}static reedSolomonComputeRemainder(d,s){let r=s.map(g=>0);for(const g of d){const L=g^r.shift();r.push(0),s.forEach((m,C)=>r[C]^=t.reedSolomonMultiply(m,L))}return r}static reedSolomonMultiply(d,s){if(d>>>8!=0||s>>>8!=0)throw new RangeError("Byte out of range");let r=0;for(let g=7;g>=0;g--)r=r<<1^(r>>>7)*285,r^=(s>>>g&1)*d;return a(r>>>8==0),r}finderPenaltyCountPatterns(d){const s=d[1];a(s<=this.size*3);const r=s>0&&d[2]==s&&d[3]==s*3&&d[4]==s&&d[5]==s;return(r&&d[0]>=s*4&&d[6]>=s?1:0)+(r&&d[6]>=s*4&&d[0]>=s?1:0)}finderPenaltyTerminateAndCount(d,s,r){return d&&(this.finderPenaltyAddHistory(s,r),s=0),s+=this.size,this.finderPenaltyAddHistory(s,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(d,s){s[0]==0&&(d+=this.size),s.pop(),s.unshift(d)}};let e=t;e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function n(d,s,r){if(s<0||s>31||d>>>s!=0)throw new RangeError("Value out of range");for(let g=s-1;g>=0;g--)r.push(d>>>g&1)}function o(d,s){return(d>>>s&1)!=0}function a(d){if(!d)throw new Error("Assertion error")}const c=class{constructor(d,s,r){if(this.mode=d,this.numChars=s,this.bitData=r,s<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}static makeBytes(d){let s=[];for(const r of d)n(r,8,s);return new c(c.Mode.BYTE,d.length,s)}static makeNumeric(d){if(!c.isNumeric(d))throw new RangeError("String contains non-numeric characters");let s=[];for(let r=0;r<d.length;){const g=Math.min(d.length-r,3);n(parseInt(d.substr(r,g),10),g*3+1,s),r+=g}return new c(c.Mode.NUMERIC,d.length,s)}static makeAlphanumeric(d){if(!c.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let s=[],r;for(r=0;r+2<=d.length;r+=2){let g=c.ALPHANUMERIC_CHARSET.indexOf(d.charAt(r))*45;g+=c.ALPHANUMERIC_CHARSET.indexOf(d.charAt(r+1)),n(g,11,s)}return r<d.length&&n(c.ALPHANUMERIC_CHARSET.indexOf(d.charAt(r)),6,s),new c(c.Mode.ALPHANUMERIC,d.length,s)}static makeSegments(d){return d==""?[]:c.isNumeric(d)?[c.makeNumeric(d)]:c.isAlphanumeric(d)?[c.makeAlphanumeric(d)]:[c.makeBytes(c.toUtf8ByteArray(d))]}static makeEci(d){let s=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<1<<7)n(d,8,s);else if(d<1<<14)n(2,2,s),n(d,14,s);else if(d<1e6)n(6,3,s),n(d,21,s);else throw new RangeError("ECI assignment value out of range");return new c(c.Mode.ECI,0,s)}static isNumeric(d){return c.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return c.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,s){let r=0;for(const g of d){const L=g.mode.numCharCountBits(s);if(g.numChars>=1<<L)return 1/0;r+=4+L+g.bitData.length}return r}static toUtf8ByteArray(d){d=encodeURI(d);let s=[];for(let r=0;r<d.length;r++)d.charAt(r)!="%"?s.push(d.charCodeAt(r)):(s.push(parseInt(d.substr(r+1,2),16)),r+=2);return s}};let l=c;l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=l})(Ke||(Ke={}));(i=>{(t=>{const e=class{constructor(o,a){this.ordinal=o,this.formatBits=a}};let n=e;n.LOW=new e(0,1),n.MEDIUM=new e(1,0),n.QUARTILE=new e(2,3),n.HIGH=new e(3,2),t.Ecc=n})(i.QrCode||(i.QrCode={}))})(Ke||(Ke={}));(i=>{(t=>{const e=class{constructor(o,a){this.modeBits=o,this.numBitsCharCount=a}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};let n=e;n.NUMERIC=new e(1,[10,12,14]),n.ALPHANUMERIC=new e(2,[9,11,13]),n.BYTE=new e(4,[8,16,16]),n.KANJI=new e(8,[8,10,12]),n.ECI=new e(7,[0,0,0]),t.Mode=n})(i.QrSegment||(i.QrSegment={}))})(Ke||(Ke={}));var Tn=Ke;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var x3={L:Tn.QrCode.Ecc.LOW,M:Tn.QrCode.Ecc.MEDIUM,Q:Tn.QrCode.Ecc.QUARTILE,H:Tn.QrCode.Ecc.HIGH},O3=128,I3="L",B3="#FFFFFF",P3="#000000",T3=!1,ml=4,M3=.1;function q3(i,t=0){const e=[];return i.forEach(function(n,o){let a=null;n.forEach(function(c,l){if(!c&&a!==null){e.push(`M${a+t} ${o+t}h${l-a}v1H${a+t}z`),a=null;return}if(l===n.length-1){if(!c)return;a===null?e.push(`M${l+t},${o+t} h1v1H${l+t}z`):e.push(`M${a+t},${o+t} h${l+1-a}v1H${a+t}z`);return}c&&a===null&&(a=l)})}),e.join("")}function k3(i,t){return i.slice().map((e,n)=>n<t.y||n>=t.y+t.h?e:e.map((o,a)=>a<t.x||a>=t.x+t.w?o:!1))}function R3(i,t,e,n){if(n==null)return null;const o=e?ml:0,a=i.length+o*2,c=Math.floor(t*M3),l=a/t,d=(n.width||c)*l,s=(n.height||c)*l,r=n.x==null?i.length/2-d/2:n.x*l,g=n.y==null?i.length/2-s/2:n.y*l;let L=null;if(n.excavate){let m=Math.floor(r),C=Math.floor(g),A=Math.ceil(d+r-m),w=Math.ceil(s+g-C);L={x:m,y:C,w:A,h:w}}return{x:r,y:g,h:s,w:d,excavation:L}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function N3(i){const t=i,{value:e,size:n=O3,level:o=I3,bgColor:a=B3,fgColor:c=P3,includeMargin:l=T3,imageSettings:d}=t,s=S3(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let r=Tn.QrCode.encodeText(e,x3[o]).getModules();const g=l?ml:0,L=r.length+g*2,m=R3(r,n,l,d);let C=null;d!=null&&m!=null&&(m.excavation!=null&&(r=k3(r,m.excavation)),C=ve("image",{xlinkHref:d.src,height:m.h,width:m.w,x:m.x+g,y:m.y+g,preserveAspectRatio:"none"}));const A=q3(r,g);return ti("svg",{...A3({height:n,width:n,viewBox:`0 0 ${L} ${L}`},s),children:[ve("path",{fill:a,d:`M0,0 h${L}v${L}H0z`,shapeRendering:"crispEdges"}),ve("path",{fill:c,d:A,shapeRendering:"crispEdges"}),C]})}/**
 * @module @zk-kit/incremental-merkle-tree
 * @version 1.0.0
 * @file Incremental Merkle tree implementation in TypeScript.
 * @copyright Cedoor 2022
 * @license MIT
 * @see [Github]{@link https://github.com/privacy-scaling-explorations/zk-kit/tree/main/packages/incremental-merkle-tree}
*/function _e(i,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];if(i===void 0)throw new TypeError("Parameter '".concat(t,"' is not defined"));if(!e.includes(typeof i))throw new TypeError("Parameter '".concat(t,"' is none of these types: ").concat(e.join(", ")))}function D3(i,t,e,n,o,a){if(_e(i,"index","number"),i<0||i>=n[0].length)throw new Error("The leaf does not exist in this tree");for(var c=[],l=[],d=i,s=0;s<t;s+=1){var r=i%e,g=i-r,L=g+e;l[s]=r,c[s]=[];for(var m=g;m<L;m+=1)m!==i&&(m<n[s].length?c[s].push(n[s][m]):c[s].push(o[s]));i=Math.floor(i/e)}return{root:a,leaf:n[0][d],pathIndices:l,siblings:c}}function z3(i,t){return _e(i,"leaf","number","string","bigint"),t[0].indexOf(i)}function j3(i,t,e,n,o,a){if(_e(i,"leaf","number","string","bigint"),n[0].length>=Math.pow(e,t))throw new Error("The tree is full");for(var c=i,l=n[0].length,d=0;d<t;d+=1){var s=l%e,r=l-s,g=r+e,L=[];n[d][l]=c;for(var m=r;m<g;m+=1)m<n[d].length?L.push(n[d][m]):L.push(o[d]);c=a(L),l=Math.floor(l/e)}return c}function rs(i,t,e,n,o,a,c){if(_e(i,"index","number"),i<0||i>=o[0].length)throw new Error("The leaf does not exist in this tree");for(var l=t,d=0;d<e;d+=1){var s=i%n,r=i-s,g=r+n,L=[];o[d][i]=l;for(var m=r;m<g;m+=1)m<o[d].length?L.push(o[d][m]):L.push(a[d]);l=c(L),i=Math.floor(i/n)}return l}function U3(i,t){_e(i,"proof","object"),_e(i.root,"proof.root","number","string","bigint"),_e(i.leaf,"proof.leaf","number","string","bigint"),_e(i.siblings,"proof.siblings","object"),_e(i.pathIndices,"proof.pathElements","object");for(var e=i.leaf,n=0;n<i.siblings.length;n+=1){var o=i.siblings[n].slice();o.splice(i.pathIndices[n],0,e),e=t(o)}return i.root===e}var $3=function(){function i(t,e,n,o){if(o===void 0&&(o=2),_e(t,"hash","function"),_e(e,"depth","number"),_e(n,"zeroValue","number","string","bigint"),_e(o,"arity","number"),e<1||e>i.maxDepth)throw new Error("The tree depth must be between 1 and 32");this._hash=t,this._depth=e,this._zeroes=[],this._nodes=[],this._arity=o;for(var a=0;a<e;a+=1)this._zeroes.push(n),this._nodes[a]=[],n=t(Array(this._arity).fill(n));this._root=n,Object.freeze(this._zeroes),Object.freeze(this._nodes)}return Object.defineProperty(i.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depth",{get:function(){return this._depth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leaves",{get:function(){return this._nodes[0].slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zeroes",{get:function(){return this._zeroes},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"arity",{get:function(){return this._arity},enumerable:!1,configurable:!0}),i.prototype.indexOf=function(t){return z3(t,this._nodes)},i.prototype.insert=function(t){this._root=j3(t,this.depth,this.arity,this._nodes,this.zeroes,this._hash)},i.prototype.delete=function(t){this._root=rs(t,this.zeroes[0],this.depth,this.arity,this._nodes,this.zeroes,this._hash)},i.prototype.update=function(t,e){this._root=rs(t,e,this.depth,this.arity,this._nodes,this.zeroes,this._hash)},i.prototype.createProof=function(t){return D3(t,this.depth,this.arity,this._nodes,this.zeroes,this.root)},i.prototype.verifyProof=function(t){return U3(t,this._hash)},i.maxDepth=32,i}();/**
 * @module @semaphore-protocol/group
 * @version 2.5.0
 * @file A library to create and manage Semaphore groups.
 * @copyright Ethereum Foundation 2022
 * @license MIT
 * @see [Github]{@link https://github.com/semaphore-protocol/semaphore/tree/main/packages/group}
*/var V3=function(){function i(t,e){if(t===void 0&&(t=20),e===void 0&&(e=BigInt(0)),t<16||t>32)throw new Error("The tree depth must be between 16 and 32");this._merkleTree=new $3(Sl,t,e,2)}return Object.defineProperty(i.prototype,"root",{get:function(){return this._merkleTree.root},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depth",{get:function(){return this._merkleTree.depth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zeroValue",{get:function(){return this._merkleTree.zeroes[0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"members",{get:function(){return this._merkleTree.leaves},enumerable:!1,configurable:!0}),i.prototype.indexOf=function(t){return this._merkleTree.indexOf(t)},i.prototype.addMember=function(t){this._merkleTree.insert(BigInt(t))},i.prototype.addMembers=function(t){for(var e=0,n=t;e<n.length;e++){var o=n[e];this.addMember(o)}},i.prototype.updateMember=function(t,e){this._merkleTree.update(t,e)},i.prototype.removeMember=function(t){this._merkleTree.delete(t)},i.prototype.generateProofOfMembership=function(t){var e=this._merkleTree.createProof(t);return e.siblings=e.siblings.map(function(n){return n[0]}),e},i}();const Q3=new oh({uri:"https://api.thegraph.com/subgraphs/name/hiroism007/zmorpheus",cache:new Hf});function G3(i){return console.log(i),`
            query {
              pseudonymParty(id: "${i}") {
                members
              }   
            }`}function t0(){const i=xl();Ol();const{themeStretch:t}=Il(),{isAuthenticated:e}=Bl(),{address:n}=Pl(),o=Wl(),{proofId:a}=Tl(),[c,l]=Be.exports.useState(null),[d,s]=Be.exports.useState(null),[r,g]=Be.exports.useState(!1),[L,m]=Be.exports.useState(""),C=Be.exports.useCallback(async()=>{try{const T=await Ra.get(`/proofs/${a}`);o.current&&l(T.data)}catch(T){console.error(T),i("/404")}},[o,i,a]),A=Be.exports.useCallback(async()=>{if(!!c)try{const T=await Ra.get(`/events/${c.eventId}`);o.current&&s(T.data)}catch(T){console.error(T)}},[o,c]);Be.exports.useEffect(()=>{C()},[C]),Be.exports.useEffect(()=>{c&&A()},[A,c]);const w=Be.exports.useCallback(async()=>{const T=localStorage.getItem("identityCommitment");if(!T||!d)return;const F=new Ml(T),R=F.generateCommitment(),q=G3(d.id),Z=d.verificationNetworkOption==="scroll"?"0xE2F3308c29b5616b1bc90eAC4E1D27D2cD3DB66b":"0xf004f73aee5823609dE286774397C901Fc95Fc2F",E=d.verificationNetworkOption==="scroll"?new ql({url:"https://prealpha.scroll.io/l2"}):new kl("matic","HCxVpFbjm389Z0fJd7N4V6_KbV5ZLmLj"),f=Zl.connect(Z,E),y=new V3(16);if(d.verificationNetworkOption==="matic"){const v=await Q3.query({query:mn(q)});v.data&&v.data.pseudonymParty&&v.data.pseudonymParty.members.forEach(P=>{const V=Rl.from(P);console.log("here"),console.log(V.toString()),y.addMember(V.toString())})}else{const v=await f.queryFilter(f.filters.MemberAdded());y.addMembers(v.map(P=>(console.log(P.args?.[2].toString()),P.args[2].toString())))}console.log("here we go"),console.log(R),console.log(y.root),console.log(y.members),console.log(y.depth),console.log(y.indexOf(R));const I="1",{proof:k,publicSignals:O}=await E3(F,y,d.id,I);console.log(O);const x=JSON.stringify({id:d.id,network:d.verificationNetworkOption,signal:ss(I),nullifierHash:O.nullifierHash,externalNullifier:O.externalNullifier,proof:F3(k)});m(x),g(!1),console.log(x)},[d]);return ve(Nl,{title:"Proof",children:ti(Dl,{maxWidth:t?!1:"lg",children:[ve(zl,{sx:{color:"#fff",zIndex:T=>T.zIndex.drawer+1},open:r,children:ve(jl,{color:"inherit"})}),c&&ti(Ul,{children:[ve(Jl,{event:c.event}),ve($l,{sx:{p:{xs:3,md:2},mb:1},children:ti(Vl,{direction:"column",justifyContent:"center",alignItems:"center",spacing:3,children:[L&&ve(N3,{value:L,size:320}),!L&&e&&c.account===n&&ve(Ql,{fullWidth:!0,color:"info",onClick:w,size:"large",variant:"contained",endIcon:ve(Gl,{icon:"uiw:verification"}),children:"Generate ZKP"})]})})]})]})})}export{t0 as default};
